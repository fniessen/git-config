<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Awesome Git aliases and extra commands</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Fabrice Niessen" />
<meta name="description" content="Pretty format for `git log' and different helpful command aliases"
 />
<meta name="keywords" content="git, log, pretty format, alias" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
</head>
<body>
<div id="content">
<h1 class="title">Awesome Git aliases and extra commands</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org1155837">Documentation</a></li>
<li><a href="#org7e0eb2c">Overview</a></li>
<li><a href="#org9b145ea">Tips</a></li>
<li><a href="#org2851539">Comments on branching (from Matthias)</a></li>
<li><a href="#orga500a0d">Overview</a></li>
<li><a href="#orge74d860">Settings</a>
<ul>
<li><a href="#org42ae701">User</a></li>
<li><a href="#org92bc358">Core</a></li>
<li><a href="#orge2a9b2f">Help</a></li>
<li><a href="#org8991a4e">Log</a></li>
<li><a href="#org67b0b05">Diff</a></li>
<li><a href="#org072d3d0">Apply</a></li>
<li><a href="#org7c42102">Fetch</a></li>
<li><a href="#orgecc5efb">Status</a></li>
<li><a href="#org24744f2">Pull</a></li>
<li><a href="#org89d04bb">Push</a></li>
<li><a href="#org8c21f29">Merge</a></li>
<li><a href="#org27cf8f2">Rebase</a></li>
<li><a href="#orgc75cd47">Grep</a></li>
<li><a href="#org553c44f">Color</a></li>
<li><a href="#org7179bb7">Proxy</a></li>
<li><a href="#org85c00d6">Repository administration</a></li>
<li><a href="#org134c9e9">Format</a></li>
</ul>
</li>
<li><a href="#org3475316">Aliases</a>
<ul>
<li><a href="#orgc10d827">SHOW - Check the status of your files</a></li>
<li><a href="#org6fc26e1">SHOW - View your changes</a></li>
<li><a href="#orgf6bdc50">SHOW - View the commit history</a></li>
<li><a href="#org918b2eb">SHOW - Show blame information about original authors of lines changed or removed</a></li>
<li><a href="#org596c15e">SHOW - find all &ldquo;unpushed&rdquo; commits for all projects in a directory</a></li>
<li><a href="#orga9026c2">Ignoring files</a></li>
<li><a href="#org430b97a">REVERT - Undo things</a></li>
<li><a href="#org83a0592">Merge</a></li>
<li><a href="#org1b42413">UPDATE - Pull</a></li>
<li><a href="#orgd356020">UPDATE - Merge</a></li>
<li><a href="#org4f940e2">BRANCH - Branch</a></li>
<li><a href="#org28b9734">Stash</a></li>
<li><a href="#orgf29809e">PUBLISH - Push</a></li>
<li><a href="#orga79370b">PUBLISH - Find out if a change is part of a release</a></li>
<li><a href="#org1ae5b15">Create patches</a></li>
<li><a href="#orgf9694b1">PUBLISH - Prepare a release</a></li>
<li><a href="#org6e501e0">PUBLISH - Tag</a></li>
<li><a href="#orgd09bbab">Debugging</a></li>
<li><a href="#org4dcfbf8">Abbreviations</a></li>
<li><a href="#orgb3846d3">Show the path to root directory of Git repo</a></li>
<li><a href="#org11fe4bd">Sync</a></li>
<li><a href="#org39415f1">Cherrypick style recording</a></li>
<li><a href="#orgb8221a9">Dangling</a></li>
<li><a href="#org033df36"><span class="todo TODO">TODO</span> To sort out</a></li>
<li><a href="#orge6de9e4">Git and Subversion</a></li>
</ul>
</li>
<li><a href="#org2ad946d">Run on All repositories</a></li>
<li><a href="#orgfdda98f">------------------------------------------------------------------------------</a></li>
<li><a href="#orgb3f5430">Repository</a>
<ul>
<li><a href="#org3815d16">Create a Git repository locally</a></li>
<li><a href="#orgacb2022">Clone a repository</a></li>
<li><a href="#orgb80fcf4">Create and add your SSH public key to a repository management platform</a></li>
<li><a href="#org5b64599">Create a new repository in GitHub</a></li>
<li><a href="#org67c2e36">Open a repository in a web browser</a></li>
</ul>
</li>
<li><a href="#org2cd1ca8">Source Files</a>
<ul>
<li><a href="#org7d3d104">Search for files</a></li>
<li><a href="#orgc6c001c">Search for code</a></li>
<li><a href="#org7980de2">Undo local changes</a></li>
</ul>
</li>
<li><a href="#orgf025b9a">Commits</a>
<ul>
<li><a href="#orgcee124b">Create a commit</a></li>
<li><a href="#org94751d1">Get a commit detail</a></li>
<li><a href="#orga992bc5">Get the diff of a commit</a></li>
<li><a href="#org6460e6d">Get the references the commit has been pushed to (branches and tags)</a></li>
<li><a href="#org936a121">Search for commits</a></li>
<li><a href="#orgc690c89">Push</a></li>
<li><a href="#org4ab818c">Undo changes</a></li>
</ul>
</li>
<li><a href="#orge751e73">Branches</a>
<ul>
<li><a href="#org1779110">Branching model</a></li>
<li><a href="#org2046463">Create a branch</a></li>
<li><a href="#org2b5f5b0">Publish a branch</a></li>
<li><a href="#orgd2ecc6c">List branches</a></li>
<li><a href="#orgb839594">Switch branches</a></li>
<li><a href="#orgce74c3b">Delete a branch</a></li>
<li><a href="#orgb2b623a">Rename a branch</a></li>
</ul>
</li>
<li><a href="#orge5e65a1">Tags</a>
<ul>
<li><a href="#org649a3ef">Create a tag</a></li>
<li><a href="#org22bc7b9">See the commits for a tag</a></li>
<li><a href="#org80e0751">Push a tag to your repository</a></li>
<li><a href="#org3b079c4">List the repository tags</a></li>
<li><a href="#org940414f">Rename a tag</a></li>
<li><a href="#orgcb2576c">Remove a tag from a repository</a></li>
</ul>
</li>
<li><a href="#orga945b21">Compare Revisions (commits, branches or tags)</a>
<ul>
<li><a href="#org07aa296">Commits</a></li>
<li><a href="#org4758a85">Files changed</a></li>
<li><a href="#org87a5efc">Diff</a></li>
<li><a href="#org300c8e4">Merged pull requests</a></li>
<li><a href="#org447937b">Example comparisons</a></li>
</ul>
</li>
<li><a href="#org54936e2">?Releases</a></li>
<li><a href="#org68afd49">?Contributors</a></li>
<li><a href="#org2a0ff90">?Graph</a></li>
<li><a href="#orgf1e82d4">Pull requests</a>
<ul>
<li><a href="#orgfee218a">Create a pull request</a></li>
<li><a href="#org28b90db">List pull requests</a></li>
<li><a href="#org94d3fe0">1. Check out a pull request locally</a></li>
<li><a href="#org216cfba">2. Review the changes locally</a></li>
<li><a href="#org7be58c3">Push changes to a pull request</a></li>
<li><a href="#org120970b">3. Merge the branch and fix any conflicts that come up</a></li>
<li><a href="#org4f78692">Merge pull request</a></li>
<li><a href="#org208e277">4. Push the result of the merge to the remote</a></li>
<li><a href="#org08f99cf">Clean up old branch</a></li>
<li><a href="#org3b55d8e">Show in a web browser</a></li>
<li><a href="#orga7c08ec">Who?</a></li>
<li><a href="#org04ff2d4">Find the pull request that introduced a commit</a></li>
<li><a href="#org9c43f19">Saved replies</a></li>
</ul>
</li>
<li><a href="#org73f9417">Pipelines</a></li>
<li><a href="#orgb98f0cd">Deployments (to different environments)</a></li>
<li><a href="#org2c364a7">Issues</a>
<ul>
<li><a href="#orgb1b6660">Create Issue</a></li>
<li><a href="#orgc203383">Create Pull Requests</a></li>
<li><a href="#org53b080c">List All Issues</a></li>
<li><a href="#org436e7e8">List Open Issues</a></li>
<li><a href="#org219444a">List My Issues (assigned to me)</a></li>
<li><a href="#org8ee4863">List Issues I&rsquo;ve created</a></li>
<li><a href="#org4893890">Show Issue</a></li>
<li><a href="#org0182897">Open Issues in a web browser</a></li>
</ul>
</li>
<li><a href="#orga944575">Downloads</a></li>
<li><a href="#org81b75a9">Settings</a>
<ul>
<li><a href="#orgfff7530">SSH keys</a></li>
</ul>
</li>
<li><a href="#org180b268">------------------------------------------------------------------------------</a></li>
<li><a href="#orgf080591">Download repository</a>
<ul>
<li><a href="#orgf511d7f">Easily launch a temporary one-off Git server from any local repository, to enable a peer-to-peer Git workflow</a></li>
</ul>
</li>
<li><a href="#orga1f400b">What if</a></li>
<li><a href="#org7f7256c">If you made a mistake</a></li>
<li><a href="#org9a0f80a">If you get errors&#x2026;</a>
<ul>
<li><a href="#orgb14d9ac">Method 1</a></li>
<li><a href="#orgf286572">Alternative</a></li>
<li><a href="#org5fd5e94">A GitHub test repository to experiment with conflicts</a></li>
</ul>
</li>
<li><a href="#orgdeac000">GitHub tasks</a>
<ul>
<li><a href="#org7c3d81d">Force push</a></li>
</ul>
</li>
<li><a href="#org4357ae3">References</a></li>
<li><a href="#orgdee647d">Free private repositories</a></li>
<li><a href="#org95fe48b">Use Git and SVN together</a></li>
</ul>
</div>
</div>

<div id="outline-container-org1155837" class="outline-2">
<h2 id="org1155837">Documentation</h2>
<div class="outline-text-2" id="text-org1155837">
<p>
XXX Git-extras (extra commands!)
<a href="https://github.com/tj/git-extras/blob/master/Commands.md">https://github.com/tj/git-extras/blob/master/Commands.md</a>
</p>

<p>
XXX Hub (extra commands!)
<a href="https://github.com/github/hub/blob/master/share/man/man1/hub.1.md">https://github.com/github/hub/blob/master/share/man/man1/hub.1.md</a>
</p>

<p>
XXX Git extra commands (and lots of pointers!!!)
<a href="https://github.com/unixorn/git-extra-commands">https://github.com/unixorn/git-extra-commands</a>
</p>

<p>
XXX Bitbucket API
<a href="https://developer.atlassian.com/bitbucket/api/2/reference/resource/">https://developer.atlassian.com/bitbucket/api/2/reference/resource/</a>
</p>

<p>
XXX Bitbucket API client for Browser and Node.js
<a href="https://bitbucketjs.netlify.com/">https://bitbucketjs.netlify.com/</a>
</p>

<p>
XXX
<a href="https://help.github.com/en/github/searching-for-information-on-github/">https://help.github.com/en/github/searching-for-information-on-github/</a>
</p>

<p>
XXX GitLab API
<a href="https://docs.gitlab.com/ee/api/">https://docs.gitlab.com/ee/api/</a>
<a href="https://python-gitlab.readthedocs.io/en/stable/gl_objects/projects.html#project-releases">https://python-gitlab.readthedocs.io/en/stable/gl_objects/projects.html#project-releases</a>
</p>

<p>
XXX GitAlias.com file of many git alias items, including shortcuts, helpers, workflows, etc.
<a href="https://github.com/gitalias/gitalias/blob/master/gitalias.txt%0D">https://github.com/gitalias/gitalias/blob/master/gitalias.txt%0D</a>
</p>

<p>
XXX Today I learned
<a href="https://til.hashrocket.com/git">https://til.hashrocket.com/git</a>
</p>
</div>
</div>

<div id="outline-container-org7e0eb2c" class="outline-2">
<h2 id="org7e0eb2c">Overview</h2>
<div class="outline-text-2" id="text-org7e0eb2c">
<ul class="org-ul">
<li>This is Git.  It tracks collaborative work on projects through a beautiful
distributed graph theory model.</li>

<li>Cool.  How do we use it?</li>

<li><p>
No idea.  Just memorize these Shell commands and type them to sync up.  If you
get errors, save your work elsewhere, delete the project, and download a fresh
copy.
</p>

<p>
If that doesn&rsquo;t fix it, <code>git.txt</code> contains the phone number of a friend of mine
who understands <code>git</code>.  Just wait through a few minutes of <i>&rsquo;It&rsquo;s really pretty
simple, just think of branches as&#x2026;&rsquo;</i> and eventually you&rsquo;ll learn the
commands that will fix everything.
</p></li>
</ul>

<p>
From <a href="https://xkcd.com/1597/">xkcd</a>.
</p>
</div>
</div>

<div id="outline-container-org9b145ea" class="outline-2">
<h2 id="org9b145ea">Tips</h2>
<div class="outline-text-2" id="text-org9b145ea">
<p>
<b>Commit early, commit often</b> (and with the right message): it is a bad idea to do
a lot of work without committing&#x2026; But don&rsquo;t push every single commit: push
when changes are tested!
</p>

<p>
Branch out often.
<a href="http://kentnguyen.com/development/visualized-git-practices-for-team/">http://kentnguyen.com/development/visualized-git-practices-for-team/</a>
(definition of git rebase)
</p>
</div>
</div>

<div id="outline-container-org2851539" class="outline-2">
<h2 id="org2851539">Comments on branching (from Matthias)</h2>
<div class="outline-text-2" id="text-org2851539">
<p>
If you have finished your work, feel free to merge the branch into <code>master</code> (maybe
you want to rebase your WIP branch before based on <code>master</code>):
</p>

<p>
The following sequence is here very helpful:
</p>

<ol class="org-ol">
<li>git checkout master</li>
<li>git pull (this makes sure that your local <code>master</code> branch matches the remote one)</li>
<li>git checkout WIP</li>
<li>git rebase master</li>
<li>git checkout master</li>
<li>git merge WIP</li>
</ol>

<p>
after this you can delete your local WIP branch and or if you pushed it the
remote one too.
</p>
</div>
</div>

<div id="outline-container-orga500a0d" class="outline-2">
<h2 id="orga500a0d">Overview</h2>
<div class="outline-text-2" id="text-orga500a0d">
<p>
The following configures interesting global settings for Git. These are stored
in the <code>.gitconfig</code> file located in the user home directory.
</p>

<div class="warning">
<p>
Note that tangling this file will override whichever <code>~/.gitconfig</code> file you
might have. So <b>BE EXTREMELY CAREFUL</b>!
</p>

</div>
</div>
</div>

<div id="outline-container-orge74d860" class="outline-2">
<h2 id="orge74d860">Settings</h2>
<div class="outline-text-2" id="text-orge74d860">
</div>
<div id="outline-container-org42ae701" class="outline-3">
<h3 id="org42ae701">User</h3>
<div class="outline-text-3" id="text-org42ae701">
<p>
Setting your user name and e-mail address is important because Git stores the
committer and author of a change in every commit.
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">user</span>]
    <span class="org-variable-name">name</span> = John Doe
    <span class="org-variable-name">email</span> = john.doe@example.com

[<span class="org-type">github</span>]
    <span class="org-variable-name">user</span> = jdoe
</pre>
</div>

<p>
You should &ldquo;override&rdquo; the above with your personal details:
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">include</span>]
    <span class="org-variable-name">path</span> = .gitconfig_local
</pre>
</div>

<p>
Or create a Git command to set email addresses for you:
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">alias</span>]
    <span class="org-variable-name">workprofile</span> = config user.email \"john@work.com\"
</pre>
</div>
</div>
</div>

<div id="outline-container-org92bc358" class="outline-3">
<h3 id="org92bc358">Core</h3>
<div class="outline-text-3" id="text-org92bc358">
<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">core</span>]
    <span class="org-variable-name">editor</span> = emacsclient
</pre>
</div>

<p>
<b>Text viewer</b> for use by Git commands.
</p>

<div class="note">
<p>
When the <code>LESS</code> environment variable is unset, Git sets it to <code>FRSX</code>.  If the <code>LESS</code>
environment variable is set, Git does not change it at all.
</p>

<p>
We use <code>-R</code> in the command itself to be sure to <b>interpret the color codes</b> when Git
is run from <i>Windows</i> Emacs (<code>C-x v l</code>), with <i>no</i> value for the <code>LESS</code> <i>environment
variable</i>.
</p>

</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">git-grep to ignore ^M.</span>
    <span class="org-variable-name">pager</span> = tr -d <span class="org-string">'\\r'</span> | less -REX
</pre>
</div>

<p>
Stop viewing non-printable characters (for example, ISO Latin 1 accents in
a UTF-8 terminal) in reverse video and hexadecimals: see <code>LESSBINFMT</code>.
</p>

<p>
Stop viewing <code>^M</code> symbols in diff:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">whitespace = fix,-indent-with-non-tab,trailing-space,space-before-tab,cr-at-eol</span>
    <span class="org-variable-name">whitespace</span> = cr-at-eol
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">pager</span> = diff-so-fancy | less --tabs=4 -RFX
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">autocrlf</span> = input
    <span class="org-variable-name">safecrlf</span> = true

    <span class="org-variable-name">autocrlf</span> = false
    <span class="org-variable-name">safecrlf</span> = false
</pre>
</div>

<p>
<a href="https://help.github.com/en/github/using-git/configuring-git-to-handle-line-endings">GitHub suggests</a> that you should make sure to only use <code>\n</code> as a newline character
in Git-handled repositories.  There&rsquo;s an option to auto-convert:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Checkout as CRLF, commit as LF.</span>
    <span class="org-variable-name">autocrlf</span> = true
</pre>
</div>

<p>
Performance:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Do filesystem operations in parallel to hide latency (default since v2.1).</span>
    <span class="org-variable-name">preloadindex</span> = true

    <span class="org-comment-delimiter"># </span><span class="org-comment">Fix UAC issues so you don't need to run Git as administrator (default since v2.8).</span>
    <span class="org-variable-name">fscache</span> = true

[<span class="org-type">gc</span>]
    <span class="org-comment-delimiter"># </span><span class="org-comment">Minimize the number of files in .git/.</span>
    <span class="org-variable-name">auto</span> = 256
</pre>
</div>
</div>
</div>

<div id="outline-container-orge2a9b2f" class="outline-3">
<h3 id="orge2a9b2f">Help</h3>
<div class="outline-text-3" id="text-orge2a9b2f">
<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">help</span>]
    <span class="org-variable-name">autocorrect</span> = 1
</pre>
</div>
</div>
</div>

<div id="outline-container-org8991a4e" class="outline-3">
<h3 id="org8991a4e">Log</h3>
<div class="outline-text-3" id="text-org8991a4e">
<p>
Get a better date (current format is 2019-11-26 17:35:30 +0100):
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">log</span>]
    <span class="org-variable-name">date</span> = iso
</pre>
</div>
</div>
</div>

<div id="outline-container-org67b0b05" class="outline-3">
<h3 id="org67b0b05">Diff</h3>
<div class="outline-text-3" id="text-org67b0b05">
<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">diff</span>]
    <span class="org-variable-name">renames</span> = copies
    <span class="org-variable-name">renameLimit</span> = 30000
</pre>
</div>

<p>
Using the patience diff algorithm to compare large swathes of repetitive text
(hello, xml!) often produces a much more readable diff that will reveal context
and therefore hopefully bugs/typos etc.
</p>

<p>
Here&rsquo;s a quick snippet of a diff to show it helping. Bare LCS-based diff:
</p>

<div class="org-src-container">
<pre class="src src-diff"><span class="org-diff-context"> def thing1 {</span>
<span class="org-diff-context">     something += 1</span>
<span class="org-diff-indicator-added">+</span><span class="org-diff-added">}</span>
<span class="org-diff-indicator-added">+</span>
<span class="org-diff-indicator-added">+</span><span class="org-diff-added">def somethingelse {</span>
<span class="org-diff-indicator-added">+</span><span class="org-diff-added">    something += 1</span>
<span class="org-diff-context"> }</span>

<span class="org-diff-context"> def thing2 {</span>
<span class="org-diff-context">     something += 2</span>
 }
</pre>
</div>

<p>
With <code>patience</code> becomes:
</p>

<div class="org-src-container">
<pre class="src src-diff"><span class="org-diff-context"> def thing1 {</span>
<span class="org-diff-context">     something += 1</span>
<span class="org-diff-context"> }</span>

<span class="org-diff-indicator-added">+</span><span class="org-diff-added">def somethingelse {</span>
<span class="org-diff-indicator-added">+</span><span class="org-diff-added">    something += 1</span>
<span class="org-diff-indicator-added">+</span><span class="org-diff-added">}</span>
<span class="org-diff-indicator-added">+</span>
<span class="org-diff-context"> def thing2 {</span>
<span class="org-diff-context">     something += 2</span>
 }
</pre>
</div>

<p>
Same end result but much easier to read.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">algorithm</span> = patience
</pre>
</div>

<p>
Git diff will use (i)ndex, (w)ork tree, (c)ommit and (o)bject instead of a/b/c/d
as prefixes for patches:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">mnemonicprefix</span> = true
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">noprefix</span> = true
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">colorMoved</span> = dimmed_zebra
</pre>
</div>
</div>

<div id="outline-container-org99268d3" class="outline-4">
<h4 id="org99268d3">Use Meld as Git <code>difftool</code></h4>
<div class="outline-text-4" id="text-org99268d3">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">tool</span> = meld

[<span class="org-type">difftool</span>]
    <span class="org-variable-name">prompt</span> = false

[difftool <span class="org-string">"meld"</span>]
    <span class="org-variable-name">cmd</span> = meld <span class="org-string">"$LOCAL"</span> <span class="org-string">"$REMOTE"</span>
</pre>
</div>

<p>
Use a generic rev syntax (rev-parse) to transparently allow complex rev
expressions.
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">alias</span>]
    <span class="org-variable-name">showtool</span> = <span class="org-string">"!f() { rev=$(git rev-parse \"${*:-HEAD}\"); git difftool $rev~1 $rev; }; f"</span>
</pre>
</div>

<p>
This allows doing nice things like:
</p>

<div class="org-src-container">
<pre class="src src-shell">git showtool :/some nasty bug
</pre>
</div>

<p>
Diff the last commit for a given file:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">diff-file-last-commit</span> = <span class="org-string">"!f() { \</span>
<span class="org-string">            project_root_dir=$(git root); \</span>
<span class="org-string">            echo finding full file path of $1 in $project_root_dir; \</span>
<span class="org-string">            filepath=$(find $project_root_dir -type f -name $1); \</span>
<span class="org-string">            echo full file path $filepath; \</span>
<span class="org-string">            last_modified_commit_hash=$(git rev-list -1 HEAD $filepath); \</span>
<span class="org-string">            echo last commit file modified $last_modified_commit_hash; \</span>
<span class="org-string">            git difftool $last_modified_commit_hash^ $filepath; \</span>
<span class="org-string">        }; f"</span>
</pre>
</div>

<p>
Usage (no matter where you are in the repo):
</p>

<div class="org-src-container">
<pre class="src src-shell">git diff-file-last-commit File.cpp
</pre>
</div>

<p>
This opens your configured <code>difftool</code> with the changes to File.cpp in the last
commit it was touched.
</p>
</div>
</div>

<div id="outline-container-orgad39cd7" class="outline-4">
<h4 id="orgad39cd7">Performing directory diffs (Comparing folders)</h4>
<div class="outline-text-4" id="text-orgad39cd7">
<p>
The following command makes it similar to the <code>git-meld.pl</code> script here:
<a href="https://github.com/wmanley/git-meld">https://github.com/wmanley/git-meld</a>:
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">alias</span>]
    <span class="org-variable-name">diffall</span> = difftool -t meld --dir-diff
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org072d3d0" class="outline-3">
<h3 id="org072d3d0">Apply</h3>
<div class="outline-text-3" id="text-org072d3d0">
<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">apply</span>]
    <span class="org-comment-delimiter"># </span><span class="org-comment">Detect whitespace errors when applying a patch.</span>
    <span class="org-variable-name">whitespace</span> = fix
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c42102" class="outline-3">
<h3 id="org7c42102">Fetch</h3>
<div class="outline-text-3" id="text-org7c42102">
<p>
Automatically delete local branches that have been removed from remote on
fetch/pull:
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">fetch</span>]
    <span class="org-variable-name">prune</span> = true
</pre>
</div>
</div>
</div>

<div id="outline-container-orgecc5efb" class="outline-3">
<h3 id="orgecc5efb">Status</h3>
<div class="outline-text-3" id="text-orgecc5efb">
<p>
If you are using submodules, it might be useful to turn on the submodule summary.
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">status</span>]
    <span class="org-variable-name">submoduleSummary</span> = true
</pre>
</div>
</div>
</div>

<div id="outline-container-org24744f2" class="outline-3">
<h3 id="org24744f2">Pull</h3>
<div class="outline-text-3" id="text-org24744f2">
<p>
Configure Git to do the <code>--rebase</code> part automatically.
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">pull</span>]
    <span class="org-variable-name">rebase</span> = true
</pre>
</div>

<p>
(The merge commit doesn&rsquo;t get deleted!)
</p>
</div>
</div>

<div id="outline-container-org89d04bb" class="outline-3">
<h3 id="org89d04bb">Push</h3>
<div class="outline-text-3" id="text-org89d04bb">
<p>
Push <b>only</b> the <b>current working branch</b> (sane pushing &#x2013; instead of pushing all
branches), with an added safety: only if it is <i>tracking</i> a remote upstream branch
with the <i>same name</i>.
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">push</span>]
    <span class="org-variable-name">default</span> = simple
</pre>
</div>

<p>
(<code>simple</code> is the default in Git 2.x)
</p>
</div>
</div>

<div id="outline-container-org8c21f29" class="outline-3">
<h3 id="org8c21f29">Merge</h3>
<div class="outline-text-3" id="text-org8c21f29">
<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">merge</span>]
    <span class="org-variable-name">stat</span> = true
    <span class="org-variable-name">summary</span> = true

    <span class="org-comment-delimiter"># </span><span class="org-comment">Include summaries of merged commits in newly created merge commit messages.</span>
    <span class="org-variable-name">log</span> = true
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">conflictstyle</span> = diff3
</pre>
</div>

<ul class="org-ul">
<li>For small changes, <code>git diff</code> and <code>vc-diff</code> are perfect.</li>
<li>For medium changes, <code>magit</code> is perfect.</li>
<li>For large changes, <a href="https://www.deltawalker.com/">DeltaWalker</a> (39.95 USD) is perfect.</li>
</ul>

<p>
How to resolve merge conflicts in Git?  Try <code>git mergetool</code>.
</p>
</div>

<div id="outline-container-org6c52d07" class="outline-4">
<h4 id="org6c52d07">Emacs as a Git mergetool</h4>
<div class="outline-text-4" id="text-org6c52d07">
<p>
Ediff or Emerge?  Or Magit???
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">merge</span>]
    <span class="org-variable-name">tool</span> = ediff

[mergetool <span class="org-string">"ediff"</span>]
    <span class="org-variable-name">cmd</span> = emacsclient -c -a \"\"  --eval \"(ediff-merge-files-with-ancestor \\\"$LOCAL\\\" \\\"$REMOTE\\\" \\\"$BASE\\\" nil \\\"$MERGED\\\")\"
    <span class="org-variable-name">keepBackup</span> = false
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f09495" class="outline-4">
<h4 id="org8f09495">Meld as Git mergetool</h4>
<div class="outline-text-4" id="text-org8f09495">
<p>
<b>How do I set up and use Meld as my git mergetool?</b>
See <a href="https://stackoverflow.com/questions/34119866/setting-up-and-using-meld-as-your-git-difftool-and-mergetool">https://stackoverflow.com/questions/34119866/setting-up-and-using-meld-as-your-git-difftool-and-mergetool</a>.
</p>

<p>
See <code>auto-merge</code> in
<a href="https://stackoverflow.com/questions/11133290/git-merging-using-meld">https://stackoverflow.com/questions/11133290/git-merging-using-meld</a> (first and
second solution).
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">tool</span> = meld
</pre>
</div>

<p>
Firstly here is what the parameters mean:
</p>

<ul class="org-ul">
<li><code>$LOCAL</code> is the file in the <b>current branch</b> (e.g. <code>master</code>).</li>

<li><code>$REMOTE</code> is the file in the <b>branch being merged</b> (e.g. <code>branch_name</code>).</li>

<li><code>$MERGED</code> is the <b>partially merged file</b> with the merge conflict information in
it.</li>

<li><code>$BASE</code> is the <b>common ancestor</b> of <code>$LOCAL</code> and <code>$REMOTE</code>, this is to say the file as
it was (before both changes) when the branch containing <code>$REMOTE</code> was originally
created.</li>
</ul>

<p>
I suggest you use either:
</p>

<div class="org-src-container">
<pre class="src src-conf">[mergetool <span class="org-string">"meld"</span>]
    <span class="org-variable-name">cmd</span> = meld <span class="org-string">"$LOCAL"</span> <span class="org-string">"$MERGED"</span> <span class="org-string">"$REMOTE"</span> --output <span class="org-string">"$MERGED"</span>
    <span class="org-variable-name">keepBackup</span> = false
</pre>
</div>

<p>
or:
</p>

<div class="org-src-container">
<pre class="src src-conf">[mergetool <span class="org-string">"meld"</span>]
    <span class="org-variable-name">cmd</span> = meld <span class="org-string">"$LOCAL"</span> <span class="org-string">"$BASE"</span> <span class="org-string">"$REMOTE"</span> --output <span class="org-string">"$MERGED"</span>
    <span class="org-variable-name">keepBackup</span> = false
</pre>
</div>

<p>
The choice is whether to use <code>$MERGED</code> or <code>$BASE</code> in between <code>$LOCAL</code> and <code>$REMOTE</code>.
</p>

<p>
Either way, Meld will display 3 panes with:
</p>

<ul class="org-ul">
<li><code>$LOCAL</code> in the left pane,</li>
<li><code>$REMOTE</code> in the right pane and</li>
<li>either <code>$MERGED</code> or <code>$BASE</code> in the middle pane.</li>
</ul>

<p>
In BOTH cases, <b>the middle pane is the file that you should edit to resolve the
merge conflicts</b>.  The difference is just in which starting edit position you&rsquo;d
prefer:
</p>

<ul class="org-ul">
<li><code>$MERGED</code> for the file which contains the partially merged file with the merge
conflict information or</li>

<li><code>$BASE</code> for the shared commit ancestor of <code>$LOCAL</code> and <code>$REMOTE</code>.</li>
</ul>

<div class="note">
<p>
Since both cmd lines can be useful, I keep them both in my <code>.gitconfig</code> file. Most
of the time I use the <code>$MERGED</code> line and the <code>$BASE</code> line is commented out, but the
commenting out can be swapped over if I want to use the <code>$BASE</code> line instead.
</p>

</div>

<div class="org-src-container">
<pre class="src src-conf">[mergetool <span class="org-string">"meld"</span>]
    <span class="org-variable-name">cmd</span> = meld --diff <span class="org-string">"$LOCAL"</span> <span class="org-string">"$MERGED"</span> <span class="org-string">"$REMOTE"</span> --diff <span class="org-string">"$BASE"</span> <span class="org-string">"$LOCAL"</span> --diff <span class="org-string">"$BASE"</span> <span class="org-string">"$REMOTE"</span> --output <span class="org-string">"$MERGED"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">cmd = meld --diff "$LOCAL" "$BASE" "$REMOTE" --diff "$BASE" "$LOCAL" --diff "$BASE" "$REMOTE" --output "$MERGED"</span>
    <span class="org-variable-name">keepBackup</span> = false
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org27cf8f2" class="outline-3">
<h3 id="org27cf8f2">Rebase</h3>
<div class="outline-text-3" id="text-org27cf8f2">
<p>
Set <code>rebase.stat = true</code>, so the <code>diffstat</code> output is still shown when they pull.
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">rebase</span>]
    <span class="org-variable-name">stat</span> = true
</pre>
</div>

<div class="warning">
<p>
At this point, let us remind you of <a href="https://git-scm.com/book/en/v2/Git-Branching-Rebasing#The-Perils-of-Rebasing">the perils of rebasing</a>.
</p>

</div>
</div>
</div>

<div id="outline-container-orgc75cd47" class="outline-3">
<h3 id="orgc75cd47">Grep</h3>
<div class="outline-text-3" id="text-orgc75cd47">
<p>
<a href="https://git-scm.com/docs/git-grep">https://git-scm.com/docs/git-grep</a>
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">grep</span>]
    <span class="org-variable-name">lineNumber</span> = true

    <span class="org-comment-delimiter"># </span><span class="org-comment"># Allow extended regular expressions</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">extendedRegexp = true</span>

    <span class="org-variable-name">fullName</span> = true
</pre>
</div>
</div>
</div>

<div id="outline-container-org553c44f" class="outline-3">
<h3 id="org553c44f">Color</h3>
<div class="outline-text-3" id="text-org553c44f">
<p>
Instead of hardcoding colors, I suggest:
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">color</span>]
    <span class="org-variable-name">ui</span> = true
    <span class="org-variable-name">branch</span> = auto
    <span class="org-variable-name">diff</span> = auto
    <span class="org-variable-name">status</span> = auto
    <span class="org-variable-name">interactive</span> = auto
</pre>
</div>

<p>
See <a href="http://git-scm.com/docs/git-config">http://git-scm.com/docs/git-config</a> for the <code>slot</code> list.
</p>
</div>

<div id="outline-container-org28d1793" class="outline-4">
<h4 id="org28d1793">Branch</h4>
<div class="outline-text-4" id="text-org28d1793">
<div class="org-src-container">
<pre class="src src-conf">[color <span class="org-string">"branch"</span>]
    <span class="org-variable-name">current</span> = cyan bold
    <span class="org-variable-name">local</span> = green bold
    <span class="org-variable-name">remote</span> = red bold
    <span class="org-variable-name">upstream</span> = red bold
    <span class="org-variable-name">plain</span> = yellow reverse
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf285127" class="outline-4">
<h4 id="orgf285127">Diff</h4>
<div class="outline-text-4" id="text-orgf285127">
<p>
See <a href="http://git-scm.com/docs/git-config">http://git-scm.com/docs/git-config</a> for the <code>slot</code> list.
</p>

<div class="org-src-container">
<pre class="src src-conf">[color <span class="org-string">"diff"</span>]
    <span class="org-variable-name">plain</span> = <span class="org-string">"#888888"</span>
    <span class="org-variable-name">meta</span> = 11
    <span class="org-variable-name">frag</span> = magenta bold
    <span class="org-variable-name">func</span> = <span class="org-string">"#cc99cc"</span>
    <span class="org-variable-name">old</span> = red bold
    <span class="org-variable-name">new</span> = green bold
    <span class="org-variable-name">commit</span> = yellow bold
    <span class="org-variable-name">whitespace</span> = red reverse
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">diff-so-fancy</span>]
    <span class="org-variable-name">useUnicodeRuler</span> = true

[color <span class="org-string">"diff-highlight"</span>]
    <span class="org-variable-name">oldNormal</span> = red bold
    <span class="org-variable-name">oldHighlight</span> = red bold 52
    <span class="org-variable-name">newNormal</span> = green bold
    <span class="org-variable-name">newHighlight</span> = green bold 22
</pre>
</div>
</div>
</div>

<div id="outline-container-orge360518" class="outline-4">
<h4 id="orge360518">Status</h4>
<div class="outline-text-4" id="text-orge360518">
<div class="org-src-container">
<pre class="src src-conf">[color <span class="org-string">"status"</span>]
    <span class="org-variable-name">header</span> = normal
    <span class="org-variable-name">added</span> = green bold
    <span class="org-variable-name">changed</span> = yellow bold
    <span class="org-variable-name">untracked</span> = cyan
    <span class="org-variable-name">branch</span> = cyan bold
    <span class="org-variable-name">nobranch</span> = bold ul blink 12
    <span class="org-variable-name">unmerged</span> = red reverse bold
</pre>
</div>

<ul class="org-ul">
<li>added = modified</li>
<li>changed = updated</li>
</ul>
</div>
</div>

<div id="outline-container-orgcce1f85" class="outline-4">
<h4 id="orgcce1f85">Grep</h4>
<div class="outline-text-4" id="text-orgcce1f85">
<p>
The first color given is the foreground; the second is the background.&ldquo;, e.g
<code>match 10 22</code> &#x2013; see <code>man 1 git-config</code> at &rdquo;CONFIGURATION FILE&ldquo; &gt; &rdquo;Values&ldquo; &gt;
&rdquo;color&ldquo;.
</p>

<div class="org-src-container">
<pre class="src src-conf">[color <span class="org-string">"grep"</span>]
    <span class="org-variable-name">context</span> = <span class="org-string">"#888888"</span>
    <span class="org-variable-name">filename</span> = yellow bold
    <span class="org-variable-name">function</span> = red
    <span class="org-variable-name">linenumber</span> = magenta bold
    <span class="org-variable-name">match</span> = green reverse bold
    <span class="org-variable-name">matchContext</span> = yellow reverse bold
    <span class="org-variable-name">matchSelected</span> = yellow bold blue
    <span class="org-variable-name">separator</span> = red bold
    <span class="org-variable-name">selected</span> = white
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7179bb7" class="outline-3">
<h3 id="org7179bb7">Proxy</h3>
<div class="outline-text-3" id="text-org7179bb7">
<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">http</span>]
    <span class="org-variable-name">proxy</span> = http://proxy-guest.forem.be:8080
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">alias</span>]
    <span class="org-comment-delimiter"># </span><span class="org-comment">Proxy.</span>
    <span class="org-variable-name">setproxy</span> = !git config --global http.proxy http://proxy-guest.forem.be:8080 &amp;&amp; git config --global https.proxy https://proxy-guest.forem.be:8080
    <span class="org-variable-name">rmvproxy</span> = !git config --global --unset http.proxy &amp;&amp; git config --global --unset https.proxy
</pre>
</div>
</div>
</div>

<div id="outline-container-org85c00d6" class="outline-3">
<h3 id="org85c00d6">Repository administration</h3>
<div class="outline-text-3" id="text-org85c00d6">
<p>
If unable to clone Git repository due to <b>self-signed certificate</b>&#x2026;
</p>

<ul class="org-ul">
<li><p>
For a one-time fix, you can use the <code>env</code> command to create an environment
variable of <code>GIT_SSL_NO_VERIFY=TRUE</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">  env <span class="org-variable-name">GIT_SSL_NO_VERIFY</span>=TRUE git &lt;command&gt; &lt;arguments&gt;
</pre>
</div></li>

<li><p>
If you don&rsquo;t want to do this all the time, you can disable Git SSL
verification:
</p>

<div class="org-src-container">
<pre class="src src-conf">  [<span class="org-type">http</span>]
      <span class="org-variable-name">sslVerify</span> = false
</pre>
</div>

<p>
Please be advised disabling SSL verification globally <b>might be considered
a security risk</b> and should be implemented only temporary.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org134c9e9" class="outline-3">
<h3 id="org134c9e9">Format</h3>
<div class="outline-text-3" id="text-org134c9e9">
<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">format</span>]
    <span class="org-variable-name">pretty</span> = format:%C(green)%ad%C(reset) %C(yellow)%h%C(auto)%d%C(reset) %s %C(bold blue)&lt;%an&gt;%C(reset)


<span class="org-comment-delimiter"># </span><span class="org-comment">https://dev.to/megamattmiller/the-git-aliases-that-get-me-to-friday-1cmj</span>
[<span class="org-type">custom.formats</span>]
    <span class="org-variable-name">ls</span>   = <span class="org-string">"[%C(auto,yellow)%&lt;|(10)%h%C(reset)] [%C(auto,bold blue)%&lt;(15trunc)%cn%C(reset)]  %C(auto)%d% C(reset)%s"</span>
    <span class="org-variable-name">find</span> = <span class="org-string">"[%C(yellow)%&lt;|(20)%h%C(reset)] [%C(bold blue)%&lt;(10)%cn%C(reset)]  %C(auto)%d %C(reset)  %s"</span>
    <span class="org-variable-name">graph</span>=<span class="org-string">"%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset) %C(bold yellow)%d%C(reset)%n %C(white)%s%C(reset)%n %C(dim white)- %an &lt;%ae&gt; %C(reset) %C(dim white)(committer: %cn &lt;%ce&gt;)%C(reset)"</span>

</pre>
</div>

<p>
See
</p>
<ul class="org-ul">
<li><a href="https://devhints.io/git-log-format">https://devhints.io/git-log-format</a> and</li>
<li><a href="https://git-scm.com/docs/pretty-formats">https://git-scm.com/docs/pretty-formats</a> (XXX)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org3475316" class="outline-2">
<h2 id="org3475316">Aliases</h2>
<div class="outline-text-2" id="text-org3475316">
<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">alias</span>]
</pre>
</div>

<p>
If you forget your aliases and don&rsquo;t want to open <code>.gitconfig</code> just to check, type
<code>git alias</code> to <b>print the current list of Git aliases</b>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">alias</span> = <span class="org-string">"!git config -l | grep alias | cut -c 7- | sort"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Useful for exploring Git.</span>
    <span class="org-variable-name">type</span> = cat-file -t
    <span class="org-variable-name">dump</span> = cat-file -p
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">     <span class="org-variable-name">catchup</span> = !git fetch; git rebase origin/master
<span class="org-comment-delimiter"># </span><span class="org-comment">For catching up those random feature branches you haven't had to touch in months.</span>
</pre>
</div>

<p>
(see <a href="http://gitimmersion.com/lab_11.html">http://gitimmersion.com/lab_11.html</a>)
</p>

<p>
Define:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">exec</span> = <span class="org-string">'!exec '</span>
</pre>
</div>

<p>
so that you can do things like <code>git exec make</code>.  This works because Shell aliases
are always executed in the top-level directory.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Show the diff between the latest commit and the current state</span>
    <span class="org-variable-name">d</span> = !<span class="org-string">"git diff-index --quiet HEAD -- || clear; git --no-pager diff --patch-with-stat"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">`git di $number' shows the diff between the state `$number' revisions ago and the current state</span>
    <span class="org-variable-name">di</span> = !<span class="org-string">"d() { git diff --patch-with-stat HEAD~$1; }; git diff-index --quiet HEAD -- || clear; d"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Pull in remote changes for the current repository and all its submodules</span>
    <span class="org-variable-name">p</span> = !<span class="org-string">"git pull; git submodule foreach git pull origin master"</span>
</pre>
</div>

<p>
Clean up your commits before publishing.  Before you push your commits to the
repository, it&rsquo;s good to revise them.  You can run the git interactive rebase to
squash your commits or modify commit messages.  The goal is to publish only
clean and relevant commits, no experiments or fixing typos.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Interactive rebase with the given number of latest commits</span>
    <span class="org-variable-name">ireb</span> = <span class="org-string">"!r() { git rebase -i HEAD~$1; }; r"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Starts an interactive rebase of all the commits you haven't pushed</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">yet. Handy for collapsing a bunch of work-in-progress snapshots into</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">logical commits before pushing, without having to worry about accidentally</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">squashing a commit someone else has already referred to.</span>
    <span class="org-variable-name">work-in-progress</span> = rebase -i @{u}
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter">#</span><span class="org-comment">BASIC HISTORY VIEWING</span>

    <span class="org-variable-name">hist</span> = log --pretty=format:<span class="org-string">'%Cred%h%Creset %C(bold blue)&lt;%an&gt;%Creset%C(yellow)%d%Creset %Cgreen(%cr)%Creset%n%w(80,8,8)%s'</span> --graph
    <span class="org-variable-name">histfull</span> = log --pretty=format:<span class="org-string">'%Cred%h%Creset %C(bold blue)&lt;%an&gt;%Creset%C(yellow)%d%Creset %Cgreen(%cr)%Creset%n%w(80,8,8)%s%n'</span> --graph --name-status
    <span class="org-variable-name">llog</span> = log --pretty=format:<span class="org-string">'%C(yellow)%h %Cred%ad %Cblue%an%Cgreen%d %Creset%s'</span> --date=iso
    <span class="org-variable-name">changelog</span> = log --pretty=format:<span class="org-string">'%Cgreen%d %Creset%s'</span> --date=iso
    <span class="org-variable-name">ls</span> = log --pretty=format:<span class="org-string">'%C(yellow)%p..%h %C(white dim)%cd %&lt;|(49,trunc)%an %C(reset)%s'</span> --date=short --abbrev=8 --no-merges

<span class="org-comment-delimiter">#</span><span class="org-comment">BASIC REPO INFORMATION</span>

    <span class="org-variable-name">whois</span> = <span class="org-string">"!sh -c 'git log -i -1 --pretty=\"format::%an &lt;%ae&gt;\n\" --author=\"$1\"' -"</span>
    <span class="org-variable-name">whatis</span> = show -s --pretty=<span class="org-string">'tformat::%h (%s, %ad)'</span> --date=short

<span class="org-comment-delimiter">#</span><span class="org-comment">WHAT WAS GOING ON, WHILE YOU WERE AWAY</span>

    <span class="org-variable-name">anychanges</span> = !sh -c <span class="org-string">'git fetch'</span> &amp;&amp; git log --oneline HEAD..origin/$1
    <span class="org-variable-name">anychangesonmaster</span> = !sh -c <span class="org-string">'git fetch'</span> &amp;&amp; git log --oneline HEAD..origin/master
    <span class="org-variable-name">whoischanging</span> = !sh -c <span class="org-string">'git shortlog HEAD..origin/$0'</span>
    <span class="org-variable-name">whoischangingmaster</span> = !sh -c <span class="org-string">'git shortlog HEAD..origin/master'</span>

    <span class="org-comment-delimiter">#</span><span class="org-comment">what branches you have on origin, with info on who is guilty and how long ago. Useful for gitflow and feature branches in general. Requires fetch up-front.</span>
    <span class="org-variable-name">showorigin</span> = <span class="org-string">"!sh -c 'for branch in `git branch -r | grep -v HEAD`;do echo `git show -s --format=\"%Cred%ci %C(green)%h %C(yellow)%cr %C(magenta)%an %C(blue)\" $branch | head -n 1` \\\t$branch; done | sort -r'"</span>

    <span class="org-comment-delimiter">#</span><span class="org-comment">get remote branches</span>
    <span class="org-variable-name">trackallbranches</span> = !sh -c <span class="org-string">"for branchname in `git branch -r `; do git branch --track $branchname; done"</span>
    <span class="org-variable-name">updateallbranches</span> = !sh -c <span class="org-string">"for branchname in `git branch -r `; do git checkout $branchname ; git pull; done"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">TAGS</span>

    <span class="org-variable-name">showtags</span> = show-ref --tags
    <span class="org-variable-name">pushtags</span> = push --tags
    <span class="org-variable-name">tagwithdate</span> = !sh -c <span class="org-string">'git tag "$0"_$(date "+%y-%m-%d_%H-%M-%S")'</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Pushes given tag to remote 'origin' repo (or the remote passed as the second parameter)</span>
    <span class="org-variable-name">publishtag</span> = <span class="org-string">"!sh -c 'git push ${2:-origin} $1' -"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Removes given tag from remote 'origin' repo (or the remote passed as the second parameter)</span>
    <span class="org-variable-name">unpublishtag</span> = <span class="org-string">"!sh -c 'git push ${2:-origin} :refs/tags/$1' -"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">IGNORING</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">fix .gitignore</span>
    <span class="org-variable-name">fixgitignore</span> = !git rm -r --cached . &amp;&amp; git add . &amp;&amp; git commit -m \"Just a .gitignore fix \"

    <span class="org-comment-delimiter"># </span><span class="org-comment">Ignore files only locally</span>
    <span class="org-variable-name">hide</span> = update-index --assume-unchanged
    <span class="org-variable-name">unhide</span> = update-index --no-assume-unchanged

<span class="org-comment-delimiter">#</span><span class="org-comment">OTHER</span>

    <span class="org-comment-delimiter">#</span><span class="org-comment">Deletes all branches that were safely merged into the master. All other are skipped (no worries).</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">on osx xargs does not have -r argument, so it fail. If you remove -r, it will run at least once, making this not safe operation</span>
    <span class="org-variable-name">cleanup</span> = !git branch --merged=master | grep -Ev <span class="org-string">'^\\* | master$'</span> | xargs -r git branch -d

    <span class="org-comment-delimiter">#</span><span class="org-comment">Deletes orphaned remote branches (.git/refs/remotes/origin), clean up reflog and remove all untracked files</span>
    <span class="org-variable-name">cleanuplocal</span> = !git remote prune origin &amp;&amp; git gc &amp;&amp; git clean -df

    <span class="org-comment-delimiter"># </span><span class="org-comment">Check if any file in repo has whitespace errors</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">As described in http://peter.eisentraut.org/blog/2014/11/04/checking-whitespace-with-git/</span>
    <span class="org-variable-name">check-whitespace</span> = diff-tree --check $(git hash-object -t tree /dev/null) HEAD

    <span class="org-comment-delimiter"># </span><span class="org-comment">Check if any file in repo has windows line endings</span>
    <span class="org-comment-delimiter">#</span><span class="org-comment">Currently do not work as alias, works from comand line directly. There is a problem with \r</span>
    <span class="org-variable-name">check-eol</span> = grep --files-with-matches $<span class="org-string">'\\r'</span> HEAD

    <span class="org-comment-delimiter">#</span><span class="org-comment">Jira tickets (from: http://blogs.atlassian.com/2014/08/whats-new-git-2-1/)</span>
    <span class="org-variable-name">issues</span> = <span class="org-string">"!f() { : git log ; echo 'Printing issue keys'; git log --oneline $@ | egrep -o [A-Z]+-[0-9]+ | sort -u; }; f"</span>
</pre>
</div>
</div>

<div id="outline-container-orgc10d827" class="outline-3">
<h3 id="orgc10d827">SHOW - Check the status of your files</h3>
<div class="outline-text-3" id="text-orgc10d827">
<p>
Give the status in the <b>short-format</b> (preceded by a line showing the <i>branch name</i>
and <i>tracking info</i>).
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">st</span> = status -s -b
</pre>
</div>

<p>
In the following example:
</p>

<pre class="example">
M  README
 M lisp/mail/rmail.el
MM ChangeLog
</pre>

<ul class="org-ul">
<li><code>README</code> is changed and <b>staged for commit</b> (it&rsquo;s <b>in the index</b>),</li>
<li><code>lisp/mail/rmail.el</code> is changed but <b>not staged for commit</b>, and</li>
<li><code>Changelog</code> is changed and staged for commit, then <b>changed again</b> and the new
change is <b>not staged for commit</b>.</li>
</ul>

<div class="note">
<p>
Staging for commit is typically done by <code>git add</code>.
</p>

</div>
</div>
</div>

<div id="outline-container-org6fc26e1" class="outline-3">
<h3 id="org6fc26e1">SHOW - View your changes</h3>
<div class="outline-text-3" id="text-org6fc26e1">
</div>
<div id="outline-container-orgc8abc24" class="outline-4">
<h4 id="orgc8abc24">Changes between the working tree and the index (staged for the next commit)</h4>
<div class="outline-text-4" id="text-orgc8abc24">
<p>
See also <code>-b</code> (<code>--ignore-space-change</code>): Ignore changes in amount of
whitespace. This ignores whitespace at line end, and considers all other
sequences of one or more whitespace characters to be equivalent.
</p>

<p>
git diff -b
</p>

<p>
git diff -w
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">df</span> = diff
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Ignore whitespace changes.</span>
    <span class="org-variable-name">wdiff</span> = diff -b
    <span class="org-variable-name">wdiff</span> = diff --word-diff

    <span class="org-variable-name">dw</span> = diff --word-diff
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Configure git-diff to produce the absolutely most minimal diff possible.</span>
    <span class="org-variable-name">wdiff</span> = diff -w --word-diff-regex=. --color-words -U0
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Diff line-wise</span>
    <span class="org-variable-name">d</span> = diff

    <span class="org-comment-delimiter"># </span><span class="org-comment">Diff word-wise</span>
    <span class="org-variable-name">dw</span> = diff --color-words

    <span class="org-comment-delimiter"># </span><span class="org-comment">Diff character-wise</span>
    <span class="org-variable-name">dt</span> = diff --word-diff-regex=.
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd40aa37" class="outline-4">
<h4 id="orgd40aa37">Changes between the working tree and the latest commit (HEAD)</h4>
<div class="outline-text-4" id="text-orgd40aa37">
<div class="org-src-container">
<pre class="src src-shell">    diff-all = diff HEAD
</pre>
</div>
</div>
</div>

<div id="outline-container-org3bf386a" class="outline-4">
<h4 id="org3bf386a">Changes between the index (staged for the next commit) and the latest commit (HEAD)</h4>
<div class="outline-text-4" id="text-org3bf386a">
<p>
Just before committing the <b>staged</b> changes, check what your commit changes:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Review staged changes (about to be committed).</span>
    <span class="org-variable-name">dc</span> = diff --cached
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Diff staged line-wise</span>
    <span class="org-variable-name">ds</span> = diff --cached

    <span class="org-comment-delimiter"># </span><span class="org-comment">Diff staged word-wise</span>
    <span class="org-variable-name">dws</span> = diff --color-words --cached

    <span class="org-comment-delimiter"># </span><span class="org-comment">Diff staged character-wise</span>
    <span class="org-variable-name">dts</span> = diff --word-diff-regex=. --cached
</pre>
</div>
</div>
</div>

<div id="outline-container-org283f85b" class="outline-4">
<h4 id="org283f85b">Precommit</h4>
<div class="outline-text-4" id="text-org283f85b">
<p>
This is a key part of my workflow. I run this before every commit to make sure
I don&rsquo;t need to use the undo commands.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">precommit</span> = diff --cached --diff-algorithm=minimal -w
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e5145f" class="outline-4">
<h4 id="org2e5145f">Today</h4>
<div class="outline-text-4" id="text-org2e5145f">
<p>
Quickly see what you&rsquo;ve done today (list commits that aren&rsquo;t merges, on <b>all
branches</b>):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">today</span> = log --since=midnight --author=\"$(git config user.name)\" --no-merges --all --pretty=<span class="org-string">'%C(green)%ad%C(auto) - %s'</span> --date=format:<span class="org-string">'%Y-%m-%d %a %H:%M'</span>
    <span class="org-variable-name">yesterday</span> = log --since=<span class="org-string">'1 day ago midnight'</span> --until=midnight --author=\"$(git config user.name)\" --no-merges --all --pretty=<span class="org-string">'%C(green)%ad%C(auto) - %s'</span> --date=format:<span class="org-string">'%Y-%m-%d %a %H:%M'</span>
    <span class="org-variable-name">this-week</span> = log --since=1.weeks --author=\"$(git config user.name)\" --no-merges --all --pretty=<span class="org-string">'%C(green)%ad%C(auto) - %s'</span> --date=format:<span class="org-string">'%Y-%m-%d %a %H:%M'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">today-all</span> = log --since=midnight --no-merges --all
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">today2</span> = !git log --all --since=00:00:00 --oneline --no-merges --author=${1-$(git config user.email)}
    <span class="org-variable-name">changelog2</span> = !git log --oneline --no-merges ${1-$(git describe --abbrev=0)}..HEAD
    <span class="org-variable-name">upstream</span> = !git log --oneline --no-merges HEAD..${1-$(git branch -lvv | perl -ne <span class="org-string">'/^\\*.*\\[(.*?)\\]/ and print "$1\n"'</span>)}
    <span class="org-variable-name">local</span> = !git log --oneline --no-merges ${1-$(git branch -lvv | perl -ne <span class="org-string">'/^\\*.*\\[(.*?)\\]/ and print "$1\n"'</span>)}..HEAD
</pre>
</div>

<p>
Show changes for a daily standup meeting:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Summarize your own changes since 24h, suitable for a daily standup meeting.</span>
    <span class="org-variable-name">log-standup</span> = log --since=yesterday --author=\"$(git config user.email)\" --pretty=short

    <span class="org-variable-name">standup</span> = <span class="org-string">"!git log --branches \</span>
<span class="org-string">                        --since=$(if [[ "</span>$(date +%a)<span class="org-string">" == "</span>Mon<span class="org-string">" ]]; then \</span>
<span class="org-string">                                      echo "</span>friday<span class="org-string">"; \</span>
<span class="org-string">                                  else \</span>
<span class="org-string">                                      echo "</span>yesterday<span class="org-string">"; \</span>
<span class="org-string">                                  fi) \</span>
<span class="org-string">                        --author=$(git config --get user.email) \</span>
<span class="org-string">                        --format=format:'%C(green) %ad %C(yellow)%h %Creset %s %C(green bold)%d' \</span>
<span class="org-string">                        --date=local"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">XXX git standup W donne un décompte avec une ligne trop peu !</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">  <span class="org-comment-delimiter"># </span><span class="org-comment">Show log of new commits after you fetched, with stats, excluding merges</span>
  <span class="org-variable-name">log-fresh</span> = log ORIG_HEAD.. --stat --no-merges

  <span class="org-comment-delimiter"># </span><span class="org-comment">Show the log for my own user email</span>
  <span class="org-variable-name">log-me</span> = !git log --author=$(git config user.email)
</pre>
</div>
</div>
</div>

<div id="outline-container-org27dcbcb" class="outline-4">
<h4 id="org27dcbcb">When was this file last updated</h4>
<div class="outline-text-4" id="text-org27dcbcb">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">When was this file last updated, on each local branch.</span>
    <span class="org-variable-name">wwflu</span> = <span class="org-string">"!f() { for b in $(git rev-parse --symbolic --branches); do \</span>
<span class="org-string">                        echo -e $(git log --format=%at:%ar -1 $b -- \"$1\")\\\\t$b; \</span>
<span class="org-string">                    done | sort -r | cut -f2 -d:; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgefd5b15" class="outline-4">
<h4 id="orgefd5b15">Add only modified changes (and ignore untracked files)</h4>
<div class="outline-text-4" id="text-orgefd5b15">
<p>
Ideally your <code>.gitignore</code> should prevent the untracked (and ignored) files from
being shown in status, added using <code>git add</code> etc.  So correct your <code>.gitignore</code>.
</p>

<p>
You can do <code>git add -u</code> so that it will <b>stage</b> the modified and deleted files.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">stage-modified-removed-files</span> = add -u
</pre>
</div>

<p>
You can also do <code>git commit -a</code> to <b>commit</b> only the modified and deleted files.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">wip</span> = commit -am <span class="org-string">"WIP"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf6bdc50" class="outline-3">
<h3 id="orgf6bdc50">SHOW - View the commit history</h3>
<div class="outline-text-3" id="text-orgf6bdc50">
<div class="note">
<p>
The <code>git log</code> command shows, by default, the &ldquo;author date&rdquo; &#x2013; not the &ldquo;committer
date&rdquo;.
</p>

</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">ls</span> = log --decorate --date=short
    <span class="org-variable-name">ld</span> = log --decorate --date=relative

    <span class="org-variable-name">log</span> = log --decorate --date=short
</pre>
</div>

<p>
XXX Check out <a href="http://marcgg.com/blog/2015/08/04/git-first-parent-log/">http://marcgg.com/blog/2015/08/04/git-first-parent-log/</a>
</p>

<p>
List commits <b>showing changed files</b> (prettier and more concise version of
<code>whatchanged</code>):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">ll</span> = log --decorate --date=short --stat
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">ls-modified</span>  = <span class="org-string">"!git status --porcelain -uno | awk 'match($1, /M/) {print $2}'"</span>
    <span class="org-variable-name">ls-added</span>     = <span class="org-string">"!git status --porcelain -uno | awk 'match($1, /A/) {print $2}'"</span>
    <span class="org-variable-name">ls-deleted</span>   = <span class="org-string">"!git status --porcelain -uno | awk 'match($1, /D/) {print $2}'"</span>
    <span class="org-variable-name">ls-renamed</span>   = <span class="org-string">"!git status --porcelain -uno | awk 'match($1, /R/) {print $2}'"</span>
    <span class="org-variable-name">ls-copied</span>    = <span class="org-string">"!git status --porcelain -uno | awk 'match($1, /C/) {print $2}'"</span>
    <span class="org-variable-name">ls-updated</span>   = <span class="org-string">"!git status --porcelain -uno | awk 'match($1, /U/) {print $2}'"</span>
    <span class="org-variable-name">ls-staged</span>    = <span class="org-string">"!git status --porcelain -uno | grep -P '^[MA]' | awk '{ print $2 }'"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">ls-del</span>  = ls-files -d
    <span class="org-variable-name">ls-mod</span>  = ls-files -m   <span class="org-comment-delimiter"># </span><span class="org-comment">This will include deleted files also.</span>
    <span class="org-variable-name">ls-new</span>  = ls-files --exclude-standard -o
    <span class="org-variable-name">lsfiles</span> = ls-files --exclude-per-directory=.gitignore \
                     <span class="org-variable-name">--exclude-from</span>=.git/info/exclude \
                     -v -d -o -m -s -u
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">last</span> = log --decorate -1 --date=short --stat

    <span class="org-comment-delimiter"># </span><span class="org-comment"># Show the last N commits on the current branch.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">last = !git log --name-status -${1:-1}</span>
</pre>
</div>
</div>

<div id="outline-container-org3b7b731" class="outline-4">
<h4 id="org3b7b731">Show the history of a file</h4>
<div class="outline-text-4" id="text-org3b7b731">
<p>
<b>List of commits</b> that modified the <b>specified file</b> (will follow renames and
copies!):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">file-history</span> = log --follow --date-order --date=short -C --
</pre>
</div>

<div class="warning">
<p>
Put a <i>end of options</i> character (<code>--</code>) after <code>file-history</code> and before the path!!
</p>

</div>

<div class="org-src-container">
<pre class="src src-conf">curl <span class="org-string">'https://api.bitbucket.org/2.0/repositories/mcpflow/pflow/filehistory/master/CHANGELOG.org'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">related</span> = !sh -c <span class="org-string">'git log --follow --format=format:%H $1 | xargs -L1 git diff-tree --no-commit-id --name-only -r | sort | uniq -c | sort -b -n -r'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org42aa33b" class="outline-4">
<h4 id="org42aa33b">Inspect the commits for each edit</h4>
<div class="outline-text-4" id="text-org42aa33b">
<pre class="example">
git log ... | xargs -n 1 git show
</pre>
</div>
</div>
</div>

<div id="outline-container-org918b2eb" class="outline-3">
<h3 id="org918b2eb">SHOW - Show blame information about original authors of lines changed or removed</h3>
<div class="outline-text-3" id="text-org918b2eb">
<p>
$ git blame -w  # ignores white space
$ git blame -M  # ignores moving text
$ git blame -C  # ignores moving text into other files
</p>

<p>
git blame -w README.md
The -w option ignores whitespace changes. If a previous author has modified the
spacing of a file by switching from tabs to spaces or adding new lines this,
unfortunately, obscures the output of git blame by showing these changes.
</p>

<p>
git blame -M README.md
The -M option detects moved or copied lines within in the same file. This will
report the original author of the lines instead of the last author that moved or
copied the lines.
</p>

<p>
git blame -C README.md
The -C option detects lines that were moved or copied from other files. This
will report the original author of the lines instead of the last author that
moved or copied the lines.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">praise</span> = blame -w
    <span class="org-variable-name">archeology</span> = blame -w -C -n
    <span class="org-variable-name">whodoikill</span> = blame -w -C -n
</pre>
</div>
</div>
</div>

<div id="outline-container-org596c15e" class="outline-3">
<h3 id="org596c15e">SHOW - find all &ldquo;unpushed&rdquo; commits for all projects in a directory</h3>
<div class="outline-text-3" id="text-org596c15e">
<p>
See <a href="https://stackoverflow.com/questions/12499195/git-how-to-find-all-unpushed-commits-for-all-projects-in-a-directory">https://stackoverflow.com/questions/12499195/git-how-to-find-all-unpushed-commits-for-all-projects-in-a-directory</a>
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">status-all</span> = <span class="org-string">"!for d in $(find . -name \".git\"); do \</span>
<span class="org-string">                     echo \"\n*** Repository: $d ***\" \</span>
<span class="org-string">                     &amp;&amp; git --git-dir=$d --work-tree=$d/.. status | grep -q \"is ahead of\"; \</span>
<span class="org-string">                   done"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9026c2" class="outline-3">
<h3 id="orga9026c2">Ignoring files</h3>
<div class="outline-text-3" id="text-orga9026c2">
</div>
<div id="outline-container-orgcd4db1b" class="outline-4">
<h4 id="orgcd4db1b">List untracked files</h4>
<div class="outline-text-4" id="text-orgcd4db1b">
<p>
Tell if a file is being tracked:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">List all tracked files.</span>
    <span class="org-variable-name">ls-tracked</span> = ls-files -t

    <span class="org-variable-name">tracked1</span> = <span class="org-string">"!f() { tracked=$(git ls-files ${1}); if [[ -z ${tracked} ]]; then echo 'File NOT tracked (or No such file)'; else echo 'File tracked'; fi; }; f"</span>

    <span class="org-variable-name">tracked2</span> = <span class="org-string">"!f() { echo -n ${1}': '; if [[ -f ${1} ]]; then tracked=$(git ls-files ${1}); if [[ -z ${tracked} ]]; then echo 'File NOT tracked'; else echo 'File tracked'; fi; else echo 'No such file!'; fi; }; f"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">does not work!?</span>
</pre>
</div>

<div class="note">
<p>
<code>[[</code> has fewer surprises and is generally safer to use. But it is not portable &#x2013;
POSIX doesn&rsquo;t specify what it does and only some shells support it (beside bash,
I heard ksh supports it too). For example, you can do
</p>

<pre class="example">
[[ -e $b ]]
</pre>


<p>
to test whether a file exists. But with <code>[</code>, you have to quote <code>$b</code>, because it
splits the argument and expands things like <code>"a*"</code> (where <code>[[</code> takes it
literally). That has also to do with how <code>[</code> can be an external program and
receives its argument just normally like every other program (although it can
also be a builtin, but then it still has not this special handling).
</p>

</div>

<p>
List untracked <b>files ignored</b> by a <code>.gitignore</code> statement somewhere.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">List all untracked files.</span>
    <span class="org-variable-name">ls-untracked</span> = ls-files --others
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">this one is a MUST have</span>
    <span class="org-variable-name">ls-ign</span>  = ls-files --exclude-standard -o -i
    <span class="org-variable-name">ls-ignored</span> = ls-files --others --ignored --exclude-standard
</pre>
</div>

<p>
Remove ignored files that are still on the repository:
</p>

<div class="org-src-container">
<pre class="src src-shell">git ls-ignored | xargs rm
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb6c2b3c" class="outline-4">
<h4 id="orgb6c2b3c">Add ignore entry to the repository</h4>
<div class="outline-text-4" id="text-orgb6c2b3c">
<ul class="org-ul">
<li>Ignore exact filename: filename</li>
<li>Ignore everything beneath: folder</li>
<li>Ignore all files with this extension: pattern</li>
<li>Ignore custom pattern: pattern</li>
</ul>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">Add any directories, files, or patterns you don't want to be tracked by version control</span>
</pre>
</div>

<p>
Quickly add a file or directory to <code>.gitignore</code>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">ignore</span> = <span class="org-string">"!f() { echo \"$1\" &gt;&gt; \"${GIT_PREFIX}.gitignore\"; }; f"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">ignore=!([ ! -e .gitignore ] &amp;&amp; touch .gitignore) | echo $1 &gt;&gt;.gitignore</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">XXX What is GIT_PREFIX?</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Ignore all untracked files by appending them to .gitignore:</span>
    <span class="org-variable-name">ignore-untracked</span> = <span class="org-string">"!git status | grep -P \"^\\t\" | grep -vF .gitignore | sed \"s/^\\t//\" &gt;&gt; .gitignore"</span>
</pre>
</div>

<p>
<b>Note that adding the .gitignore and the file specification will have no effect
on files that are already being tracked.</b> If you&rsquo;re already tracking these,
you&rsquo;ll have to stop tracking them. (Right-click on the folder or file and select
Stop Tracking.) You&rsquo;ll then see them change from having a green/clean or
amber/changed icon to a red/removed icon. On your next commit the files will be
removed from the repository and thereafter appear with a blue/ignored
icon. Another contributor asked why Ignore was disabled for particular files and
I believe it was because he was trying to ignore a file that was already being
tracked. You can only ignore a file that has a blue question mark icon.
</p>
</div>
</div>

<div id="outline-container-org1d7c836" class="outline-4">
<h4 id="org1d7c836"><code>assume-unchanged</code> command</h4>
<div class="outline-text-4" id="text-org1d7c836">
<p>
Ignore/unignore changes to <b>tracked file(s)</b> without <code>.gitignore</code>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">skip</span> = update-index --assume-unchanged
    <span class="org-variable-name">unskip</span> = update-index --no-assume-unchanged
</pre>
</div>

<p>
XXX Have a look at Git lock = skip-worktree
</p>

<p>
It has to be configured for each project member individually.
</p>

<div class="warning">
<p>
As stated in <a href="http://stackoverflow.com/questions/23097368/git-ignore-vs-exclude-vs-assume-unchanged">git ignore vs. exclude vs. assume-unchanged</a>,
<code>git-update-index --assume-unchanged</code> was never meant to ignore changes to tracked
files (<b>only to spare some stats</b>).  So do not suggest it as a means to achieve
that.
</p>

</div>

<p>
Skip all:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">skip-all</span> = <span class="org-string">"!git status -s | awk {'print $2'} | xargs git skip"</span>
</pre>
</div>

<p>
Unskip all the skipped files:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">unskip-all</span> = <span class="org-string">"!git skipped | xargs git update-index --no-assume-unchanged"</span>
</pre>
</div>

<p>
List ignored files (<b>marked unchanged</b>):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">skipped</span> = <span class="org-string">"!git ls-files -v | grep '^h' | cut -c 3-"</span>
    <span class="org-variable-name">skipped2</span> = !git ls-files -v | grep <span class="org-string">'^[a-z]'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org430b97a" class="outline-3">
<h3 id="org430b97a">REVERT - Undo things</h3>
<div class="outline-text-3" id="text-org430b97a">
<p>
&gt; The reason I don&rsquo;t commit a change immediately after I write it is
&gt; that I want to test it in real (and varied) use.  Sometimes I find
&gt; bugs and have to change it.  After some period in which it works well,
&gt; I decide it is ready to install.
</p>

<p>
That is a good reason. However, for your information there is the variant <code>git
commit --amend</code>, which as the option suggests amends the <b>current</b> commit. Just
<code>git add</code> the files you changed and run <code>git commit --amend</code>. It also lets you edit
the commit message. After discovering this option, I find I am less fearful of
making premature commits, since they are easily fixed. (But not after pushing,
of course. That way lies madness.)
</p>
</div>

<div id="outline-container-orgf2b9fd5" class="outline-4">
<h4 id="orgf2b9fd5">Change your last commit</h4>
<div class="outline-text-4" id="text-orgf2b9fd5">
<p>
This will help when we need to change the most recent commit.
</p>

<div class="warning">
<p>
<code>git commit --amend</code> is a dangerous operation.  Someone might forget that the
current commit has already been pushed, and amend it anyway.  What will they do
then?
</p>

<p>
Try to push the result, see a message about non-fast-forward pushes being not
allowed, then go along the &ldquo;If pushing fails&rdquo; section (pull, resolve, commit,
push), and we&rsquo;ll have two similar commits in the history.
</p>

</div>

<p class="verse">
The key to understanding that is that Git does not rewrite history, it creates<br />
new history and calls that reality.  The commits in this history have different<br />
IDs (because the ID is the content plus the ID of its parent, changing just one<br />
commit means everything after it must change).  If you push this new history<br />
(with &#x2013;force) everyone else will have the old divergent history.  All their<br />
work will be on top of this divergent history.  They have to do the surgery to<br />
put their work on your new history.<br />
<br />
When users do a &ldquo;git pull&rdquo;, git doesn&rsquo;t store that you did a rebase (it would be<br />
nice if it did) so it assumes something has gone wrong and refuses to pull.  Git<br />
gets a human to look at the divergence and decide what to do with it.<br />
Unfortunately, most people don&rsquo;t know what to do with a divergent repository.<br />
<br />
And yes, this applies to amended commits.<br />
<br />
This is a common question answered on Stack Overflow.<br />
<a href="https://stackoverflow.com/questions/8939977/git-push-rejected-after-feature-branch-rebase">https://stackoverflow.com/questions/8939977/git-push-rejected-after-feature-branch-rebase</a><br />
<br />
This answer isn&rsquo;t specifically about rebase, but it illustrates how Git creates<br />
new history.<br />
<a href="https://stackoverflow.com/questions/27692954/change-mail-address-in-each-commit/27709938#27709938">https://stackoverflow.com/questions/27692954/change-mail-address-in-each-commit/27709938#27709938</a><br />
</p>

<p>
Modify the <b>last</b> commit, amending with the same message &#x2013; without your editor
prompting you for the message you&rsquo;ve already entered!
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Append your staged changes to the LATEST commit (keeping the pre-existing</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">commit message).</span>
    <span class="org-variable-name">fixup</span> = commit -v --amend --reuse-message HEAD

    <span class="org-comment-delimiter"># </span><span class="org-comment">Change LATEST commit message to what you type in.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Usage: git medit &lt;msg&gt;</span>
    <span class="org-variable-name">reword</span> = commit --amend -m

    <span class="org-comment-delimiter"># </span><span class="org-comment">Credit an author on the LATEST commit.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Usage: git credit &lt;author-name&gt; &lt;author-email&gt;</span>
    <span class="org-variable-name">credit</span> = <span class="org-string">"!f() { git commit --amend --author=\"$1 &lt;$2&gt;\" --reuse-message HEAD; }; f"</span>
</pre>
</div>

<div class="warning">
<p>
<b>NEVER AMEND a commit</b> that you&rsquo;ve <b>ALREADY PUSHED</b> to a remote repository.
<a href="https://stackoverflow.com/questions/17176859/amending-a-pushed-commit-message">https://stackoverflow.com/questions/17176859/amending-a-pushed-commit-message</a>
</p>

</div>

<p>
Solution for <b>amending older commits</b>:
<a href="https://stackoverflow.com/questions/3042437/change-commit-author-at-one-specific-commit">https://stackoverflow.com/questions/3042437/change-commit-author-at-one-specific-commit</a>
(see 1st and 2nd answers!)
</p>

<p>
My new favorite alias lets you amend to a specific commit, <b>not</b> need to be the
<b>latest</b> one.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">fixup2</span> = <span class="org-string">"!f() { TARGET=$(git rev-parse \"$1\"); \</span>
<span class="org-string">                     git commit --fixup=$TARGET ${@:2} \</span>
<span class="org-string">                         &amp;&amp; GIT_EDITOR=true git rebase --interactive --autostash --autosquash $TARGET~; }; f"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">See https://blog.filippo.io/git-fixup-amending-an-older-commit/</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Checkout the commit in question, and amend its message.</span>
    <span class="org-variable-name">reword2</span> = <span class="org-string">"!f() { branch=$(git current-branch); \</span>
<span class="org-string">                      git checkout $1; \</span>
<span class="org-string">                      git commit --amend; \</span>
<span class="org-string">                      git checkout $branch; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff73e58" class="outline-4">
<h4 id="orgff73e58">Undo changes to one (or more) file(s) in a commit &#x2013; instead of reverting the entire commit</h4>
<div class="outline-text-4" id="text-orgff73e58">
<pre class="example">
git show commit-hash -- path/to/file.html | git apply --reverse
</pre>
</div>
</div>

<div id="outline-container-org402eead" class="outline-4">
<h4 id="org402eead">Throw away a commit</h4>
<div class="outline-text-4" id="text-org402eead">
<p>
<a href="http://www.vogella.com/tutorials/Git/article.html#resetcommits">http://www.vogella.com/tutorials/Git/article.html#resetcommits</a>
<a href="http://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified">http://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified</a>
<a href="http://git-scm.com/2011/07/11/reset.html">http://git-scm.com/2011/07/11/reset.html</a>
</p>

<p>
<code>git reset</code> is a simple way to undo changes that haven&rsquo;t been shared with anyone
else.
</p>

<p>
See « Undo &rsquo;git add&rsquo; before commit ».
</p>
</div>

<div id="outline-container-org26adefe" class="outline-5">
<h5 id="org26adefe">Soft option &#x2013; Do not touch the index file or the working tree at all</h5>
<div class="outline-text-5" id="text-org26adefe">
<p>
Go back before last commit, with files in uncommitted state:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Keep the changes from the commit you want to undo.</span>
    <span class="org-variable-name">undo-soft</span> = reset --soft HEAD~1
    <span class="org-variable-name">uncommit</span> = reset --soft HEAD~1
</pre>
</div>

<p>
<code>uncommit</code> <b>undoes the last commit</b>, and <b>puts the changes</b> in the commit <b>into your
index</b> &#x2013; keeping changes in the working directory (it doesn&rsquo;t touch it).  It&rsquo;s
like going back in time to the moment right before you committed.
</p>

<div class="note">
<p>
<code>uncommit</code> here means to do just the reverse of commit, i.e. just like commit it
shouldn&rsquo;t touch the files&rsquo;s contents, only the metadata.
</p>

</div>

<p>
This is a useful technique in resuming work on an unfinished changeset.
</p>

<p>
Other scenario: squash change in several commits into one commit so that people
think you are smart.
</p>
</div>
</div>

<div id="outline-container-org7989822" class="outline-5">
<h5 id="org7989822">Mixed option &#x2013; Do not touch the working tree (but regenerate the index)</h5>
<div class="outline-text-5" id="text-org7989822">
<p>
Reset the previous commit, but <b>puts</b> all <b>the changes</b> from that commit <b>in the
working directory</b>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">undo-mixed</span> = reset --mixed HEAD~1
    <span class="org-variable-name">uncommit-unstage</span> = reset --mixed HEAD~1
</pre>
</div>

<div class="note">
<p>
<code>--mixed</code> with paths is deprecated; use <code>git reset -- &lt;paths&gt;</code> instead.
</p>

</div>

<p>
This is a useful technique if your pull fails to merge the new stuff from
upstream: <code>git reset HEAD~1</code>, pull again, fix the conflicts, then commit your
changes again.
</p>

<p>
Other scenario: slice a single big commit to different small commits to haste
review process.
</p>
</div>
</div>

<div id="outline-container-orgccee99e" class="outline-5">
<h5 id="orgccee99e">Hard option &#x2013; Regenerate both the index and working tree</h5>
<div class="outline-text-5" id="text-orgccee99e">
<p>
Remove the last commit, <b>delete changes in your staging area and in your working
directory</b>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Erase any changes since your last commit (reset every file in your working</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">directory to its committed state).</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Destroy the changes from the commit you want to undo.</span>
    <span class="org-variable-name">undo</span> = reset --hard HEAD~1
    <span class="org-comment-delimiter"># </span><span class="org-comment">Delete last commit.</span>
</pre>
</div>

<p>
If you reset work that you <i>never committed</i>, it is gone for good.  Too bad!  This
is quite a dangerous command (<code>git reset --hard</code> is one of the few Git commands
which deletes information with no backout), and must be used with <b>EXTREME
CAUTION</b>.
</p>

<div class="warning">
<p>
This command will <b>overwrite all CHANGED tracked files</b> in the working tree!
(<i>Untracked files</i> are out of scope.)
</p>

</div>

<div class="tip">
<p>
If you have changes in your working directory or staging area, you&rsquo;ll probably
want to stash them before doing the above.
</p>

</div>

<div class="note">
<p>
See the functionality of the partly overlapping <code>git checkout .</code> command (note
that it will only erase all your unstaged changes: the <b>files in your staging
index will be untouched</b>), by comparing <a href="https://wiki.mozilla.org/Cjku/git#git-reset_and_git-checkout">git reset and git checkout</a>.
</p>

</div>

<p>
Use <code>git reset --hard @{u}</code> to make sure the integration branch is up-to-date
before merging.
</p>

<p>
Other scenarios:
</p>
<ul class="org-ul">
<li>Overtime working, did lots of stupid things.  You want to run away from what
had been done&#x2026;</li>
<li>Recover context before a stale merge.</li>
</ul>
</div>
</div>

<div id="outline-container-orgc2c081b" class="outline-5">
<h5 id="orgc2c081b">Delete untracked files</h5>
<div class="outline-text-5" id="text-orgc2c081b">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">nuke-untracked-files</span> = clean -f
</pre>
</div>

<p>
<code>git clean</code> will <b>remove any files</b> from the tracked root directory <b>that are not
under Git tracking</b> (whereas <code>git reset --hard</code> will <i>not remove untracked files</i>).
</p>

<div class="note">
<p>
<b>WARNING &#x2013; BE CAREFUL WITH THIS!</b>  It is helpful to run a dry-run with <code>git clean</code>
first, to see what it will delete.
</p>

</div>

<p>
Usage:
</p>
<ul class="org-ul">
<li><code>git clean -n</code> (dry run) to see what <code>git clean -f</code> will do, so you can be sure
it&rsquo;s what you want.</li>
<li><code>git clean -f</code> (to <b>force removing</b> the <b>untracked files</b>) and</li>
<li><code>git clean -d -f</code> (to also <b>remove untracked directories</b> in addition to untracked
files).</li>
</ul>
</div>
</div>

<div id="outline-container-orgfecf8a8" class="outline-5">
<h5 id="orgfecf8a8">Soft option &#x2013; Clean branch (delete changes + untracked files)</h5>
<div class="outline-text-5" id="text-orgfecf8a8">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">clear-soft-dry-run</span> = clean -d -n

    <span class="org-comment-delimiter"># </span><span class="org-comment">THIS COMMAND MAY DELETE FILES THAT CANNOT BE RECOVERED.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Files and directories in .gitignore will be preserved.</span>
    <span class="org-variable-name">clear-soft</span> = !git clean -d -f \
                      &amp;&amp; git reset --hard
    <span class="org-comment-delimiter"># </span><span class="org-comment">Discard current changes and throw out new files.</span>
</pre>
</div>

<p>
which:
</p>
<ul class="org-ul">
<li>unstages changes in the index,</li>
<li>discards changes in the working directory, and</li>
<li>removes any new files (<b>all untracked changes will be lost</b>).</li>
</ul>

<p>
If you want to save your current branch&rsquo;s state before doing this (just in
case), you can do:
</p>

<div class="org-src-container">
<pre class="src src-shell">git commit -a -m <span class="org-string">"Saving my work, just in case"</span>
git branch my-saved-work
</pre>
</div>
</div>
</div>

<div id="outline-container-org7dfd7e5" class="outline-5">
<h5 id="org7dfd7e5">Hard option &#x2013; Clean branch (delete ignored files in addition to changes + untracked files)</h5>
<div class="outline-text-5" id="text-org7dfd7e5">
<p>
<b>NUCLEAR VERSION</b> which will:
</p>
<ul class="org-ul">
<li>undo all your changes to <b>tracked</b> files,</li>
<li>wipe out all the <b>ignored and untracked</b> files and directories, and</li>
<li>start from the <code>HEAD</code>.</li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">THIS COMMAND MAY DELETE FILES THAT CANNOT BE RECOVERED,</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">including those in .gitignore.</span>
    <span class="org-variable-name">clear-with-fire</span> = !git clean -d -f -x \
                           &amp;&amp; git reset --hard
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5540602" class="outline-4">
<h4 id="org5540602">Revert a commit</h4>
<div class="outline-text-4" id="text-org5540602">
<p>
Once you&rsquo;ve pushed changes to a remote repository, it is considered dangerous to
modify the history because someone else may have already pulled it.
</p>

<p>
However, Git offers you an easy way to undo a patch by committing a change that
effectively reverses the patch in question. The simplest usage is to revert an
entire commit:
</p>

<div class="org-src-container">
<pre class="src src-shell">git revert [hash]
</pre>
</div>

<p>
This creates a patch that is the opposite of commit <code>[hash]</code> and commits it to
your repository.
</p>

<p>
If you want to revert that commit without committing it (putting the reversion
into your index), use:
</p>

<div class="org-src-container">
<pre class="src src-shell">git revert -n [hash]
</pre>
</div>
</div>
</div>

<div id="outline-container-org30a8537" class="outline-4">
<h4 id="org30a8537">Squash</h4>
<div class="outline-text-4" id="text-org30a8537">
<p>
Squash commits:
<a href="https://bitbucket.org/blog/git-squash-commits-merging-bitbucket">https://bitbucket.org/blog/git-squash-commits-merging-bitbucket</a>
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">squash</span> = <span class="org-string">"!f() { git reset --soft HEAD~${1} &amp;&amp; \</span>
<span class="org-string">                     git commit --edit -m\"$(git log --format=%B --reverse HEAD..HEAD@{1})\"; }; f"</span>
</pre>
</div>

<p>
Now it is possible to use this command to <b>combine together the last N commits</b>
into one commit:
</p>

<pre class="example">
git squash N
</pre>
</div>
</div>
</div>

<div id="outline-container-org83a0592" class="outline-3">
<h3 id="org83a0592">Merge</h3>
<div class="outline-text-3" id="text-org83a0592">
<div class="org-src-container">
<pre class="src src-conf">  <span class="org-comment-delimiter"># </span><span class="org-comment">Given a merge commit, find the span of commits that exist(ed).</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">Not so useful in itself, but used by other aliases.</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">Thanks to Rob Miller for the merge-span-* aliaes.</span>
  <span class="org-variable-name">merge-span</span> = !<span class="org-string">"f() { echo $(git log -1 $2 --merges --pretty=format:%P | cut -d' ' -f1)$1$(git log -1 $2 --merges --pretty=format:%P | cut -d' ' -f2); }; f"</span>

  <span class="org-comment-delimiter"># </span><span class="org-comment">Find the commits that were introduced by a merge</span>
  <span class="org-variable-name">merge-span-log</span> = <span class="org-string">"!git log `git merge-span .. $1`"</span>

  <span class="org-comment-delimiter"># </span><span class="org-comment">Show the changes that were introduced by a merge</span>
  <span class="org-variable-name">merge-span-diff</span> = !<span class="org-string">"git diff `git merge-span ... $1`"</span>

  <span class="org-comment-delimiter"># </span><span class="org-comment">Show the changes that were introduced by a merge, in your difftool</span>
  <span class="org-variable-name">merge-span-difftool</span> = !<span class="org-string">"git difftool `git merge-span ... $1`"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1b42413" class="outline-3">
<h3 id="org1b42413">UPDATE - Pull</h3>
<div class="outline-text-3" id="text-org1b42413">
<p>
Starting with Git 1.7.0, <code>@{u}</code> is shorthand for the <b>current</b> branch&rsquo;s <b>upstream</b>
branch; e.g., <code>origin/foo</code> (or <code>github/foo</code>, etc., since the remote doesn&rsquo;t have to
be called <code>origin</code>) if the checked out branch is <code>foo</code>.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">remotes</span> = remote
    <span class="org-variable-name">r</span> = remote -v
</pre>
</div>

<div class="note">
<p>
<code>git pull</code> is simply <code>git fetch &amp;&amp; git merge remote</code>.  Its <code>--rebase</code> option uses
<code>rebase</code> instead of <code>merge</code>.
</p>

<p>
That&rsquo;s exactly why some decide to avoid <code>rebase</code> (but to <code>pull</code> instead), because it
has bad effects if one merges from another branch and then wants to push.
</p>

</div>

<p>
About rebase (with visual aid):
<a href="https://itnext.io/become-a-git-pro-in-just-one-blog-a-thorough-guide-to-git-architecture-and-command-line-interface-93fbe9bdb395">https://itnext.io/become-a-git-pro-in-just-one-blog-a-thorough-guide-to-git-architecture-and-command-line-interface-93fbe9bdb395</a>
</p>
</div>

<div id="outline-container-org3576a90" class="outline-4">
<h4 id="org3576a90">Show incoming changes</h4>
<div class="outline-text-4" id="text-org3576a90">
<p>
The <code>in</code> command returns a list of <b>incoming</b> commits for the <b>current branch</b> &#x2013;
after a <code>git fetch</code>, to fetch down <b>all the data</b> it has for the <b>current remote</b> that
you do not &#x2013;, the next time you do a merge.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">in</span> = !(git remote update -p &amp;&amp; git log --decorate ..@{u})
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">in-stat</span> = log --stat ..@{u}
</pre>
</div>

<p>
Show the changes between the last local commit and the <b>remote</b> branch:
</p>

<p>
Show a <b>single diffstat</b> (number of added and deleted lines for <b>all changed
files</b>):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">in-what</span> = diff --stat ...@{u}

    <span class="org-variable-name">du</span> = diff @{u} HEAD
    <span class="org-comment-delimiter"># </span><span class="org-comment">diff with upstream branch</span>
</pre>
</div>

<div class="warning">
<p>
The upstream diff <code>in-what</code> will show the negative of unpushed (rebased) commits,
if any, with the <code>..</code> notation &#x2014; not with the <code>...</code> notation!
</p>

</div>
</div>
</div>

<div id="outline-container-org1813315" class="outline-4">
<h4 id="org1813315">Update with local modifications</h4>
<div class="outline-text-4" id="text-org1813315">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">pull</span> = pull -v
</pre>
</div>

<div class="note">
<p>
<code>git pull</code> with uncommitted changes can succeed if the newly pulled changes don&rsquo;t
touch the locally changed files, but will fail otherwise.  Which makes a lot of
sense.
</p>

</div>

<p>
Git&rsquo;s fix is to ask you to commit (or stash) before you pull (which is fetch
followed by merge).
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">up = "!git stash &amp;&amp; git pull &amp;&amp; git stash pop"</span>
</pre>
</div>

<div class="warning">
<p>
The above approach is <b>unsafe</b>: if there&rsquo;s nothing to stash, the first command
will do nothing, and then <code>stash pop</code> will unstash some random stuff from before.
</p>

</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">pull-autostash</span> = ![[ -z $(git status --porcelain -uno) ]] &amp;&amp; git pull || git stash push -m <span class="org-string">"autostash"</span> &amp;&amp; git pull &amp;&amp; git stash pop
<span class="org-comment-delimiter"># </span><span class="org-comment">XXX Does not work in WSL (unexpected operator [[)</span>
</pre>
</div>

<p>
XXX What about <code>git stash push --include-untracked</code> and <code>git stash pop</code>?
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">up</span> = pull --rebase --autostash
    <span class="org-variable-name">up</span> = !git fetch &amp;&amp; git rebase --autostash FETCH_HEAD
    <span class="org-variable-name">up</span>= <span class="org-string">"!git fetch origin &amp;&amp; git branch -v -a"</span>

    <span class="org-variable-name">f</span> = !git fetch --all &amp;&amp; git rebase origin/master
</pre>
</div>

<p>
See <a href="https://www.praqma.com/stories/git-autostash/">https://www.praqma.com/stories/git-autostash/</a>.
</p>

<pre class="example">
git rebase -i --autosquash --autostash
</pre>


<p>
Really handy in projects that don&rsquo;t do merge commits.
</p>

<p>
See <a href="http://aanandprasad.com/git-up/">git-up</a> (no longer maintained), which is (roughly) equivalent of executing the following:
</p>

<div class="org-src-container">
<pre class="src src-shell">git stash
git fetch --all
[foreach branch]
    git rebase --rebase-merges &lt;branch&gt; &lt;remote&gt;/&lt;branch&gt;
    git merge --ff-only &lt;branch&gt;
[end foreach]
git checkout &lt;prev_branch&gt;
git stash pop
</pre>
</div>

<div class="warning">
<p>
Use with care: the final stash application after a successful rebase might
result in non-trivial conflicts.
</p>

</div>

<p>
With <b>all versions</b> of Git, I recommend using <code>git up</code> instead of <code>git pull</code>.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">up-tmpname</span> = <span class="org-string">"!f() { git remote update -p; git merge --ff-only @{u}; }; f"</span>
</pre>
</div>

<p>
It is pretty safe: it will abort the merge if it can&rsquo;t be done using
fast-forward.  (In other words, if the local branch has diverged from the
remote.)
</p>

<p>
See <a href="https://stackoverflow.com/questions/15316601/in-what-cases-could-git-pull-be-harmful">https://stackoverflow.com/questions/15316601/in-what-cases-could-git-pull-be-harmful</a>
</p>

<p>
<code>remote update -p</code> <b>fetches</b> all refs from all remotes, instead of just the needed
one; <code>merge</code> then merges the appropriate <b>single branch</b>.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Rebasing non-linear changes (when the fast-forward merge is not possible).</span>
    <span class="org-variable-name">upr</span> = <span class="org-string">"!f() { git remote update -p; git rebase -p @{u}; }; f"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">cleanpull</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">update (like svn? if we add a git reset in front?)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">sync</span>
</pre>
</div>

<p>
&#x2026; but read &ldquo;you&rsquo;re not using git as it was intended&rdquo; on
<a href="https://news.ycombinator.com/item?id=2301765">https://news.ycombinator.com/item?id=2301765</a>.
</p>

<p>
Before doing work (in a new branch), <b>ensure that the working directory is</b>
<b>up-to-date</b> with the <code>origin</code> (pull and get latest for all submodules):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Get everything new.</span>
    <span class="org-variable-name">update</span> = !git pull                     &amp;&amp; git submodule update --init --recursive
    <span class="org-variable-name">get</span>    = !git pull --rebase            &amp;&amp; git submodule update --init --recursive
    <span class="org-variable-name">update</span> = !git pull --rebase --prune $@ &amp;&amp; git submodule update --init --recursive
</pre>
</div>

<p>
<a href="https://gist.github.com/gitaarik/8735255">Git Submodules basic explanation</a>
</p>
</div>
</div>

<div id="outline-container-org7e7c8d3" class="outline-4">
<h4 id="org7e7c8d3">Update all local branches</h4>
<div class="outline-text-4" id="text-org7e7c8d3">
<p>
Pull all:
</p>

<div class="org-src-container">
<pre class="src src-conf">  <span class="org-comment-delimiter"># </span><span class="org-comment">Do a push/pull for just one branch</span>
  <span class="org-variable-name">push1</span> = <span class="org-string">"!git push origin $(git current-branch)"</span>
  <span class="org-variable-name">pull1</span> = <span class="org-string">"!git pull origin $(git current-branch)"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Pull and push from the current branch</span>
<span class="org-variable-name">sync</span> = <span class="org-string">"!f(){ pull1 &amp;&amp; push1; }; f"</span>

    <span class="org-variable-name">pull-all</span> = !<span class="org-string">"old=$(git current-branch); \</span>
<span class="org-string">                 for b in $(git for-each-ref refs/heads --format='%(refname)'); do \</span>
<span class="org-string">                     git checkout ${b#refs/heads/}; \</span>
<span class="org-string">                     git pull --ff-only; \</span>
<span class="org-string">                 done; \</span>
<span class="org-string">                 git checkout ${old}"</span>
</pre>
</div>

<p>
See <a href="http://stackoverflow.com/questions/4318161/can-git-pull-all-update-all-my-local-branches">http://stackoverflow.com/questions/4318161/can-git-pull-all-update-all-my-local-branches</a>
(+ interesting comments about <b>rebase vs merge during a pull</b>!)
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-variable-name">REMOTES</span>=<span class="org-string">"$@"</span>;
<span class="org-keyword">if</span> [ -z <span class="org-string">"$REMOTES"</span> ]; <span class="org-keyword">then</span>
    <span class="org-variable-name">REMOTES</span>=$(<span class="org-sh-quoted-exec">git</span> remote);
<span class="org-keyword">fi</span>
<span class="org-variable-name">REMOTES</span>=$(<span class="org-sh-quoted-exec">echo</span> <span class="org-string">"$REMOTES"</span> | xargs -n 1 echo)

<span class="org-variable-name">CLB</span>=$(<span class="org-sh-quoted-exec">git</span> branch -l | awk <span class="org-string">'/^\*/{print $2}'</span>);

<span class="org-builtin">echo</span> <span class="org-string">"$REMOTES"</span> | <span class="org-keyword">while </span><span class="org-builtin">read</span> REMOTE; <span class="org-keyword">do</span>
    git remote update --prune $<span class="org-variable-name">REMOTE</span>
    <span class="org-builtin">echo</span>
    git remote show $<span class="org-variable-name">REMOTE</span> -n <span class="org-sh-escaped-newline">\</span>
        | awk <span class="org-string">'/merges with remote/ {print $5" "$1}'</span> <span class="org-sh-escaped-newline">\</span>
        | <span class="org-keyword">while </span><span class="org-builtin">read</span> line; <span class="org-keyword">do</span>
              <span class="org-variable-name">RB</span>=$(<span class="org-sh-quoted-exec">echo</span> <span class="org-string">"$line"</span> | cut -f1 -d<span class="org-string">" "</span>);
              <span class="org-variable-name">ARB</span>=<span class="org-string">"refs/remotes/$REMOTE/$RB"</span>;
              <span class="org-variable-name">LB</span>=$(<span class="org-sh-quoted-exec">echo</span> <span class="org-string">"$line"</span> | cut -f2 -d<span class="org-string">" "</span>);
              <span class="org-variable-name">ALB</span>=<span class="org-string">"refs/heads/$LB"</span>;
              <span class="org-variable-name">NBEHIND</span>=$(( $(<span class="org-sh-quoted-exec">git</span> rev-list --count $<span class="org-variable-name">ALB</span>..$<span class="org-variable-name">ARB</span> 2&gt; /dev/null) + 0));
              <span class="org-variable-name">NAHEAD</span>=$(( $(<span class="org-sh-quoted-exec">git</span> rev-list --count $<span class="org-variable-name">ARB</span>..$<span class="org-variable-name">ALB</span> 2&gt; /dev/null) + 0));
              <span class="org-keyword">if</span> [ <span class="org-string">"$NBEHIND"</span> -gt 0 ]; <span class="org-keyword">then</span>
                  <span class="org-keyword">if</span> [ <span class="org-string">"$NAHEAD"</span> -gt 0 ]; <span class="org-keyword">then</span>
                      <span class="org-builtin">echo</span> -e <span class="org-string">"[$LB \tis $NBEHIND commit(s) behind and $NAHEAD commit(s) ahead of $REMOTE/$RB.]  Not possible to fast-forward, aborting."</span>;
                  <span class="org-keyword">elif</span> [ <span class="org-string">"$LB"</span> = <span class="org-string">"$CLB"</span> ]; <span class="org-keyword">then</span>
                      <span class="org-builtin">echo</span> -e <span class="org-string">"[$LB \tis $NBEHIND commit(s) behind of $REMOTE/$RB.  Fast-forwarding merge...]"</span>;
                      <span class="org-comment-delimiter"># </span><span class="org-comment">git merge --quiet $ARB;</span>
                      git merge --ff-only --verbose $<span class="org-variable-name">ARB</span>;
                  <span class="org-keyword">else</span>
                      <span class="org-builtin">echo</span> -e <span class="org-string">"[$LB \tis $NBEHIND commit(s) behind of $REMOTE/$RB.  Resetting local branch to remote...]"</span>;
                      <span class="org-comment-delimiter"># </span><span class="org-comment">git branch -l -f $LB -t $ARB &gt; /dev/null;</span>
                      git branch -l -f $<span class="org-variable-name">LB</span> -t $<span class="org-variable-name">ARB</span>;
                  <span class="org-keyword">fi</span>
              <span class="org-keyword">else</span>
                  <span class="org-builtin">echo</span> -e <span class="org-string">"$LB \tAlready up to date."</span>;
              <span class="org-keyword">fi</span>
              <span class="org-builtin">echo</span>
          <span class="org-keyword">done</span>
<span class="org-keyword">done</span>
</pre>
</div>

<p>
XXX Is this <code>sync</code>?
</p>
</div>
</div>

<div id="outline-container-org56dd5fd" class="outline-4">
<h4 id="org56dd5fd">Get timestamp of last pull</h4>
<div class="outline-text-4" id="text-org56dd5fd">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">For the latest pull (even if there's nothing new).</span>
    <span class="org-variable-name">last-pulled</span> = !stat -c %y $(git root)/.git/FETCH_HEAD | cut -d<span class="org-string">'.'</span> -f1

    <span class="org-comment-delimiter"># </span><span class="org-comment">For the latest pull resulting in changes coming in from the remote master</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">branch (the timestamp won't change when git pull reports there are no</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">changes).</span>
    <span class="org-variable-name">last-updated</span> = !stat -c %y $(git root)/.git/refs/heads/$(git current-branch) | cut -d<span class="org-string">'.'</span> -f1
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd356020" class="outline-3">
<h3 id="orgd356020">UPDATE - Merge</h3>
<div class="outline-text-3" id="text-orgd356020">
<p>
Merging means to <b>bring the contents of another branch</b> (possibly from an external
repository) <b>into the current branch</b>. [&#x2026;]  Merging is performed by an automatic
process that identifies changes made since the branches diverged, and then
applies all those changes together.
</p>

<pre class="example">
Merge branch 'branch_name' into master
</pre>


<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Will only try to "merge" if your current HEAD commit is in the branch</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">you're merging in.  This will allow you to merge some commits whilst being</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">sure you won't get conflicts.</span>
    <span class="org-variable-name">mff</span> = merge --ff-only
    <span class="org-variable-name">mff</span> = merge --ff-only @{u}

    <span class="org-comment-delimiter"># </span><span class="org-comment">Avoid a fast-forward commit.</span>
    <span class="org-variable-name">mnf</span> = merge --no-ff

    <span class="org-variable-name">cvsmerge</span> = merge --no-ff --log
</pre>
</div>
</div>

<div id="outline-container-org4547e1b" class="outline-4">
<h4 id="org4547e1b">Merge master</h4>
<div class="outline-text-4" id="text-org4547e1b">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Merge remote master into the current branch.</span>
    <span class="org-variable-name">mm</span> = !git fetch -p &amp;&amp; git merge origin/master

    <span class="org-variable-name">merge-to-master</span> =  <span class="org-string">"!f(){ branch_name=\"$(git symbolic-ref HEAD 2&gt;/dev/null)\" || branch_name=\"(unnamed branch)\"; branch_name=${branch_name##refs/heads/}; git checkout master &amp;&amp; git merge $branch_name &amp;&amp; git checkout $branch_name; };f"</span>
    <span class="org-variable-name">fork-from-master</span> = <span class="org-string">"!f(){ git checkout master &amp;&amp; git branch $1 &amp;&amp; git checkout $1; };f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org97a8e47" class="outline-4">
<h4 id="org97a8e47">Undo the merge</h4>
<div class="outline-text-4" id="text-org97a8e47">
<p>
If you tried a merge which resulted in complex conflicts and want to start over,
you can recover with <code>git merge --abort</code>.  It will allow you to <b>undo the merge</b>,
even if it is a fast-forward merge.
</p>
</div>
</div>

<div id="outline-container-orga771aa7" class="outline-4">
<h4 id="orga771aa7">Merge current branch into another one</h4>
<div class="outline-text-4" id="text-orga771aa7">
<p>
On projects where we work with a staging or test branch, I regularly merge my
work in progress into it so others can test it.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">m</span> = <span class="org-string">"!f() { local OLD=$(git current-branch); \</span>
<span class="org-string">                git co \"$1\" &amp;&amp; git pu &amp;&amp; git merge $OLD &amp;&amp; git p &amp;&amp; git co $OLD; }; f"</span>
</pre>
</div>

<p>
If you now type <code>git m staging</code> while on the <code>feature</code> branch, this will happen:
</p>

<ul class="org-ul">
<li>First, the function checks out the <code>staging</code> branch.</li>
<li>It then pulls the latest changes to the <code>staging</code> branch from origin.</li>
<li>Then it merges <code>feature</code> into <code>staging</code>.</li>
<li>Next, it pushes the updated <code>staging</code> branch back to origin.</li>
<li>Finally, it checks out the <code>feature</code> branch again.</li>
</ul>

<p>
Such a timesaver!
</p>
</div>
</div>

<div id="outline-container-org0fbea0e" class="outline-4">
<h4 id="org0fbea0e">Dry run (do not make changes)</h4>
<div class="outline-text-4" id="text-org0fbea0e">
<p>
Naive (but slow) way:
</p>

<div class="org-src-container">
<pre class="src src-shell">rm -Rf /tmp/repository
cp -r repository /tmp/
<span class="org-builtin">cd</span> /tmp/repository
git merge ...
<span class="org-comment-delimiter"># </span><span class="org-comment">... If successful, do the real merge.</span>
</pre>
</div>

<div class="warning">
<p>
It won&rsquo;t work just cloning to <code>/tmp</code>; you need a <b>copy</b> in order <b>to be sure that
uncommitted changes will not conflict</b>.
</p>

</div>

<p>
Performing a Git merge with <b>no commit</b> and <b>no fast-forward</b> will merge the two
code bases together &#x2013; it will <b>modify your working copy</b>.  This will allow you to
examine, test, and undo the merge if required.
</p>

<div class="org-src-container">
<pre class="src src-shell">git merge --no-commit --no-ff $<span class="org-variable-name">BRANCH</span>
</pre>
</div>

<p>
You can do <code>git merge --abort</code> after seeing that there are conflicts.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Run merge test (before merge) to check for any conflicts beforehand.</span>
    <span class="org-variable-name">mergetest</span> = <span class="org-string">"!f() { git merge --no-commit --no-ff \"$1\"; git merge --abort; echo \"Merge aborted\"; }; f"</span>
</pre>
</div>

<div class="warning">
<p>
If your repository is a live Web server, then you could be serving files with
conflicts in.  That&rsquo;s why you should <b>never</b> be <b>handling merges on a live Web
server</b>!  Fix up the <code>master</code> branch (on your development box) and then push it to
the real webserver with <code>git pull --ff-only</code>.
</p>

</div>

<p>
See if the merge is applicable to the current working tree and/or the index file
and <b>detects conflicts</b>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Check how the merge of `develop' into master will go:</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">git merge-dry-run develop</span>
    <span class="org-variable-name">merge-dry-run</span> = <span class="org-string">"!f() { grep -q 'changed in both' &lt;&lt;&lt; $(git merge-tree $(git merge-base FETCH_HEAD $1) FETCH_HEAD $1) \</span>
<span class="org-string">                                &amp;&amp; echo 'Merge conflicts!' \</span>
<span class="org-string">                                || echo 'This branch can be automatically merged.'; }; f"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">DOESN'T work for git fetch &amp; git merge</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Extract the "changed in both" lines as well as the conflicting parts.</span>
    <span class="org-variable-name">merge-dry-run-conflicts</span> = <span class="org-string">"!f() { git merge-tree $(git merge-base $1 $2) $1 $2 | sed -n '/+&lt;&lt;&lt;&lt;&lt;&lt;&lt; .our/,/+&gt;&gt;&gt;&gt;&gt;&gt;&gt; .their/p;/^changed in both/{n;N;N;s/^/#/mg;p}' | cdiff; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd4ac18" class="outline-4">
<h4 id="orgcd4ac18">Branch/Integration manager</h4>
<div class="outline-text-4" id="text-orgcd4ac18">
<p>
Often, during a <b>merge</b>, you know you want to take a file from one side wholesale;
that is, to select the entirety of either our or their file.
</p>

<p>
Pick a file(s) from:
</p>

<ul class="org-ul">
<li>the <b>current branch</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">ours</span>   = <span class="org-string">"!f() { git checkout --ours   $@ &amp;&amp; git add $@; }; f"</span>
</pre>
</div>

<ul class="org-ul">
<li>the <b>branch being merged in</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">theirs</span> = <span class="org-string">"!f() { git checkout --theirs $@ &amp;&amp; git add $@; }; f"</span>
</pre>
</div>

<div class="warning">
<p>
During a <b>rebase</b>, the commits being merged into the current branch <i>are</i> the
commits from your original feature branch.  So <code>--ours</code> and <code>--theirs</code> will appear
to be <b>flipped</b> around.
</p>

</div>

<div class="note">
<p>
Using <code>git checkout</code> with <code>--ours</code> or <code>--theirs</code> expects at least one argument: the
<b>path(s)</b> of the <b>files / directories</b> to checkout.  If you use <code>git checkout</code> without
any files, then it takes the meaning of <i>switching branches</i>.
</p>

</div>

<p>
<b>Best (and safest) way to merge</b> a Git local branch into <code>master</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">git checkout master
git pull origin master                  <span class="org-comment-delimiter"># </span><span class="org-comment">Get the latest changes from the remote.</span>
git merge test
git push origin master

git branch -d local_branch_name         <span class="org-comment-delimiter"># </span><span class="org-comment">Delete local branch.</span>
</pre>
</div>

<div class="warning">
<p>
<b>Update first the branch (to merge in) of the RIGHT LOCAL CLONE.</b> &#x2013; if you do
have many clones on your file system.
</p>

</div>

<p>
Best answer I have seen on <code>git merge</code> <b>strategies</b>:
<a href="https://stackoverflow.com/questions/366860/when-would-you-use-the-different-git-merge-strategies">https://stackoverflow.com/questions/366860/when-would-you-use-the-different-git-merge-strategies</a>
</p>
</div>
</div>

<div id="outline-container-orgfd9db5a" class="outline-4">
<h4 id="orgfd9db5a">Show list of files in a conflict state</h4>
<div class="outline-text-4" id="text-orgfd9db5a">
<p>
List unmerged files (after a merge failure), having leftover conflict markers:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">conflicts</span> = diff --name-only --diff-filter=U
</pre>
</div>

<p>
See also <code>git diff --check</code>.
</p>

<p>
Quickly solve conflicts using an editor.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">edit-unmerged</span> = <span class="org-string">"!$EDITOR $(git conflicts)"</span>
</pre>
</div>

<p>
Then, add the conflicted files.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">add-unmerged</span> = <span class="org-string">"!git add $(git conflicts)"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4f940e2" class="outline-3">
<h3 id="org4f940e2">BRANCH - Branch</h3>
<div class="outline-text-3" id="text-org4f940e2">
</div>
<div id="outline-container-org084e708" class="outline-4">
<h4 id="org084e708">Feature Branches</h4>
<div class="outline-text-4" id="text-org084e708">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Create a feature branch.</span>
    <span class="org-variable-name">feature</span> = <span class="org-string">"!f() { git create-branch feature/$1 develop; }; f"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">XXX or feature-start?</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Incorporate a finished feature on develop.</span>
    <span class="org-variable-name">feature-finish</span> = <span class="org-string">"!f() { git checkout develop; \</span>
<span class="org-string">                             git merge --no-ff feature/$1 \</span>
<span class="org-string">                             &amp;&amp; git delete-local-branch feature/$1; }; f"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">XXX Also bug and refactor.</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">XXX release-start</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">XXX release-finish</span>
</pre>
</div>

<p>
<a href="https://medium.com/gumgum-tech/git-and-git-flow-a-guide-871d46a0ebcb">https://medium.com/gumgum-tech/git-and-git-flow-a-guide-871d46a0ebcb</a>
</p>

<p>
Alias configuration for our feature branches, like a simple git flow for feature
stories, or hotfix patches, etc.
</p>

<p>
Create a new feature branch:
</p>

<pre class="example">
feature-start = '!branch=$1; git checkout master; git pull; git create-branch "$branch" master'
</pre>


<p>
Update the feature branch:
</p>

<pre class="example">
feature-pull = '!branch=$(git current-branch); git checkout master; git pull; git checkout "$branch"; git rebase master'
</pre>


<p>
Share the feature branch:
</p>

<pre class="example">
feature-push = '!branch=$(git current-branch); git push -u origin "$branch"'
</pre>


<p>
If your team uses a different feature flow, you may want to skip including these
aliases, or you may want to edit these aliases to match your team&rsquo;s feature flow.
</p>
</div>
</div>

<div id="outline-container-org78241a5" class="outline-4">
<h4 id="org78241a5">Git workflows</h4>
<div class="outline-text-4" id="text-org78241a5">
<p>
It may be helpful to do a some background reading on workflows with Git.  Here
is the gitworkflows man page:
<a href="https://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html">https://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html</a>
</p>

<p>
Other doc on branching models:
</p>

<p>
<a href="http://www.draconianoverlord.com/2013/09/07/no-cherry-picking.html">http://www.draconianoverlord.com/2013/09/07/no-cherry-picking.html</a>
<a href="http://williamdurand.fr/2012/01/17/my-git-branching-model/">http://williamdurand.fr/2012/01/17/my-git-branching-model/</a>
</p>
</div>
</div>

<div id="outline-container-org193142f" class="outline-4">
<h4 id="org193142f">General</h4>
<div class="outline-text-4" id="text-org193142f">
<p>
See <a href="http://nuclearsquid.com/writings/git-tricks-tips-workflows/">http://nuclearsquid.com/writings/git-tricks-tips-workflows/</a> for more
interesting stuff, such as:
</p>

<ul class="org-ul">
<li>When branching off a remote branch, automatically let the local branch track
the remote branch.</li>

<li>When pushing without giving a refspec, push the current branch to its upstream
branch. See the git config man page for more possible options.</li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Shortcut for checkout.</span>
    <span class="org-variable-name">co</span> = checkout
</pre>
</div>

<p>
Check out the next commit in the commit history &#x2013; quite useful for demos to
jump across commits:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">next</span> = <span class="org-string">"!f() { git checkout $(git rev-list --topo-order HEAD..master | tail -1; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7dc982" class="outline-4">
<h4 id="orgf7dc982">If you get the error &ldquo;The following untracked working tree files would be overwritten by checkout&rdquo;</h4>
<div class="outline-text-4" id="text-orgf7dc982">
<div class="org-src-container">
<pre class="src src-text">error: Your local changes to the following files would be overwritten by checkout:
        WEB-INF/config/afm-projects.xml.DEV-fni
        WEB-INF/config/context/logging/logging.xml
Please commit your changes or stash them before you switch branches.
error: The following untracked working tree files would be overwritten by checkout:
        WEB-INF/config/afm-projects.xml
Please move or remove them before you switch branches.
</pre>
</div>

<p>
One solution is to <b>move the untracked files</b>, instead of <b>deleting them</b>.  For
example:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">cd</span> <span class="org-string">"$(</span><span class="org-sh-quoted-exec">git</span><span class="org-string"> root)"</span>
git checkout $<span class="org-variable-name">BRANCH</span> 2&gt;&amp;1 | <span class="org-keyword">while </span><span class="org-builtin">read</span> f; <span class="org-keyword">do</span> [ <span class="org-negation-char">!</span> -e <span class="org-string">"$f"</span> ] || mv -v <span class="org-string">"$f"</span> <span class="org-string">"$f.bak"</span>; <span class="org-keyword">done</span>
</pre>
</div>

<p>
Another is to throw away local changes using a <b>forced checkout</b>:
</p>

<pre class="example">
git checkout -f some-branch
</pre>
</div>
</div>

<div id="outline-container-org32f3eac" class="outline-4">
<h4 id="org32f3eac">GitHub Pages</h4>
<div class="outline-text-4" id="text-org32f3eac">
<div class="org-src-container">
<pre class="src src-conf">echo <span class="org-string">'setting up gh-pages'</span>
echo <span class="org-string">'-------------------'</span>

echo <span class="org-string">'Tell me your github account username: '</span>
read username

echo <span class="org-string">'Now, tell me your repository name: '</span>
read repository

git stash \
&amp;&amp; git create-branch <span class="org-string">'gh-pages'</span> \
&amp;&amp; echo <span class="org-string">'My Page'</span> &gt; index.html \
&amp;&amp; git add . \
&amp;&amp; git commit -a -m <span class="org-string">'Initial commit'</span> \
&amp;&amp; git remote add origin https://github.com/<span class="org-string">"$username"</span>/<span class="org-string">"$repository"</span>.git \
&amp;&amp; git push -u origin gh-pages \
&amp;&amp; echo <span class="org-string">'Complete'</span> \
&amp;&amp; echo <span class="org-string">'-------------------'</span> \
&amp;&amp; echo <span class="org-string">'You can find your last changes in the stash!'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc66ff97" class="outline-4">
<h4 id="orgc66ff97">Comparing the commits between branches</h4>
<div class="outline-text-4" id="text-orgc66ff97">
<p>
Sometimes I lose track of which branch contains which other branch. This
shortcut (an idea borrowed from Bazaar) shows the unique revisions in the
current branch and the specified branch.
</p>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-variable-name">missing</span> = <span class="org-string">"!f() { git rev-list ..$1 --oneline | sed -e '1 iOnly in other:'; git rev-list $1.. --oneline | sed -e '1 iOnly in HEAD:'; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org12003bc" class="outline-4">
<h4 id="org12003bc">See which changes from a branch are already present upstream</h4>
<div class="outline-text-4" id="text-org12003bc">
<p>
While on <code>feature</code> branch:
</p>

<div class="org-src-container">
<pre class="src src-shell">git cherry -v master
</pre>
</div>

<pre class="example">
+ 497034f2 Listener.new now accepts a hash of options
- 2d0333ff Cache the absolute images path for growl messages
+ e4406858 Rename Listener#run to #start
</pre>

<p>
The <code>cherry</code> command is useful to see which commits have been cherry-picked from
a development branch to the stable branch, for instance. This command compares
changes on the current (<code>feature</code>) branch to upstream (<code>master</code>) and indicates which
are present on both with the <code>-</code> sign. Changes still missing from upstream are
marked with <code>+</code>.
</p>
</div>
</div>

<div id="outline-container-orgf0a071d" class="outline-4">
<h4 id="orgf0a071d">Recover a branch after its deletion in Git</h4>
<div class="outline-text-4" id="text-orgf0a071d">
<p>
Most of the time unreachable commits are in the reflog. So, the <b>first thing to
try is to look at the reflog</b> using the command <code>git reflog</code> (which display the
reflog for <code>HEAD</code>).
</p>

<ol class="org-ol">
<li>Perhaps something easier if the commit was part of a specific branch still
existing is to use the command <code>git reflog name-of-my-branch</code> to <b>find the SHA</b>
for the commit at the tip of your deleted branch &#x2013; It works also with
a remote, for example if you forced push.  Otherwise, use <code>git reflog</code>.</li>
<li>Then, you can just <code>git create-branch &lt;branch&gt; &lt;sha1&gt;</code> to recreate the branch
from there.</li>
</ol>

<p>
See <a href="https://stackoverflow.com/questions/3640764/can-i-recover-a-branch-after-its-deletion-in-git">https://stackoverflow.com/questions/3640764/can-i-recover-a-branch-after-its-deletion-in-git</a>
</p>
</div>
</div>

<div id="outline-container-orgc5f2bfe" class="outline-4">
<h4 id="orgc5f2bfe">Show branches and their commits</h4>
<div class="outline-text-4" id="text-orgc5f2bfe">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">"show-branch -g=N" can't be aliased for N easily, so we stop here:</span>
    <span class="org-variable-name">sb</span>  = show-branch
    <span class="org-comment-delimiter"># </span><span class="org-comment">pg sbt master pu -- if the last line is 'master' and not 'master~'</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">or 'master~N' then pu is a descendent of master</span>
    <span class="org-variable-name">sbt</span> = show-branch --topics
    <span class="org-variable-name">sbs</span> = show-branch --sha1-name
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org28b9734" class="outline-3">
<h3 id="org28b9734">Stash</h3>
<div class="outline-text-3" id="text-org28b9734">
<p>
A <b>stash</b> is nothing but a <b>(temporary) branch</b>.
</p>

<p>
<code>git stash</code> makes a temporary copy of the changes in your <b>index</b> (staging area) and
<b>working tree</b>, and clears the decks so you can easily work on something else; it
reverts your local modifications, allowing you to get rid of some incomplete
changes.
</p>

<div class="tip">
<p>
Use <code>git stash</code> if Git refused to merge because it foresees conflicts.
</p>

</div>

<p>
If you anticipate that you might have trouble merging the work you want to stash
with the work you&rsquo;re about to do on the clean tree, you can create a new branch
with <code>git stash branch &lt;new branchname&gt;</code>.
</p>

<p>
Information that is used by default if you don&rsquo;t provide a message:
</p>

<pre class="example">
stash@{0}: WIP on &lt;branch&gt;: &lt;sha1 of head&gt; &lt;title line of head&gt;
</pre>

<p>
You can operate on the &ldquo;stash&rdquo; ref as if it were any other ref.
</p>
</div>

<div id="outline-container-orgd28826a" class="outline-4">
<h4 id="orgd28826a">Stash push</h4>
<div class="outline-text-4" id="text-orgd28826a">
<p>
<code>git stash push</code> also optionally takes a message describing the contents of the
stash (much, much more useful):
</p>

<div class="org-src-container">
<pre class="src src-conf">git stash push -m <span class="org-string">"DESCRIBE WHAT YOU DID HERE"</span>
</pre>
</div>

<pre class="example">
stash@{0}: On &lt;branch&gt;: DESCRIBE WHAT YOU DID HERE
</pre>

<p>
This command is useful in saving all changes not ready to be committed and the
user wants to have an updated repository.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">spush</span> = stash push
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">sshow</span> = <span class="org-string">"!f() { git stash show stash^{/$@} -p; }; f"</span> <span class="org-comment-delimiter"># </span><span class="org-comment">Like sapply but shows it only</span>

    <span class="org-variable-name">sapply</span> = <span class="org-string">"!f() { git stash apply stash^{/$@}; }; f"</span> <span class="org-comment-delimiter"># </span><span class="org-comment">Find stash with name like text</span>

    <span class="org-variable-name">spop</span> = <span class="org-string">"!f() { git stash pop stash@{$(git stash-id $@)}; }; f"</span> <span class="org-comment-delimiter"># </span><span class="org-comment">Like sapply but pops it off</span>

    <span class="org-variable-name">stash-id</span> = <span class="org-string">"!f() { git stash list | grep $@ | head -n 1 | sed -n 's/stash@{\\(.*\\)}.*/\\1/p'; }; f"</span> <span class="org-comment-delimiter"># </span><span class="org-comment">only accepts single word, no quotations</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-variable-name">stashall</span> = !git add -A &amp;&amp; git stash
<span class="org-comment-delimiter"># </span><span class="org-comment">"Add" modified files, deleted files, and new untracked files.</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">hide</span> = stash push --include-untracked <span class="org-comment-delimiter"># </span><span class="org-comment">Hide all files, including untracked files (faster than using --all).</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org22c8da3" class="outline-4">
<h4 id="org22c8da3">Take named stash</h4>
<div class="outline-text-4" id="text-org22c8da3">
<p>
&ldquo;WIP:&rdquo;
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">snapshot</span> = !git stash push -m <span class="org-string">"snapshot-$(date +%Y%m%d_%H%M)"</span> \
                    &amp;&amp; git stash apply <span class="org-string">"stash@{0}"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">checkpoint</span>
    <span class="org-variable-name">cp</span> = !git stash push -m <span class="org-string">"$(date +%F--%T)"</span> &amp;&amp; git stash pop --index

    <span class="org-comment-delimiter"># </span><span class="org-comment">checkpoint recover</span>
    <span class="org-variable-name">cpr</span> = <span class="org-string">"!f() { git fsck | grep commit | cut -d' ' -f3 | \</span>
<span class="org-string">                  while read hash; do \</span>
<span class="org-string">                      git rev-parse --verify --no-revs --quiet $hash^2 2&gt;/dev/null &amp;&amp; echo $hash | xargs git rev-list --since=${1:-1day} -1; \</span>
<span class="org-string">                  done | xargs -L 1 git log --format=%at:%h -1 | sort | cut -f2 -d: | xargs -L 1 git log --graph --oneline --format='%Cblue%h %Cgreen(%ar) %Creset%s' -3; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ccbfde" class="outline-4">
<h4 id="org2ccbfde">Show a list of all stashes</h4>
<div class="outline-text-4" id="text-org2ccbfde">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">stashes</span> = stash list --date=local
</pre>
</div>
</div>
</div>

<div id="outline-container-org8825a1e" class="outline-4">
<h4 id="org8825a1e">Show the stash</h4>
<div class="outline-text-4" id="text-org8825a1e">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">stash-diff</span> = stash show -p
</pre>
</div>

<p>
<a href="https://stackoverflow.com/questions/11269256/how-to-name-and-retrieve-a-stash-by-name-in-git">https://stackoverflow.com/questions/11269256/how-to-name-and-retrieve-a-stash-by-name-in-git</a>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">sshow</span> = <span class="org-string">"!f() { git stash show stash^{/$*} -p; }; f"</span>
</pre>
</div>

<p>
One very useful feature one may consider is to list contents of all local
stashes:
</p>

<div class="org-src-container">
<pre class="src src-shell">git stashes | awk -F: <span class="org-string">'{ print "\n\n\n\n"; print $0; print "\n\n"; system("git stash show -p " $1); }'</span>
</pre>
</div>

<p>
Press [Q] to exit each stash.
</p>

<p>
It helped me a lot in the past (cleaning stashes stack).
</p>
</div>
</div>

<div id="outline-container-org501a2b8" class="outline-4">
<h4 id="org501a2b8">Show name-only</h4>
<div class="outline-text-4" id="text-org501a2b8">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">sshno</span> = stash show --name-only
</pre>
</div>
</div>
</div>

<div id="outline-container-org2671203" class="outline-4">
<h4 id="org2671203">Apply the stash only, don&rsquo;t delete it from the stash list</h4>
<div class="outline-text-4" id="text-org2671203">
<p>
When you&rsquo;re done, with <code>git stash apply</code> (top stash by default), you&rsquo;re back where
you were.  But if that doesn&rsquo;t work, for whatever reason, you can use any of
Git&rsquo;s other branch merging tools to put things back they way you want them.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">sa</span> = stash apply
</pre>
</div>

<p>
<a href="https://stackoverflow.com/questions/11269256/how-to-name-and-retrieve-a-stash-by-name-in-git">https://stackoverflow.com/questions/11269256/how-to-name-and-retrieve-a-stash-by-name-in-git</a>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">sapply</span> = <span class="org-string">"!f() { git stash apply stash^{/$*}; }; f"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">stash-unapply</span> = !git stash show -p --no-textconv --binary | git apply -R
</pre>
</div>
</div>
</div>

<div id="outline-container-org9950568" class="outline-4">
<h4 id="org9950568">Stash pop</h4>
<div class="outline-text-4" id="text-org9950568">
<p>
<code>git stash pop</code> removes the most recent stash or any stash specified and applies
changes as a merge.  If merge fails, the stash is not removed from the list and
must be removed manually.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">sp</span> = stash pop
</pre>
</div>

<div class="warning">
<p>
Be aware that, unlike <code>git stash apply</code> (though it has its use), <code>git stash pop</code>
<b>deletes the applied stash</b> &#x2013; <i>only</i> if the stash is cleanly applied.  If there are
conflicts, Git will not remove it (but it will still apply it)!
</p>

</div>
</div>
</div>

<div id="outline-container-org26a239c" class="outline-4">
<h4 id="org26a239c">Drop the stash</h4>
<div class="outline-text-4" id="text-org26a239c">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">std</span> = stash drop
</pre>
</div>
</div>
</div>

<div id="outline-container-org75b6add" class="outline-4">
<h4 id="org75b6add">Clear</h4>
<div class="outline-text-4" id="text-org75b6add">
<div class="org-src-container">
<pre class="src src-shell">git stash clear
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf95afc5" class="outline-4">
<h4 id="orgf95afc5">Workflows</h4>
<div class="outline-text-4" id="text-orgf95afc5">
<p>
Alternative to <code>stash</code> (writing a commit with a default message):
</p>

<p>
XXX See doc of git help stash for workflows&#x2026;
</p>

<ol class="org-ol">
<li><p>
Do a regular <code>commit</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">   git add -A &amp;&amp; git commit -m <span class="org-string">'WIP'</span>       <span class="org-comment-delimiter"># </span><span class="org-comment">Add all changes (including untracked files).</span>
</pre>
</div></li>

<li>Do some other work&#x2026;</li>

<li><p>
Return to previous work:
</p>

<div class="org-src-container">
<pre class="src src-shell">   git reset --mixed                       <span class="org-comment-delimiter"># </span><span class="org-comment">Reset the previous commit (but</span>
                                           <span class="org-comment-delimiter"># </span><span class="org-comment">keeps all the changes from that</span>
                                           <span class="org-comment-delimiter"># </span><span class="org-comment">commit in the working directory).</span>

   git reset --soft                        <span class="org-comment-delimiter"># </span><span class="org-comment">Or this one???</span>
</pre>
</div>

<p>
Or, if I merely need to modify the <b>previous</b> commit:
</p>

<div class="org-src-container">
<pre class="src src-shell">   git commit -a --amend
</pre>
</div>

<p>
The <code>-a</code> <b>adds any modifications and deletions of existing files</b> to the commit
but ignores brand new files.
</p>

<p>
The <code>--amend</code> launches your default commit editor and lets you change the
commit message of the <b>most recent</b> commit.
</p></li>
</ol>
</div>
</div>

<div id="outline-container-orgc23edd0" class="outline-4">
<h4 id="orgc23edd0">From git help stash</h4>
<div class="outline-text-4" id="text-orgc23edd0">
<p>
Pulling into a dirty tree
</p>

<p>
When you are in the middle of something, you learn that there are
upstream changes that are possibly relevant to what you are
doing. When your local changes do not conflict with the changes in
the upstream, a simple git pull will let you move forward.
</p>

<p>
However, there are cases in which your local changes do conflict with
the upstream changes, and git pull refuses to overwrite your
changes. In such a case, you can stash your changes away, perform
a pull, and then unstash, like this:
</p>

<p>
$ git pull
 &#x2026;
file foobar not up to date, cannot merge.
$ git stash
$ git pull
$ git stash pop
</p>

<p>
Interrupted workflow
</p>

<p>
When you are in the middle of something, your boss comes in and
demands that you fix something immediately. Traditionally, you would
make a commit to a temporary branch to store your changes away, and
return to your original branch to make the emergency fix, like this:
</p>

<p>
$ git create-branch my_wip
$ git commit -a -m &ldquo;WIP&rdquo;
$ git checkout master
$ edit emergency fix
$ git commit -a -m &ldquo;Fix in a hurry&rdquo;
$ git checkout my_wip
$ git reset &#x2013;soft HEAD~
</p>

<p>
You can use git stash to simplify the above, like this:
</p>

<p>
$ git stash
$ edit emergency fix
$ git commit -a -m &ldquo;Fix in a hurry&rdquo;
$ git stash pop
</p>

<p>
Testing partial commits
</p>

<p>
You can use git stash push &#x2013;keep-index when you want to make two or
more commits out of the changes in the work tree, and you want to
test each change before committing:
</p>

<p>
$ git add &#x2013;patch foo            # add just first part to the index
$ git stash push &#x2013;keep-index    # save all other changes to the stash
$ edit/build/test first part
$ git commit -m &rsquo;First part&rsquo;     # commit fully tested change
$ git stash pop                  # prepare to work on all other changes
</p>

<p>
$ edit/build/test remaining parts
$ git commit foo -m &rsquo;Remaining parts&rsquo;
</p>

<p>
Recovering stashes that were cleared/dropped erroneously
</p>

<p>
If you mistakenly drop or clear stashes, they cannot be recovered
through the normal safety mechanisms. However, you can try the
following incantation to get a list of stashes that are still in your
repository, but not reachable any more:
</p>

<p>
git fsck &#x2013;unreachable |
grep commit | cut -d\  -f3 |
xargs git log &#x2013;merges &#x2013;no-walk &#x2013;grep=WIP
</p>
</div>
</div>
</div>

<div id="outline-container-orgf29809e" class="outline-3">
<h3 id="orgf29809e">PUBLISH - Push</h3>
<div class="outline-text-3" id="text-orgf29809e">
</div>
<div id="outline-container-org7715c6f" class="outline-4">
<h4 id="org7715c6f">Show outgoing changes: commits that are on the local branch that have not been pushed</h4>
<div class="outline-text-4" id="text-org7715c6f">
<p>
It is useful to know if you have any <b>local commits</b> that are not in the remote
branch.
</p>

<div class="note">
<p>
It is a good idea to examine what you are about to push, before actually doing
so, because fixing mistakes before pushing is much easier. To do that, use the
command &ldquo;git diff origin/master&rdquo;. If you want to show your unpushed commits with
their commit log messages, use &ldquo;git show origin/master..&rdquo; instead. If you only
have one local commit you want to push, just &ldquo;git show&rdquo; is enough.
</p>

<p>
&gt; It is not clear to me how these two differ.  Does &ldquo;git show origin/master..&rdquo;
&gt; output everything that &ldquo;git diff origin/master&rdquo; outputs, plus log messages?
</p>

<p>
Yes, that&rsquo;s the only real difference between them, when you have no uncommitted
changes.  (When you do have uncommitted changes, &ldquo;git diff&rdquo; will include them,
while &ldquo;git show&rdquo; will not.)
</p>

</div>

<p>
The <code>out</code> command returns a list of <b>unpushed</b> (outgoing) commits for the <b>current
branch</b>, the next time you do a push.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Unpushed.</span>
    <span class="org-variable-name">out</span> = log --date=short @{u}..
    <span class="org-variable-name">out-stat</span> = log --stat --date=short @{u}..
</pre>
</div>

<p>
This causes <code>git log</code> to show all commits reachable from <code>HEAD</code> excluding those
reachable from the upstream branch.  The <code>@{u}..</code> argument is equivalent to
<code>@{u}..HEAD</code>, where <code>HEAD</code> stands for the last commit in your local branch, but <code>HEAD</code>
can be omitted for shorthand purposes.
</p>

<p>
If you want to see all <b>unpushed</b> commits from <b>all branches</b>, do this:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">outgoing</span> = log --branches --not --remotes --decorate
</pre>
</div>
</div>
</div>

<div id="outline-container-org1266eb3" class="outline-4">
<h4 id="org1266eb3">Upload your changes</h4>
<div class="outline-text-4" id="text-org1266eb3">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Get the upstream branch name.</span>
    <span class="org-variable-name">upstream-name</span> = !git for-each-ref --format=<span class="org-string">'%(upstream:short)'</span> $(git symbolic-ref -q HEAD)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga79370b" class="outline-3">
<h3 id="orga79370b">PUBLISH - Find out if a change is part of a release</h3>
<div class="outline-text-3" id="text-orga79370b">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">sha1-tag</span> = <span class="org-string">"!f() { git name-rev --name-only \"$@\"; }; f"</span>
</pre>
</div>

<p>
The <code>name-rev</code> command indicates the <b>position of a commit relative to tags</b> in the
project. For example, <code>v2.3~5</code> means that this commit is located 5 commits <b>before</b>
the v2.3 tag &#x2013; we can be certain that this change is part of v2.3, then.
</p>
</div>
</div>

<div id="outline-container-org1ae5b15" class="outline-3">
<h3 id="org1ae5b15">Create patches</h3>
<div class="outline-text-3" id="text-org1ae5b15">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">lll</span> = log -u
</pre>
</div>
</div>

<div id="outline-container-orgacaa3cc" class="outline-4">
<h4 id="orgacaa3cc">Creating a patch</h4>
<div class="outline-text-4" id="text-orgacaa3cc">
<ol class="org-ol">
<li>Make your changes and commit them.</li>

<li><p>
Run
</p>

<pre class="example">
git format-patch COMMIT_REFERENCE
</pre>


<p>
to convert all commits since the referenced commit (not including it) into
patch files.
</p>

<p>
For example:
</p>

<pre class="example">
git format-patch HEAD~
</pre></li>
</ol>
</div>
</div>

<div id="outline-container-org0d3c66e" class="outline-4">
<h4 id="org0d3c66e">Using the patch</h4>
<div class="outline-text-4" id="text-org0d3c66e">
<pre class="example">
git am *.patch
</pre>


<p>
Error while applying a patch
</p>

<pre class="example">
git am--ignore-whitespace 0001-my-awesome-change.patch
</pre>


<p>
When <code>git apply</code> is working normally, you get no output at all:
</p>

<pre class="example">
git apply 0001-my-awesome-change.patch
</pre>


<p>
[nothing returned]
</p>

<p>
If you want to see what&rsquo;s going on behind the scenes, you can use the <code>-v</code>
(verbose) flag:
</p>

<pre class="example">
git apply -v 0001-my-awesome-change.patch
</pre>


<p>
Use <code>patch -p1 &lt; filename.patch</code>. Whereas <code>git-apply</code> altogether rejects a patch
with any errors, <code>patch -p1</code> works hunk by hunk, applying as many individual
changes as it can. It backs up each file as <code>filename.ext.orig</code> before modifying
it and saves rejected hunks in <code>filename.ext.rej</code>. Discard the <code>.orig</code> files and
manually apply the changes left in the <code>.rej</code>. This is an easy strategy for small
patches.
</p>

<p>
<b>Applying Patches</b> with different line endings error on Cygwin:
</p>

<pre class="example">
patch -t -N -r - -p1 -i 0001-my-awesome-change.patch
</pre>
</div>
</div>

<div id="outline-container-org83d93e2" class="outline-4">
<h4 id="org83d93e2">Apply patches from URL</h4>
<div class="outline-text-4" id="text-org83d93e2">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Apply a patch to files and/or to the index from URL.</span>
    <span class="org-variable-name">apply-url</span> = <span class="org-string">"!f() { curl -s $1 2&gt;nul | git apply ${@:2}; }; f"</span>
</pre>
</div>

<pre class="example">
git apply-url http://example.org/sample.patch args
</pre>


<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Apply a series of patches from an URL.</span>
    <span class="org-variable-name">am-url</span> = <span class="org-string">"!f() { curl -s $1 2&gt;nul | git am ${@:2}; }; f"</span>
</pre>
</div>

<pre class="example">
git am-url http://example.org/sample.patch args
</pre>
</div>
</div>

<div id="outline-container-org029eec8" class="outline-4">
<h4 id="org029eec8">Apply a patch interactively</h4>
<div class="outline-text-4" id="text-org029eec8">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Interactive apply patch.</span>
    <span class="org-variable-name">ipatch</span> = <span class="org-string">"!f() { git apply $1; git add -p; }; f"</span>
</pre>
</div>

<pre class="example">
git ipatch mypatchfile
</pre>
</div>
</div>

<div id="outline-container-org157cc93" class="outline-4">
<h4 id="org157cc93">Patch shortcuts</h4>
<div class="outline-text-4" id="text-org157cc93">
<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">Copy a patch URL to the clipboard, then run one of these commands to download</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">the patch and apply it. Hat tip to @chrisjlee for making me reconsider curl.</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Apply</span>
<span class="org-variable-name">alias cap</span>=<span class="org-string">'curl $(pbpaste) | git apply -v'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Apply and stage</span>
<span class="org-variable-name">alias cape</span>=<span class="org-string">'curl $(pbpaste) | git apply -v --index'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Apply with `patch'</span>
<span class="org-variable-name">alias capp</span>=<span class="org-string">'curl $(pbpaste) | patch -p1'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Reverse apply</span>
<span class="org-variable-name">alias carp</span>=<span class="org-string">'curl $(pbpaste) | git apply -Rv'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Reverse apply and stage</span>
<span class="org-variable-name">alias carpe</span>=<span class="org-string">'curl $(pbpaste) | git apply -Rv --index'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Verify patch</span>
<span class="org-variable-name">alias cav</span>=<span class="org-string">'curl $(pbpaste) | git apply -v --check'</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Verify patch with `patch'</span>
<span class="org-variable-name">alias capv</span>=<span class="org-string">'curl $(pbpaste) | patch -p1 --dry-run'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf9694b1" class="outline-3">
<h3 id="orgf9694b1">PUBLISH - Prepare a release</h3>
<div class="outline-text-3" id="text-orgf9694b1">
<p>
See <a href="https://github.com/aiidateam/aiida-core/wiki/How-to-make-a-new-release">https://github.com/aiidateam/aiida-core/wiki/How-to-make-a-new-release</a>
</p>
</div>

<div id="outline-container-org437d3a2" class="outline-4">
<h4 id="org437d3a2">ChangeLog</h4>
<div class="outline-text-4" id="text-org437d3a2">
<p>
Generate the ChangeLog (for your <a href="https://keepachangelog.com/">CHANGELOG.md</a>) with all commit message since the
last tag.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Detailed list of changes.</span>
    <span class="org-variable-name">changelog</span> = !sh -c <span class="org-string">'git log --no-merges --pretty=format:\"* %s\" $(git last-tag)...'</span> -
    <span class="org-variable-name">changelog-org</span> = !sh -c <span class="org-string">'git log --no-merges --pretty=format:\"- %s\" $(git last-tag)...'</span> -
</pre>
</div>

<p>
XXX git log &#x2013;pretty=format:&ldquo;- %s&rdquo; 2019.10.10&#x2026;HEAD displays too many entries on mcpflow repo
</p>

<p>
Use it like this:
</p>

<div class="org-src-container">
<pre class="src src-shell">git changelog &lt;first-tag-name&gt; &lt;last-tag-name&gt;
</pre>
</div>

<p>
See also
</p>
<ul class="org-ul">
<li><a href="https://github.com/github-changelog-generator/github-changelog-generator">https://github.com/github-changelog-generator/github-changelog-generator</a></li>
<li><a href="https://github.com/github-changelog-generator/github-changelog-generator/wiki/Alternatives">https://github.com/github-changelog-generator/github-changelog-generator/wiki/Alternatives</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3fe8760" class="outline-4">
<h4 id="org3fe8760">Release assets</h4>
<div class="outline-text-4" id="text-org3fe8760">
<p>
Generate <code>zip</code> archived source code from the given Git tag.
</p>

<p>
I usfe this when zipping the current branch with the name of the zip file as the
current tag.  Useful for uploading to Elasticbeanstalk.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">current-tag</span> = tag --points-at HEAD
    <span class="org-variable-name">zip</span> = <span class="org-string">"!f() { git archive --format=zip -o $(git current-tag).zip HEAD; }; f"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">export-branch</span> = !git format-patch --stdout $1 &gt; ~/$(git current-branch).diff
</pre>
</div>

<p>
Save a repo (for example, <code>HEAD</code> or <code>master</code> &#x2013; or any other branch to archive, if
you&rsquo;ve already checked it out) as a tarball:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">export-zip</span> = archive -o latest.zip
    <span class="org-variable-name">export-tgz</span> = archive -o latest.tar.gz -9
</pre>
</div>

<p>
Note that the <i>output format</i> is inferred by the extension of the output file.
</p>
</div>

<div id="outline-container-orgd3cdf3c" class="outline-5">
<h5 id="orgd3cdf3c">Branch point</h5>
<div class="outline-text-5" id="text-orgd3cdf3c">
<p>
<a href="https://stackoverflow.com/questions/1527234/finding-a-branch-point-with-git">https://stackoverflow.com/questions/1527234/finding-a-branch-point-with-git</a>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">oldest-ancestor</span> = !zsh -c <span class="org-string">'diff --old-line-format='' --new-line-format='' &lt;(git rev-list --first-parent "${1:-master}") &lt;(git rev-list --first-parent "${2:-HEAD}") | head -1'</span> -
    <span class="org-variable-name">branch-diff</span> = <span class="org-string">'!sh -c "git diff $(git oldest-ancestor).."'</span>
    <span class="org-variable-name">branch-log</span> = <span class="org-string">'!sh -c "git log $(git oldest-ancestor).."'</span>

    <span class="org-variable-name">diverges</span> = !sh -c <span class="org-string">'git rev-list --boundary "${1:-HEAD}"..."${2:-master}" | grep "^-" | cut -c2-'</span>
</pre>
</div>

<p>
When you use three dots (&#x2026;), <code>git diff</code> finds the merge-base between the left
and right side commit SHAs (as obtained from the names, or defaulting to <code>HEAD</code>)
and substitutes that in for the left-side SHA. The right-side SHA (as resolved
from the name) remains intact.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Best common ancestor (when it was branched off).</span>
    <span class="org-variable-name">mbase</span> = !git show --summary $(git merge-base origin/$1 $(git current-branch))
<span class="org-comment-delimiter"># </span><span class="org-comment">git merge-base --fork-point master</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">git merge-base --all r1 r2</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">export-commit</span> = <span class="org-string">"!f() { git changed-files ${1:-HEAD} | xargs zip -9 $(git repo-slug)-commit-${1:-HEAD}.zip; }; f"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">View raw commit.</span>
    <span class="org-variable-name">email-patch</span> = XXX git format-patch $(git current-branch).patch

    <span class="org-variable-name">plain-diff</span> = !git branch-diff &gt; $(git current-branch).diff
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org6e501e0" class="outline-3">
<h3 id="org6e501e0">PUBLISH - Tag</h3>
<div class="outline-text-3" id="text-org6e501e0">
<p>
When tagging releases in a version control system, the tag for a version should
be <code>X.Y.Z</code> (<b>without</b> prefix <code>v</code>).  The advantages of <code>X.Y.Z</code> are that gitweb or GitHub
can automatically offer a tarball or zip download of the form
<code>packagename-$tag.tar.gz</code> (and it&rsquo;s quite established that a tarball should be
named <code>package-X.Y.Z.tar.gz</code>).
</p>

<p>
Savoir quels sont les commits de ma branche courante depuis le dernier tag, afin
de savoir ce qu&rsquo;embarquera la « prochaine release » de mon projet.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">le dernier tag, ainsi que la liste des commits ayant eu lieu depuis sur la</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">branche courante.</span>
    <span class="org-variable-name">unreleased</span> = !git log --oneline $(git last-tag)...HEAD &amp;&amp; git last-tag
</pre>
</div>

<p>
You can do a lot better with:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">releases</span> = log --decorate --no-merges --all --simplify-by-decoration --oneline --graph
    <span class="org-comment-delimiter"># </span><span class="org-comment">XXX Add date</span>

    <span class="org-variable-name">show-tree</span> = log --decorate --all --simplify-by-decoration --oneline --date=short --graph
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd09bbab" class="outline-3">
<h3 id="orgd09bbab">Debugging</h3>
<div class="outline-text-3" id="text-orgd09bbab">
<p>
Sometimes it&rsquo;s nice to see what is going on under the hood. Try this alias:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">debug</span> = <span class="org-string">"!set -x; GIT_TRACE=2 GIT_CURL_VERBOSE=2 GIT_TRACE_PERFORMANCE=2 GIT_TRACE_PACK_ACCESS=2 GIT_TRACE_PACKET=2 GIT_TRACE_PACKFILE=2 GIT_TRACE_SETUP=2 GIT_TRACE_SHALLOW=2 git"</span>
</pre>
</div>

<p>
Just insert <code>debug</code> between <code>git</code> and whatever would usually follow; for example:
</p>

<div class="org-src-container">
<pre class="src src-shell">git debug changed
</pre>
</div>
</div>
</div>

<div id="outline-container-org4dcfbf8" class="outline-3">
<h3 id="org4dcfbf8">Abbreviations</h3>
<div class="outline-text-3" id="text-org4dcfbf8">
<p>
Basic shortcuts.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">cp</span> = cherry-pick -x
    <span class="org-variable-name">pick</span> = cherry-pick -s

    <span class="org-comment-delimiter"># </span><span class="org-comment">cherry-pick - apply the changes introduced by some existing commits; useful for moving small chunks of code between branches.</span>
    <span class="org-variable-name">cp</span> = cherry-pick

    <span class="org-comment-delimiter"># </span><span class="org-comment">cherry-pick without making a commit, and when when recording the commit, append a line that says "(cherry picked from commit ...)"</span>
    <span class="org-variable-name">cp-nx</span> = cherry-pick --no-commit -x
</pre>
</div>

<p>
This command has some useful parameters:
</p>
<ul class="org-ul">
<li>-e to edit git message</li>
<li>-x to add a line &ldquo;Cherry-picked commit&rdquo; in the commit message</li>
<li>&#x2013;no-commit or -n to apply the commit changes in the unstaged area (unstead of
creating a commit in the branch)</li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">h</span> = help
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb3846d3" class="outline-3">
<h3 id="orgb3846d3">Show the path to root directory of Git repo</h3>
<div class="outline-text-3" id="text-orgb3846d3">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Get the path cleaned up.</span>
    <span class="org-variable-name">root</span> = !pwd -P
</pre>
</div>

<div class="note">
<p>
This works because Shell aliases are always executed in the top-level directory.
</p>

</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">root</span> = rev-parse --show-toplevel
    <span class="org-variable-name">root-relative</span> = rev-parse --show-prefix
</pre>
</div>
</div>
</div>

<div id="outline-container-org11fe4bd" class="outline-3">
<h3 id="org11fe4bd">Sync</h3>
<div class="outline-text-3" id="text-org11fe4bd">
<p>
Fetch Git objects from upstream and update local branches.
</p>

<ul class="org-ul">
<li>If the local branch is outdated, fast-forward it;</li>
<li>If the local branch contains unpushed work, warn about it;</li>
<li>If the branch seems merged and its upstream branch was deleted, delete it.</li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Pull then push current branch.</span>
    <span class="org-variable-name">sync</span> = !git pull &amp;&amp; git push
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">sync</span> = !git update &amp;&amp; git co master &amp;&amp; git pull &amp;&amp; git commit @{-1}
</pre>
</div>

<p>
That&rsquo;s rather basic &#x2013; it doesn&rsquo;t actually rebase my branch that I&rsquo;m on.
</p>

<p>
Let&rsquo;s do a slightly different command: <code>resync</code>
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">git resync -&gt; sync repository and rebase current branch.</span>
    <span class="org-variable-name">resync</span> = !sh -c <span class="org-string">'git checkout master &amp;&amp; git fetch &amp;&amp; git reset --hard origin/master &amp;&amp; git rebase master'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org39415f1" class="outline-3">
<h3 id="org39415f1">Cherrypick style recording</h3>
<div class="outline-text-3" id="text-org39415f1">
<p>
Ask interactively which patch hunk to commit, and then do the commit:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">record</span> = !sh -c <span class="org-string">'(git add -p -- $@ &amp;&amp; git commit) || git reset'</span> --
</pre>
</div>

<p>
It will not only do <code>git add -p</code> (with an optional file list), but it will also
immediately do the <code>commit</code>. Upon abandonment of either the add or the commit, it
will <code>reset</code> the index.
</p>
</div>
</div>

<div id="outline-container-orgb8221a9" class="outline-3">
<h3 id="orgb8221a9">Dangling</h3>
<div class="outline-text-3" id="text-orgb8221a9">
<ul class="org-ul">
<li>Dangling blob = Change(s) that made it to the staging area/index but never got
committed. One thing that is amazing with Git is that once it gets added to
the staging area, you can always get it back because these blobs behave like
commits!!</li>

<li>Dangling commit = A commit that isn&rsquo;t linked to any branch or tag either
directly or by any of its ancestors. You can get these back too!</li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">lost</span> = <span class="org-string">"!git fsck | awk '/dangling commit/ {print $3}' | git show --format='SHA: %C(yellow)%h%C(reset)  %s' --stdin | awk '/SHA/ {sub(\"SHA: \", \"\"); print}'"</span>
    <span class="org-variable-name">lost</span> = <span class="org-string">"!git fsck | awk '/dangling commit/ {print $3}' | git show --format='SHA1: %C(yellow)%h%Creset %f' --stdin | awk '/SHA1/ {sub(\"SHA1: \", \"\"); print}'"</span>

<span class="org-variable-name">zopa</span> = !git log --graph --decorate --pretty=oneline --abbrev-commit --all $(git fsck --no-reflogs | grep commit | cut -d\\  -f3)
</pre>
</div>
</div>
</div>

<div id="outline-container-org033df36" class="outline-3">
<h3 id="org033df36"><span class="todo TODO">TODO</span> To sort out</h3>
<div class="outline-text-3" id="text-org033df36">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">logdate</span> = log --format=format:<span class="org-string">'%ad %d %h %s %an%n'</span> --date=short
    <span class="org-variable-name">branch-date</span> = !<span class="org-string">"sh -c 'for branch in $(git branch --no-merged); do \</span>
<span class="org-string">                               git logdate -1 -r $branch --; \</span>
<span class="org-string">                           done'"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6de9e4" class="outline-3">
<h3 id="orge6de9e4">Git and Subversion</h3>
<div class="outline-text-3" id="text-orge6de9e4">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">spull</span> = svn rebase
    <span class="org-variable-name">spush</span> = svn dcommit
    <span class="org-variable-name">slog</span> = svn log --oneline --show-commit
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">cvs-full-log</span> = log --reverse --pretty=format:<span class="org-string">'%B------------------------------------------------------------------------'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2ad946d" class="outline-2">
<h2 id="org2ad946d">Run on All repositories</h2>
<div class="outline-text-2" id="text-org2ad946d">
<p>
The biggest use I get out of this alias is making sure I have everything
committed. Sometimes I&rsquo;ll work on a project and then forget about it for
a little while without committing. When I want to double-check that I&rsquo;m not
forgetting anything, I run <code>git all status --short</code> to quickly scan which repos
have uncommitted changes that I need to take care of.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">all</span> = <span class="org-string">"!find . -type d -name .git -prune -execdir pwd ';' -execdir git $@ ';' #"</span>

    <span class="org-variable-name">print-reponame-then-run</span> = <span class="org-string">"!f() { echo "</span>======<span class="org-string">"; basename `git rev-parse --show-toplevel`; echo "</span>======<span class="org-string">"; git "</span>$@<span class="org-string">";}; f"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">run commands for each repository in the current directory</span>
    <span class="org-variable-name">allr</span> = <span class="org-string">"!f() { ls -R -d */.git | sed s,/.git,, | xargs -I{} git -C {} print-reponame-then-run "</span>$@<span class="org-string">"; }; f"</span>
</pre>
</div>

<p>
See also <code>git-repos</code>:
<a href="http://osiux.com/2015-01-14-sincronizar-repositorios-git-repos.html">http://osiux.com/2015-01-14-sincronizar-repositorios-git-repos.html</a>
</p>
</div>
</div>

<div id="outline-container-orgfdda98f" class="outline-2">
<h2 id="orgfdda98f">------------------------------------------------------------------------------</h2>
</div>

<div id="outline-container-orgb3f5430" class="outline-2">
<h2 id="orgb3f5430">Repository</h2>
<div class="outline-text-2" id="text-orgb3f5430">
</div>
<div id="outline-container-org3815d16" class="outline-3">
<h3 id="org3815d16">Create a Git repository locally</h3>
<div class="outline-text-3" id="text-org3815d16">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">create-local-repository</span> = !git init \
                                   &amp;&amp; ( [[ -n $(ls) ]] || touch .gitignore ) \
                                   &amp;&amp; git add . \
                                   &amp;&amp; git commit -m \"Initial commit\"
</pre>
</div>

<p>
Remove Git from current project:
</p>

<div class="org-src-container">
<pre class="src src-conf">find . -name <span class="org-string">'.git'</span> -exec rm -rf {} \;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgacb2022" class="outline-3">
<h3 id="orgacb2022">Clone a repository</h3>
<div class="outline-text-3" id="text-orgacb2022">
<p>
Clone an existing repository including all submodules.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">cl</span> = clone --recursive
</pre>
</div>

<div class="tip">
<p>
For <b>passwordless Git pull</b> (permanently authenticating with Git repositories),
<b>use SSH</b> when cloning, and <b>add</b> your <b>public key</b> to the remote server.
</p>

</div>
</div>
</div>

<div id="outline-container-orgb80fcf4" class="outline-3">
<h3 id="orgb80fcf4">Create and add your SSH public key to a repository management platform</h3>
<div class="outline-text-3" id="text-orgb80fcf4">
<p>
<a href="https://docs.gitlab.com/ee/gitlab-basics/create-your-ssh-keys.html">https://docs.gitlab.com/ee/gitlab-basics/create-your-ssh-keys.html</a>
</p>

<p>
It is best practice to use Git over SSH (instead of Git over HTTP).  In order to
use SSH, you will need to:
</p>
</div>

<div id="outline-container-org8a1ae0b" class="outline-4">
<h4 id="org8a1ae0b">Create an SSH key pair on your local computer</h4>
<div class="outline-text-4" id="text-org8a1ae0b">
<p>
Generate a new ED25519 (should always be favored) SSH key pair:
</p>

<pre class="example">
ssh-keygen -t ed25519 -C "email@example.com"
</pre>


<p>
Or, if you want to use RSA:
</p>

<pre class="example">
ssh-keygen -t rsa -b 4096 -C "email@example.com"
</pre>
</div>
</div>

<div id="outline-container-orgd1fd5a6" class="outline-4">
<h4 id="orgd1fd5a6">Add the key to the repository management platform</h4>
</div>

<div id="outline-container-orgbc92f0c" class="outline-4">
<h4 id="orgbc92f0c">Testing that everything is set up correctly</h4>
</div>
</div>

<div id="outline-container-org5b64599" class="outline-3">
<h3 id="org5b64599">Create a new repository in GitHub</h3>
<div class="outline-text-3" id="text-org5b64599">
<p>
<b>Private</b> or <b>public</b> repository?
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">create-repository-gh</span> = <span class="org-string">"!f() { username=$1; repo_slug=$2; \</span>
<span class="org-string">        curl -u \"$1\" \</span>
<span class="org-string">            https://api.github.com/user/repos -d \"{\"name\":\"$2\"}\"; }; f"</span>
</pre>
</div>

<p>
Include a README:
</p>

<div class="org-src-container">
<pre class="src src-conf">git init
git remote add origin git@github.com:$username/$repo_slug.git

echo <span class="org-string">"# ${repo_slug:-Repository name}\n\nDescription"</span> &gt;&gt; README.md
git add README.md
git commit -m <span class="org-string">"Initial commit"</span>

git push -u origin master
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">repo-owner</span> = <span class="org-string">"XXX"</span>
    <span class="org-variable-name">repo-slug</span> = <span class="org-string">"!f() { git remote show origin -n \</span>
<span class="org-string">                            | grep 'Fetch URL:' \</span>
<span class="org-string">                            | sed -E 's#^.*/(.*)$#\\1#' \</span>
<span class="org-string">                            | sed 's#.git$##'; }; f"</span>
</pre>
</div>

<div class="tip">
<p>
The <code>sed</code> strings contain <code>$#</code>, which will be replaced by the number of arguments to
the current script/function (generally 0 for an interactive shell).  This is
part of the basic Bourne shell syntax, so <b>single quotes</b> will be needed under any
<b>Bourne-like shell</b> (even pre-POSIX ones) on any OS.  Read the standard for more
information:
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html">https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html</a>.
</p>

</div>
</div>
</div>

<div id="outline-container-org67c2e36" class="outline-3">
<h3 id="org67c2e36">Open a repository in a web browser</h3>
<div class="outline-text-3" id="text-org67c2e36">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">browse-tree</span> = <span class="org-string">"!f() { URL=$(git config --get remote.origin.url); open ${URL/.git}; }; f"</span>
    <span class="org-variable-name">browse-wiki</span> = XXX
    <span class="org-variable-name">browse-commits</span> = XXX
</pre>
</div>

<p>
XXX open = cygstart?
</p>
</div>
</div>
</div>

<div id="outline-container-org2cd1ca8" class="outline-2">
<h2 id="org2cd1ca8">Source Files</h2>
<div class="outline-text-2" id="text-org2cd1ca8">
</div>
<div id="outline-container-org7d3d104" class="outline-3">
<h3 id="org7d3d104">Search for files</h3>
<div class="outline-text-3" id="text-org7d3d104">
<p>
Search file (by file path) in the current branch.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">find-file</span> = !git ls-tree -r --name-only HEAD | grep -i --color=auto
</pre>
</div>

<p>
Search file in all branches.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">find-file-all</span> = <span class="org-string">"!f() { for branch in $(git for-each-ref --format=\"%(refname)\" refs/heads); do \</span>
<span class="org-string">                            echo \"${branch}:\"; \</span>
<span class="org-string">                                git ls-tree -r --name-only $branch | nl -bn -w3 | grep --color=auto \"$1\"; \</span>
<span class="org-string">                            done; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc6c001c" class="outline-3">
<h3 id="orgc6c001c">Search for code</h3>
<div class="outline-text-3" id="text-orgc6c001c">
<p>
<b>Code search</b> looks through all lines of code of all the files (by the <b>file
contents</b>) from the working directory (and its subdirectories).
</p>

<p>
<a href="https://confluence.atlassian.com/bitbucketserver/search-for-code-in-bitbucket-server-814204781.html">https://confluence.atlassian.com/bitbucketserver/search-for-code-in-bitbucket-server-814204781.html</a>
<a href="https://help.github.com/en/github/searching-for-information-on-github/searching-code">https://help.github.com/en/github/searching-for-information-on-github/searching-code</a>
</p>
</div>

<div id="outline-container-org01dd91e" class="outline-4">
<h4 id="org01dd91e">Search code for exact matches</h4>
<div class="outline-text-4" id="text-org01dd91e">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">search-code</span> = <span class="org-string">"grep -i --line-number --break --heading -C 1"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">ack = '-c color.grep.linenumber="bold yellow"</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">-c color.grep.filename="bold green"</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">-c color.grep.match="reverse yellow"</span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">grep --break --heading --line-number'</span>
</pre>
</div>

<p>
Find all instances of the specified string in code files <b>with a certain file
extension</b>.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">search-code-in-extension</span> = <span class="org-string">"XXX"</span>
</pre>
</div>

<p>
Find all instances of the specified string in code <b>in the specified path</b>.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">search-code-in-path</span> = <span class="org-string">"XXX"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5015469" class="outline-4">
<h4 id="org5015469">Pattern in working directory (and its subdirectories)</h4>
<div class="outline-text-4" id="text-org5015469">
<p>
The advantages of <code>git grep</code> are not only its <b>speed</b>, and the fact it only searches
your project files (i.e. no files in <code>.git</code>), but also that is allows you to
interface with your repository&rsquo;s Git database; for example, for searching:
</p>

<ul class="org-ul">
<li>files registered in the index, rather than the working tree,</li>
<li>for your regexp in some files from another branch (XXX does not work? XXX).</li>
</ul>

<div class="note">
<p>
It doesn&rsquo;t search files that are not revisioned (untracked, excluded/ignored,
etc.).
</p>

</div>

<p>
Example:
</p>

<div class="org-src-container">
<pre class="src src-shell">git grep <span class="org-string">"foo"</span> -- <span class="org-string">'*.java'</span>
</pre>
</div>

<p>
More readable output, <b>with grouping</b> (like Ripgrep, <code>rg</code>, or <code>ack</code>):
</p>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">In all commits, not in all branches!!! Lots of duplicates!!!</span>
<span class="org-variable-name">grep-all</span> = <span class="org-string">"!f() { git rev-list --all | xargs git grep $1; }; f"</span>
</pre>
</div>

<p>
Broader search (<b>case-sensitive</b>), output <b>without grouping</b>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">`-I' = Don't match the pattern in binary files.</span>
    <span class="org-variable-name">g</span> = <span class="org-string">"grep -I"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">Name only.</span>
    <span class="org-variable-name">gno</span> = <span class="org-string">"grep -I --files-with-matches"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfdd2892" class="outline-4">
<h4 id="orgfdd2892">Find files that contain some terms, not necessarily on the same line</h4>
<div class="outline-text-4" id="text-orgfdd2892">
<p>
Match any of these patterns, but print matches only from files that have <i>all</i> of
them (files must have lines that match each of them):
</p>

<div class="org-src-container">
<pre class="src src-shell">git grep --all-match -e &lt;regexp&gt; -e &lt;regexp&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7980de2" class="outline-3">
<h3 id="org7980de2">Undo local changes</h3>
<div class="outline-text-3" id="text-org7980de2">
<p>
See <a href="https://docs.gitlab.com/ee/topics/git/numerous_undo_possibilities_in_git/">https://docs.gitlab.com/ee/topics/git/numerous_undo_possibilities_in_git/</a>
and <a href="http://gitimmersion.com/lab_14.html">http://gitimmersion.com/lab_14.html</a>.
</p>
</div>

<div id="outline-container-org90a3022" class="outline-5">
<h5 id="org90a3022">Before you staged (in unstaged state)</h5>
<div class="outline-text-5" id="text-org90a3022">
<p>
<b>Undo</b> the local changes <b>in the working directory</b>: roll a file back to its last
committed version, removing all the changes detected by Git.
</p>

<div class="tip">
<p>
It can also recover <b>deleted files</b> &#x2013; if the deletion has not been committed.
</p>

</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">unmodify</span> = checkout --
    <span class="org-variable-name">undelete</span> = checkout --
</pre>
</div>

<div class="note">
<p>
The two dashes there (canonically called the &ldquo;bare double dashes&rdquo;) ensure that
the checkout command know that we are trying to roll back a file and not <i>change
branches</i> (the typical usage of the checkout command).
</p>

</div>

<p>
When you grab a file from a previous time, it sits <b>in your index</b>, modified.
</p>
</div>
</div>

<div id="outline-container-orgff1c074" class="outline-5">
<h5 id="orgff1c074">Before you committed (in staged state)</h5>
<div class="outline-text-5" id="text-orgff1c074">
<p>
<b>Remove</b> the specified <b>files from the index</b> (proposed next commit, staging area):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">unstage</span> = reset HEAD --
    <span class="org-variable-name">unadd</span> = reset HEAD --
</pre>
</div>

<p>
<code>unstage</code> is the opposite of <code>git add</code>.  It lets you remove items from the staging
area.  This makes it a very useful tool when you&rsquo;re deciding which files to
stage for a commit.  If you&rsquo;ve accidentally added something to the staging area,
just use <code>unstage</code> to remove it.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf025b9a" class="outline-2">
<h2 id="orgf025b9a">Commits</h2>
<div class="outline-text-2" id="text-orgf025b9a">
</div>
<div id="outline-container-orgcee124b" class="outline-3">
<h3 id="orgcee124b">Create a commit</h3>
<div class="outline-text-3" id="text-orgcee124b">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Shortcut for commit.</span>
    <span class="org-variable-name">ci</span> = commit
</pre>
</div>

<p>
A guide on commit messages:
<a href="https://dev.to/yvonnickfrin/a-guide-on-commit-messages-d8n">https://dev.to/yvonnickfrin/a-guide-on-commit-messages-d8n</a>
</p>

<p>
A useful template for good commit messages (see
<a href="https://medium.com/compass-true-north/writing-good-commit-messages-fc33af9d6321">https://medium.com/compass-true-north/writing-good-commit-messages-fc33af9d6321</a>):
</p>

<p>
Implementing a Strong Code-Review Culture
<a href="https://www.youtube.com/watch?v=PJjmw9TRB7s">https://www.youtube.com/watch?v=PJjmw9TRB7s</a>
</p>

<div class="org-src-container">
<pre class="src src-text"># |&lt;------   50-character subject line   -------&gt;|&lt;-------------------&gt;|
# If applied, this commit will...
# [Add / Fix / Remove / Update / Refactor / Document] [summary]


# |&lt;-----   Optional 72-character wrapped extended description   -----&gt;|
# This should answer:
# - Why is this change necessary?  (goals, use cases, stories, etc.?)
# - How does this change address the issue?  (implementations, algorithms, etc.?)
# - What side effects does this change have?


# Include a link to the ticket, if any.
# Closes #ISSUE_NUMBER


# --- COMMIT END ---
# Emoji can be
#    :star:              Add new feature ...
#    :bug:               Fix bug ...
#    :x:                 Remove ...
#    :hammer_and_wrench: Update ...
#    :recycle:           Refactor code ...
</pre>
</div>

<p>
and you&rsquo;ll be guided into writing concise commit subjects in the imperative
mood &#x2013; a good practice. See rule 5 of Chris Beam&rsquo;s &ldquo;How to write a commit
message&rdquo; for the inspiration of this tip and more reasoning on the use of the
imperative mood.
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">commit</span>]
    <span class="org-variable-name">template</span> = ~/.git_commit_template.txt

[<span class="org-type">alias</span>]
</pre>
</div>

<p>
This is a handy table for labels <a href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md">Angular&rsquo;s commit standards and guidelines</a>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Label</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">feat</td>
<td class="org-left">A new feature</td>
</tr>

<tr>
<td class="org-left">fix</td>
<td class="org-left">A bug fix</td>
</tr>

<tr>
<td class="org-left">style</td>
<td class="org-left">Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)</td>
</tr>

<tr>
<td class="org-left">refactor</td>
<td class="org-left">A code change that neither fixes a bug nor adds a feature</td>
</tr>

<tr>
<td class="org-left">perf</td>
<td class="org-left">A code change that improves performance</td>
</tr>

<tr>
<td class="org-left">test</td>
<td class="org-left">Adding missing or correcting existing tests</td>
</tr>

<tr>
<td class="org-left">chore</td>
<td class="org-left">Changes to the build process or auxiliary tools and libraries such as documentation generation</td>
</tr>

<tr>
<td class="org-left">doc</td>
<td class="org-left">Documentation only changes</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org94751d1" class="outline-3">
<h3 id="org94751d1">Get a commit detail</h3>
<div class="outline-text-3" id="text-org94751d1">
<p>
List all the changed files <b>in a commit</b>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">changed-files</span> = show --pretty=<span class="org-string">"format:"</span> --name-only
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">git changed-files                       <span class="org-comment-delimiter"># </span><span class="org-comment">List files modified in last commit.</span>
git changed-files bada55                <span class="org-comment-delimiter"># </span><span class="org-comment">List files modified in this commit.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga992bc5" class="outline-3">
<h3 id="orga992bc5">Get the diff of a commit</h3>
<div class="outline-text-3" id="text-orga992bc5">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">download-email-patch</span> = XXX git format-patch $(git current-branch).patch
    <span class="org-variable-name">download-plain-diff</span> = !git diff ${1:-HEAD}~ ${1:-HEAD} &gt; ${1:-HEAD}.diff
</pre>
</div>
</div>
</div>

<div id="outline-container-org6460e6d" class="outline-3">
<h3 id="org6460e6d">Get the references the commit has been pushed to (branches and tags)</h3>
<div class="outline-text-3" id="text-org6460e6d">
<p>
List all the branches and tags that contain a specific commit.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Print only refs which contain the commit.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Usage: git where &lt;rev&gt;</span>
    <span class="org-variable-name">where1</span> = for-each-ref --contains
    <span class="org-variable-name">where2</span> = <span class="org-string">"!f() { git for-each-ref --format='%(committerdate) %09 %(authorname) %09 %(refname)' --contains $1 \</span>
<span class="org-string">                         | sort -k5n -k2M -k3n -k4n; }; f"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">git for-each-ref --format='%(color:blue)%(refname)%(color:reset)' --contains 4ec324ff</span>
</pre>
</div>

<p>
XXX See also git-ls-object-refs
</p>

<p>
Filter the list of <b>branches</b> to only those which have the given <b>commit ID</b> among
their ancestors.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Find branches containing commit.</span>
    <span class="org-variable-name">branches-that-contain</span> = <span class="org-string">"branch -a --contains"</span>
</pre>
</div>

<p>
This also includes <b>remote tracking branches</b> in the list, that is &ldquo;local
branches that have a direct relationship to a remote branch&rdquo;.
</p>

<p>
List all <b>tags</b> that contain a specific commit ID:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Find tags containing commit.</span>
    <span class="org-variable-name">tags-that-contain1</span> = tag --contains
    <span class="org-variable-name">tags-that-contain2</span> = <span class="org-string">"!f() { git describe --always --contains $1; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org936a121" class="outline-3">
<h3 id="org936a121">Search for commits</h3>
<div class="outline-text-3" id="text-org936a121">
<div class="note">
<p>
Just for the record &#x2013; searching anything &ldquo;in a branch&rdquo; is not possible due to
the principle of branches.  Branch is only a pointer to a single commit, which
is considered to be &ldquo;the last commit of the branch&rdquo;, and commits itself do not
&ldquo;belong to a branch&rdquo; anyhow else.
</p>

<p>
Therefore, Git cannot determine &ldquo;which branch was which&rdquo; before merge commits.
</p>

</div>

<pre class="example">
curl --request GET --header "PRIVATE-TOKEN: &lt;your_access_token&gt;" https://gitlab.example.com/api/v4/search?scope=commits&amp;search=bye
curl --request GET --header "PRIVATE-TOKEN: &lt;your_access_token&gt;" https://gitlab.example.com/api/v4/groups/3/search?scope=issues&amp;search=file
</pre>
</div>

<div id="outline-container-org8656de5" class="outline-4">
<h4 id="org8656de5">Search within Commit Messages</h4>
<div class="outline-text-4" id="text-org8656de5">
<p>
You can find commits that contain particular words in the commit message. For
example, <code>fix typo</code> matches commits containing the words <code>fix</code> <b>and</b> <code>typo</code>.
</p>

<p>
If you want to find all commits (<b>across all branches</b>, showing names and status
of changed files) where <b>log message</b> matches a specified pattern (regular
expression), use <code>find</code>.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">findc1</span> = <span class="org-string">"log --decorate -i --all --date=short --grep"</span>
    <span class="org-variable-name">findc2</span> = <span class="org-string">"!f() { git log --decorate --grep=$1 -i --all --date=short; }; f"</span>
</pre>
</div>

<div class="tip">
<p>
If you only add options to one single <code>git</code> command, there is no benefit to the
function wrapper.  On the contrary, you can&rsquo;t add other options.
</p>

</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Search for commits (Filter by commit message).</span>
    <span class="org-variable-name">search-commits</span> = <span class="org-string">"!f() { str=\"git log --all-match\"; \</span>
<span class="org-string">                             for var in \"$@\"; do \</span>
<span class="org-string">                                 str=\"$str --grep '$var'\"; \</span>
<span class="org-string">                             done; \</span>
<span class="org-string">                             eval $str; }; f"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">curl -H <span class="org-string">"Accept: application/vnd.github.cloak-preview"</span> \
    <span class="org-variable-name">https://api.github.com/search/commits\?q\</span>=repo:fniessen/org-html-themes+local+css \
    | jq <span class="org-string">'.items[] | {commit}'</span>
</pre>
</div>

<p>
Here&rsquo;s the alias which simply loops over each argument and calls <code>git
log --grep</code>. Equivalent of calling <code>git log --grep &lt;a&gt; --grep &lt;b&gt; --grep &lt;c&gt; ...</code>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">search</span> = <span class="org-string">"!f() { for l in \"$@\"; do git log --grep \"$l\"; done; }; f"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">XXX Add i, all, date short...</span>
</pre>
</div>



<p>
You may want to add history to search through the whole repository, by adding
rev-list to your git log:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">search2</span> = <span class="org-string">"!f() { git log --grep \"$1\" $(git rev-list --all); }; f"</span>
</pre>
</div>

<p>
Add <code>--name-status</code> to show only names and status of <b>changed files</b>.
</p>

<p>
To find commits that match <b>either</b> of patterns (implicit <b>OR</b> semantic), you can
use:
</p>

<div class="org-src-container">
<pre class="src src-shell">git log --grep=&lt;foo&gt; --grep=&lt;bar&gt;
</pre>
</div>

<p>
To find <i>commit</i> that has <b>both</b> line matching first and line matching second
somewhere, use the <b>AND</b> semantic:
</p>

<div class="org-src-container">
<pre class="src src-shell">git log --all-match --grep=&lt;foo&gt; --grep=&lt;bar&gt;
</pre>
</div>

<p>
Show the <b>last commit</b> whose <b>message matches a regexp</b>:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Show the LATEST commit which has the text "fix: font" in its message.</span>
git log :/<span class="org-string">"fix: font"</span>
git show :/<span class="org-string">"fix: font"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Show the LATEST merge commit.</span>
git show :/^Merge
</pre>
</div>
</div>
</div>

<div id="outline-container-orge892abf" class="outline-4">
<h4 id="orge892abf">Search by Author</h4>
<div class="outline-text-4" id="text-orge892abf">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">search-author</span> = <span class="org-string">"log --decorate -i --all --date=short --author"</span>
    <span class="org-variable-name">recap</span> = !git log --all --oneline --no-merges --author=${1-$(git config user.email)}
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d54ac5" class="outline-4">
<h4 id="org4d54ac5">Search on File Changes</h4>
<div class="outline-text-4" id="text-org4d54ac5">
</div>
<div id="outline-container-org64bde37" class="outline-5">
<h5 id="org64bde37">Search string (added/removed) in code</h5>
<div class="outline-text-5" id="text-org64bde37">
<p>
If you want to find all commits where a <b>string</b> was <b>added or removed</b> in the <i>file
contents</i> (to be more exact: where its <b>number of occurrences changed</b> in the
source file), i.e. search the <i>commit contents</i>, use <code>-S</code>.
</p>

<p>
You can dig up commits that have, for example,
</p>
<ul class="org-ul">
<li>removed calls to a specific function, or</li>
<li>added a certain CSS classname.</li>
</ul>

<div class="warning">
<p>
If the number of times &ldquo;foo&rdquo; appears in the file is the same before and after
a commit, it will not match using <code>-S "foo"</code>.
</p>

</div>

<p>
In other words, to find the following commit:
</p>

<div class="org-src-container">
<pre class="src src-diff"><span class="org-diff-hunk-header">@@ -4211,9 +4211,10 @@</span><span class="org-diff-function"> public class MovesHandler extends EventHandlerBase {</span>
<span class="org-diff-context">      */</span>

<span class="org-diff-context">     private boolean actionsNotCompleted(final EventHandlerContext context, final String mo_id) {</span>
<span class="org-diff-context">         final Object found_mo_id =</span>
<span class="org-diff-context">                 selectDbValue(context, "activity_log", "activity_log_id", "mo_id=" + mo_id</span>
<span class="org-diff-indicator-removed">-</span><span class="org-diff-removed">                    + " AND status NOT IN ('COMPLETED-V','REJECTED','CANCELLED')");</span>
<span class="org-diff-indicator-added">+</span><span class="org-diff-added">                    + " AND status NOT IN ('COMPLETED-V','CLOSED','REJECTED','CANCELLED')");</span>
<span class="org-diff-context">         return (found_mo_id != null);</span>
     }
</pre>
</div>

<p>
you <b>need to search on &rsquo;CLOSED&rsquo;</b>.  Searching on &rsquo;COMPLETED-V&rsquo; would not bring back
that commit!
</p>

<div class="org-src-container">
<pre class="src src-shell">git log --all -S <span class="org-string">"foo"</span> --since=<span class="org-string">"1 week ago"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">whatwhen</span> = log --decorate --date=short -p -S
</pre>
</div>

<p>
Prettier <code>whatchanged</code> with full diffs based on text search:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Find commits by source code.</span>
    <span class="org-variable-name">search-commits-contents</span> = <span class="org-string">"!f() { git log --decorate --date=short -S $1; }; f"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">XXX Does not work for strings with spaces in them...</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">grep4d</span> = !sh -c <span class="org-string">'git log -p -S'</span>$1<span class="org-string">' $2'</span> -
<span class="org-comment-delimiter"># </span><span class="org-comment">Not the best example, but: git grep4d CLOSED '*.java'</span>
</pre>
</div>

<p>
By default, <code>-S</code> accepts a string, but can be modified to accept a <b>regexp</b> with
<code>--pickaxe-regex</code>.
</p>
</div>
</div>

<div id="outline-container-orgc0eed0d" class="outline-5">
<h5 id="orgc0eed0d">Search regexp (added/removed/changed?) in code</h5>
<div class="outline-text-5" id="text-orgc0eed0d">
<p>
String contained in added/removed lines from Commit contents (Diff)
</p>

<p>
With the <code>-G</code> option, the commit is shown in the log if your <b>regexp</b> search matches
any <b>line</b> that was added, removed, or changed.
</p>

<div class="org-src-container">
<pre class="src src-shell">git log --all -G <span class="org-string">"foo"</span> --since=<span class="org-string">"1 week ago"</span>
git log --all -G <span class="org-string">"foo"</span> --full-history --since=<span class="org-string">"1 week ago"</span>
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc690c89" class="outline-3">
<h3 id="orgc690c89">Push</h3>
</div>

<div id="outline-container-org4ab818c" class="outline-3">
<h3 id="org4ab818c">Undo changes</h3>
<div class="outline-text-3" id="text-org4ab818c">
<p>
See <a href="https://docs.gitlab.com/ee/topics/git/numerous_undo_possibilities_in_git/">https://docs.gitlab.com/ee/topics/git/numerous_undo_possibilities_in_git/</a>
and <a href="http://gitimmersion.com/lab_16.html">http://gitimmersion.com/lab_16.html</a>.
</p>
</div>

<div id="outline-container-org00805fa" class="outline-4">
<h4 id="org00805fa">Undo local changes which were not pushed to remote repository (after you committed)</h4>
</div>

<div id="outline-container-orge3b7985" class="outline-4">
<h4 id="orge3b7985">Undo changes after they are pushed to remote repository</h4>
<div class="outline-text-4" id="text-orge3b7985">
</div>
<div id="outline-container-org2584ddc" class="outline-5">
<h5 id="org2584ddc">Without history modification (preferred way)</h5>
<div class="outline-text-5" id="text-org2584ddc">
<p>
git revert?
</p>
</div>
</div>

<div id="outline-container-org5ac0163" class="outline-5">
<h5 id="org5ac0163">With history modification (requires coordination with team and force pushes)</h5>
</div>
</div>
</div>
</div>

<div id="outline-container-orge751e73" class="outline-2">
<h2 id="orge751e73">Branches</h2>
<div class="outline-text-2" id="text-orge751e73">
</div>
<div id="outline-container-org1779110" class="outline-3">
<h3 id="org1779110">Branching model</h3>
<div class="outline-text-3" id="text-org1779110">
<p>
Consistent <b>naming conventions</b> (from the <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">Gitflow</a> Git workflow):
</p>

<ul class="org-ul">
<li><p>
<code>master</code> (used for <b>production releases</b>)
</p>

<p>
It should be the most stable branch. Merges commits from develop, release and
hotfix branches.
</p></li>

<li><p>
<code>develop</code> (used as integration branch for <b>&ldquo;next release&rdquo; development</b>)
</p>

<p>
It has the newest features and fixes. Merges commits from feature and bugfix
branches.
</p></li>

<li><p>
prefix <code>feature/MSW-709-add-support-for-webm</code> (for new <b>features</b>, such as Jira
<b>stories</b>)
</p>

<p>
These branches are short lived as they only exist while a specific feature is
being developed. Usually does not merge any commits unto it, unless there is
another feature derived from it.
</p></li>

<li><p>
prefix <code>bugfix/</code> (typically used to fix Release branches, such as Jira <b>bugs</b>)
</p>

<p>
Used to fix bugs found that either exist in develop but have not made it into
production, or that do exist in production but can wait until the next
release. These branches merge into develop.
</p></li>

<li>prefix <code>release/2018-12-24</code> (used for preparing and testing <b>release</b> tasks)</li>

<li><p>
prefix <code>hotfix/fix-123-for-production</code> (used to <b>urgently fix</b> bugs on <b>production</b>,
that have high impact)
</p>

<p>
Used to fix pressing issues that are found in production. Hotfix branches
merge directly to master.
</p></li>
</ul>

<p>
Alternatives:
</p>
<ul class="org-ul">
<li><a href="https://about.gitlab.com/blog/2014/09/29/gitlab-flow/">https://about.gitlab.com/blog/2014/09/29/gitlab-flow/</a></li>
<li><a href="https://trunkbaseddevelopment.com/">https://trunkbaseddevelopment.com/</a> (and
<a href="https://dev.to/alediaferia/git-tips-for-trunk-based-development-1i1g">https://dev.to/alediaferia/git-tips-for-trunk-based-development-1i1g</a>)</li>
</ul>
</div>
</div>

<div id="outline-container-org2046463" class="outline-3">
<h3 id="org2046463">Create a branch</h3>
<div class="outline-text-3" id="text-org2046463">
<p>
Create a new branch, and then switch to it:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">create-branch</span> = checkout -b
</pre>
</div>

<div class="note">
<p>
To create a branch from a specific commit:
</p>

<pre class="example">
git create-branch test_branch 7e09ef09
</pre>


<p>
Otherwise you&rsquo;re in a &ldquo;detached head&rdquo; state, which can have odd results.
The branch method is at least a little more stable.
</p>

</div>

<div class="note">
<p>
I usually branch off from the commit before the offending
commit and stay there until things are resolved (unless I&rsquo;m able to
resolve it myself).
</p>

<p>
Or I branch off <code>master</code> and revert the offending commit until things are
resolved, ie. like so
 git checkout master
 git create-branch sb-master
 git revert sha1-of-offending-commit
</p>

</div>
</div>
</div>

<div id="outline-container-org2b5f5b0" class="outline-3">
<h3 id="org2b5f5b0">Publish a branch</h3>
<div class="outline-text-3" id="text-org2b5f5b0">
<p>
Push the <code>&lt;current-branch&gt;</code> branch to the <code>origin</code> remote and set up tracking:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Push current branch to remote server (create a copy of the current branch</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">on the remote "origin", and set it to track the upstream branch).</span>
    <span class="org-variable-name">publish</span> = !git push -u origin $(git current-branch)

    <span class="org-comment-delimiter"># </span><span class="org-comment">Delete current branch on remote server.</span>
    <span class="org-variable-name">unpublish</span> = !git delete-remote-branch $(git current-branch)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Get the current branch name (not so useful in itself, but used in other</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">aliases).  Works well in detached mode.</span>
    <span class="org-variable-name">current-branch</span> = name-rev --name-only HEAD
    <span class="org-comment-delimiter"># </span><span class="org-comment">current-branch = branch --show-current # v2.22+</span>
</pre>
</div>

<p>
Then:
</p>
<ol class="org-ol">
<li><a href="#orgfee218a">Create a pull request</a>.</li>
<li>Your team lead will review the code &amp; merge it to the main branch.</li>
</ol>
</div>
</div>

<div id="outline-container-orgd2ecc6c" class="outline-3">
<h3 id="orgd2ecc6c">List branches</h3>
<div class="outline-text-3" id="text-orgd2ecc6c">
</div>
<div id="outline-container-orgb0672be" class="outline-4">
<h4 id="orgb0672be">Show all branches</h4>
<div class="outline-text-4" id="text-orgb0672be">
<p>
<b>List all branches</b> (both local remote-tracking and local branches), showing SHA
and commit subject line for each head, along with the name of the upstream
branch (if any).
</p>

<p>
(Sort by Last updated)
</p>

<pre class="example">
git for-each-ref --format="%(refname:short) %(upstream:track)" refs/heads
</pre>


<p>
fco=&ldquo;!f() { git branch -a -vv &#x2013;color=always &#x2013;format=&rsquo;%(refname)&rsquo; | sed &rdquo;s_refs/heads/__&ldquo; | sed &rdquo;s_refs/remotes/__&ldquo; | fzf &#x2013;query=&rdquo;$@&ldquo; &#x2013;height=40% &#x2013;ansi &#x2013;tac &#x2013;color=16 &#x2013;border | awk &rsquo;{print $1}&rsquo; | xargs git co; }; f&rdquo;
(fuzzy checkout a git branch)
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Show local and remote branches.</span>
    <span class="org-variable-name">branches</span> = branch -a -vv
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">be</span> = branch --edit-description
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">track</span> = for-each-ref --format=<span class="org-string">'%(refname:short) &lt;- %(upstream:short)'</span> refs/heads
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Show info for branches which have been checked out locally...</span>
    <span class="org-variable-name">br</span> = for-each-ref \
             <span class="org-variable-name">--sort</span>=-committerdate refs/heads/ \
             <span class="org-variable-name">--format</span>=<span class="org-string">'  %(color:green)%(committerdate:short)%(color:reset) %(HEAD) %(color:green bold)%(refname:short)%(color:reset) %(color:red bold)%(upstream:track)%(color:reset) %(color:yellow)%(objectname:short)%(color:reset) %(contents:subject) %(color:blue)&lt;%(authorname)&gt;%(color:reset)'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">recent</span> = for-each-ref \
                 <span class="org-variable-name">--sort</span>=-committerdate refs/heads/ \
                 <span class="org-variable-name">--format</span>=<span class="org-string">'%(authordate:short) %(color:red)%(objectname:short) %(color:yellow)%(refname:short)%(color:reset) (%(color:green)%(committerdate:relative)%(color:reset))'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Sort by date for branches; can be useful for spring cleaning</span>
    <span class="org-variable-name">refs-by-date</span> = for-each-ref --sort=-committerdate --format=<span class="org-string">'%(committerdate:short) %(refname:short)'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb1fe7cc" class="outline-4">
<h4 id="orgb1fe7cc">Show my branches</h4>
</div>

<div id="outline-container-org89a4b53" class="outline-4">
<h4 id="org89a4b53">Show active branches</h4>
</div>

<div id="outline-container-org8ff9c8f" class="outline-4">
<h4 id="org8ff9c8f">Show merged branches</h4>
<div class="outline-text-4" id="text-org8ff9c8f">
<p>
List branches whose tips are reachable from the specified commit (HEAD if not
specified).
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">branches-merged</span> = <span class="org-string">"!f() { git branch --merged | grep -v '\\*'; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0176b01" class="outline-4">
<h4 id="org0176b01">Show stale branches</h4>
<div class="outline-text-4" id="text-org0176b01">
<p>
&ldquo;Stale branches&rdquo; are Git branches <b>without commits</b> for the last few months.  This
generally indicates old, unmaintained branches for unreleased, incomplete
features.
</p>

<p>
For GitHub, such period of inactivity is <b>3 months</b> (see
<a href="https://help.github.com/articles/viewing-branches-in-your-repository/">https://help.github.com/articles/viewing-branches-in-your-repository/</a>).
</p>
</div>
</div>
</div>

<div id="outline-container-orgb839594" class="outline-3">
<h3 id="orgb839594">Switch branches</h3>
<div class="outline-text-3" id="text-orgb839594">
<p>
Checkout <a href="http://nvie.com/posts/a-successful-git-branching-model/"><b>common branches</b></a> (useful if you have feature branches):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">master</span> = checkout master
    <span class="org-variable-name">develop</span> = checkout develop
</pre>
</div>
</div>
</div>

<div id="outline-container-orgce74c3b" class="outline-3">
<h3 id="orgce74c3b">Delete a branch</h3>
<div class="outline-text-3" id="text-orgce74c3b">
</div>
<div id="outline-container-org27aeeeb" class="outline-4">
<h4 id="org27aeeeb">Delete a local branch</h4>
<div class="outline-text-4" id="text-org27aeeeb">
<p>
Delete a <b>local</b> branch:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Politely ask Git to delete a local branch.</span>
    <span class="org-variable-name">delete-local-branch</span> = branch -d
</pre>
</div>

<div class="note">
<p>
The <code>-d</code> (<code>--delete</code>) option only deletes the branch if it has already been fully
merged in its upstream branch.
</p>

<p>
You could also use <code>-D</code>, which is an alias for <code>--delete --force</code>, which deletes the
branch &ldquo;irrespective of its merged status.&rdquo;
</p>

</div>
</div>
</div>

<div id="outline-container-org856bb04" class="outline-4">
<h4 id="org856bb04">Delete the merged branches</h4>
<div class="outline-text-4" id="text-org856bb04">
<p>
<code>delete-merged-branches</code> <b>removes</b> (in bulk) <b>all</b> the <b>local branches</b> that have been
<b>merged to the current branch</b> that you are in.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Delete fully merged branches.</span>
    <span class="org-variable-name">delete-merged-branches</span> = <span class="org-string">"!f() { git branch --no-color --merged | grep -v '\\*' | \</span>
<span class="org-string">                                     egrep -v \"(master|develop)\" | \</span>
<span class="org-string">                                     xargs -n 1 git delete-local-branch; }; f"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment"># https://stackoverflow.com/questions/6127328/how-can-i-delete-all-git-branches-which-have-been-merged</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">sweep = '!git branch --merged $([[ $1 != "-f" ]] &amp;&amp; git rev-parse master) | \</span>
    <span class="org-comment-delimiter">#           </span><span class="org-comment">egrep -v "(^\*|^\s*(master|develop)$)" | \</span>
    <span class="org-comment-delimiter">#           </span><span class="org-comment">xargs git branch -d'</span>
</pre>
</div>

<p>
Not &ldquo;fully merged&rdquo; means the branch you are about to delete contains commits
that are not reachable from any of:
</p>
<ul class="org-ul">
<li>its upstream branch, or</li>
<li><code>HEAD</code> (current branch).</li>
</ul>
<p>
In other words, when you might lose commits.
</p>

<div class="tip">
<p>
In the event that you accidentally delete <code>master</code>, get it back with:
</p>

<pre class="example">
git create-branch master origin/master
</pre>

</div>

<p>
See <a href="http://haacked.com/archive/2014/07/28/github-flow-aliases/">http://haacked.com/archive/2014/07/28/github-flow-aliases/</a>.
</p>

<p>
See
<a href="https://www.oreilly.com/library/view/git-pocket-guide/9781449327507/ch05.html">https://www.oreilly.com/library/view/git-pocket-guide/9781449327507/ch05.html</a>
for the distinction between &ldquo;merged&rdquo; and &ldquo;fully merged&rdquo; branches!
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">delete-merged-remote-branches</span> = <span class="org-string">"XXX"</span>
</pre>
</div>

<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/6127328/how-can-i-delete-all-git-branches-which-have-been-merged">https://stackoverflow.com/questions/6127328/how-can-i-delete-all-git-branches-which-have-been-merged</a></li>
<li><a href="https://github.com/arc90/git-sweep">https://github.com/arc90/git-sweep</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgf145ad5" class="outline-4">
<h4 id="orgf145ad5">Delete remote branch</h4>
<div class="outline-text-4" id="text-orgf145ad5">
<p>
Delete a <b>remote</b> branch:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Delete remote branch.</span>
    <span class="org-variable-name">delete-remote-branch</span> = push origin --delete
</pre>
</div>
</div>
</div>

<div id="outline-container-org080ce61" class="outline-4">
<h4 id="org080ce61">Delete a branch locally and on the <code>origin</code> remote</h4>
<div class="outline-text-4" id="text-org080ce61">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">nuke-branch</span> = <span class="org-string">"!f() { git delete-local-branch $1 \</span>
<span class="org-string">                              &amp;&amp; git delete-remote-branch $1; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd665ad2" class="outline-4">
<h4 id="orgd665ad2">Delete all orphaned branches (that no longer exist at remote)</h4>
<div class="outline-text-4" id="text-orgd665ad2">
<p>
Once you delete the branch from the remote, you can <b>remove all orphaned
remote-tracking branches that you have locally</b>, in <code>.git/refs/remotes/origin</code>, but
are <b>no more present in the remote repository</b> <code>origin</code> with:
</p>

<pre class="example">
git remote prune origin
</pre>


<p>
Use the <code>--dry-run</code> flag to only see what branches will be pruned, but not
actually prune them:
</p>

<pre class="example">
git remote prune origin --dry-run
</pre>


<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Prune deleted branches from all remotes.</span>
    <span class="org-variable-name">prune-all</span> = !git remote | xargs -n 1 git remote prune
    <span class="org-comment-delimiter"># </span><span class="org-comment">'git remote prune' does not understand '--all'.</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">There's no way to tell git remote update to prune orphaned branches?</span>
</pre>
</div>

<div class="tip">
<p>
If you want this to be run automatically every time you fetch/pull:
</p>

<pre class="example">
git config --global fetch.prune true
</pre>

</div>

<p>
or prune individual remote tracking branches with:
</p>

<pre class="example">
git branch -dr branchname
</pre>


<p>
<b>Remove orphaned branches in your local repository</b> that <b>no longer exist in the
remote</b> one (by deleting the local ones that show they are &ldquo;gone&rdquo; in <code>git
branch -vv</code>):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">prune-local-branches</span> = <span class="org-string">"!f() { git branch -vv | grep ': gone]' | \</span>
<span class="org-string">                                   awk '{print $1}' | \</span>
<span class="org-string">                                   xargs git delete-local-branch; }; f"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb2b623a" class="outline-3">
<h3 id="orgb2b623a">Rename a branch</h3>
<div class="outline-text-3" id="text-orgb2b623a">
<p>
Sometimes we name a branch poorly or maybe we thought the name was &ldquo;good&rdquo; but
not meaningful to the work we are doing.
</p>

<p>
To rename a branch <b>locally</b>:
</p>

<ul class="org-ul">
<li>If we are on the branch we want to rename, we can just
<code>git rename-local-branch &lt;newbranch&gt;</code>.</li>

<li>If we are on another branch, we have to use
<code>git rename-local-branch &lt;oldbranch&gt; &lt;newbranch&gt;</code>.</li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">rename-local-branch</span> = branch -m
</pre>
</div>

<p>
XXX Try
</p>
<pre class="example">
git rename-local-branch "#520-application-fee-refunds" "#509-application-fee-refunds"
</pre>

<p>
(see <a href="https://gist.github.com/lttlrck/9628955">https://gist.github.com/lttlrck/9628955</a>)
</p>

<p>
To rename a branch <b>locally and remotely</b>:
</p>

<ol class="org-ol">
<li>Rename the branch locally,</li>
<li>Push the new branch and set local branch to track the new remote, and</li>
<li>Delete the old branch.</li>
</ol>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">rename-branch</span> = <span class="org-string">"!f() { git rename-local-branch $1 $2 \</span>
<span class="org-string">                                &amp;&amp; git push --set-upstream origin $2 \</span>
<span class="org-string">                                &amp;&amp; git delete-remote-branch $1; }; f"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge5e65a1" class="outline-2">
<h2 id="orge5e65a1">Tags</h2>
<div class="outline-text-2" id="text-orge5e65a1">
<p>
Tags give the ability to <b>mark a specific commit</b> in your repository history as
being important.
</p>
</div>

<div id="outline-container-org649a3ef" class="outline-3">
<h3 id="org649a3ef">Create a tag</h3>
<div class="outline-text-3" id="text-org649a3ef">
<p>
While Git supports annotated and lightweight tags, you can only <b>create</b>
</p>
<ul class="org-ul">
<li><b>annotated tags</b> in <i>Bitbucket</i> and in <i>GitLab</i>, and</li>
<li><b>lightweight tags</b> via <i>GitHub</i> interface (for releases).</li>
</ul>

<p>
<b>Annotated tags</b> are <b>regular objects</b> in the repository, which means they have an
author, a date, a message, and can be referred because they have their own SHA
key.
</p>

<p>
<b>Lightweight tags</b> are just pointers to specific commits.  They <b>don&rsquo;t include any
further information</b>.
</p>

<p>
If knowing <b>who</b> tagged <b>what</b> and <b>when</b> is relevant for you, then use annotated
tags. If you <b>just want to tag a specific point in your development</b>, no matter
who and when did that, then lightweight tags are good enough.
</p>

<div class="note">
<p>
Annotated tags are meant for <b>release</b> while lightweight tags are meant for
private or temporary object labels.
</p>

</div>

<p>
Create an annotated tag:
</p>

<div class="org-src-container">
<pre class="src src-shell">git tag -a &lt;tag-name&gt; -m <span class="org-string">'&lt;tag-message&gt;'</span>
</pre>
</div>

<p>
Create a lightweight tag (<i>no message!</i>):
</p>

<div class="org-src-container">
<pre class="src src-shell">git tag &lt;tag-name&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org22bc7b9" class="outline-3">
<h3 id="org22bc7b9">See the commits for a tag</h3>
<div class="outline-text-3" id="text-org22bc7b9">
<p>
See the list of all the commits for that tag.
</p>

<div class="org-src-container">
<pre class="src src-shell">git ls &lt;tag&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org80e0751" class="outline-3">
<h3 id="org80e0751">Push a tag to your repository</h3>
<div class="outline-text-3" id="text-org80e0751">
<p>
Push all your tags (a regular push won&rsquo;t push a tag):
</p>

<div class="org-src-container">
<pre class="src src-shell">git push --tags                         <span class="org-comment-delimiter"># </span><span class="org-comment">Only tags.</span>
git push --tags origin master           <span class="org-comment-delimiter"># </span><span class="org-comment">Code and tags.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b079c4" class="outline-3">
<h3 id="org3b079c4">List the repository tags</h3>
<div class="outline-text-3" id="text-org3b079c4">
<p>
List tags using (better) version sorting (not going from <code>v0.1</code> to <code>v0.10</code>):
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Show verbose output about tags.</span>
    <span class="org-variable-name">tags</span> = tag -l --sort=v:refname -n1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Show annotated and lightweight tags.</span>
git show-ref -d --tags       |
cut -b 42-                   | <span class="org-comment-delimiter"># </span><span class="org-comment">Remove the commit-id.</span>
sort                         |
sed <span class="org-string">'s/\^{}//'</span>               | <span class="org-comment-delimiter"># </span><span class="org-comment">Remove ^{} markings.</span>
uniq -c                      | <span class="org-comment-delimiter"># </span><span class="org-comment">Count identical lines.</span>
sed <span class="org-string">'s/2\ refs\/tags\// a /'</span> | <span class="org-comment-delimiter"># </span><span class="org-comment">2 identicals = annotated.</span>
sed <span class="org-string">'s/1\ refs\/tags\//lw /'</span>
</pre>
</div>

<p>
Show the last tag <i>in the current branch</i>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">last-tag</span> = describe --tags --abbrev=0
    <span class="org-variable-name">checkout-last-tag</span> = !sh -c <span class="org-string">'git checkout $(git last-tag)'</span>
</pre>
</div>

<p>
Show latest annotated tag <i>in all branches</i>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">last-tagged</span> = !git describe --tags $(git rev-list --tags --max-count=1)
</pre>
</div>
</div>
</div>

<div id="outline-container-org940414f" class="outline-3">
<h3 id="org940414f">Rename a tag</h3>
<div class="outline-text-3" id="text-org940414f">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Rename a tag (locally and remotely).</span>
    <span class="org-variable-name">rename-tag</span> = <span class="org-string">"!f() { git tag $2 $1; \</span>
<span class="org-string">                         git tag -d $1; \</span>
<span class="org-string">                         git push origin $2; \</span>
<span class="org-string">                         git push origin :refs/tags/$1; \</span>
<span class="org-string">                       }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb2576c" class="outline-3">
<h3 id="orgcb2576c">Remove a tag from a repository</h3>
<div class="outline-text-3" id="text-orgcb2576c">
<p>
Delete similar tags:
</p>

<pre class="example">
git delete-tag 'v0.8.*'
</pre>


<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Delete local and remote tags.</span>
    <span class="org-variable-name">delete-tag</span> = <span class="org-string">"!f() { [ -z ${1} ] \</span>
<span class="org-string">                         &amp;&amp; echo \"No tags given as an argument!\" \</span>
<span class="org-string">                         || (git tag -l ${1} | \</span>
<span class="org-string">                             xargs -I % echo \"git tag -d % \</span>
<span class="org-string">                                            &amp;&amp; git push --delete origin %\" | \</span>
<span class="org-string">                             sh); \</span>
<span class="org-string">                       }; f"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga945b21" class="outline-2">
<h2 id="orga945b21">Compare Revisions (commits, branches or tags)</h2>
<div class="outline-text-2" id="text-orga945b21">
<p>
<b>See what&rsquo;s changed</b> between two revisions.
</p>

<p>
Easily determine which changes:
</p>
<ul class="org-ul">
<li>are on the &ldquo;compare&rdquo; side (= merge <i>source</i>) but</li>
<li>are <i>not</i> on the &ldquo;base&rdquo; side (= merge <i>destination</i>).</li>
</ul>

<div class="note">
<p>
Diff using three-dot (<code>...</code>) notation.
</p>

</div>

<p>
You can see:
</p>
<ul class="org-ul">
<li>a list of commits,</li>
<li>a list of changed files,</li>
<li>a diff, and</li>
<li>any pull requests merged between the two versions.</li>
</ul>
</div>

<div id="outline-container-org07aa296" class="outline-3">
<h3 id="org07aa296">Commits</h3>
<div class="outline-text-3" id="text-org07aa296">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Usage: git compare-commits &lt;rev-base&gt; &lt;rev-compare&gt;</span>
    <span class="org-variable-name">compare-commits</span> = <span class="org-string">"!f() { git log --date=short $1...$2; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4758a85" class="outline-3">
<h3 id="org4758a85">Files changed</h3>
<div class="outline-text-3" id="text-org4758a85">
<p>
List all the <code>changed</code> files <b>between 2 commits</b>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Show changed files (with stat about line additions and line deletions)</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">between two commits.</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Usage: git compare-changed-files &lt;rev-base&gt; &lt;rev-compare&gt;</span>
    <span class="org-variable-name">compare-changed-files</span> = <span class="org-string">"!f() { git diff --stat $1...$2; }; f"</span>
</pre>
</div>

<p>
See the changed files in a branch <b>since it was forked from another branch</b>:
</p>

<pre class="example">
git diff --stat forked_from_branch...my_forked_branch
</pre>


<p>
See the changed files in a branch since the last merge with the origin branch:
</p>

<pre class="example">
git diff --stat origin/master...my_forked_branch
</pre>
</div>
</div>

<div id="outline-container-org87a5efc" class="outline-3">
<h3 id="org87a5efc">Diff</h3>
<div class="outline-text-3" id="text-org87a5efc">
<ul class="org-ul">
<li><p>
Inline diff (unified)
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Example: git compare master@{1day} master</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">(git compare &lt;rev-base&gt; &lt;rev-compare&gt; = git diff &lt;rev-base&gt;...&lt;rev-compare&gt;)</span>
    <span class="org-variable-name">compare</span> = <span class="org-string">"!f() { git diff $1...$2; }; f"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">https://github.com/fniessen/git-leuven/compare/master@%7B1day%7D...master</span>
</pre>
</div></li>

<li>Side-by-side diff (split)</li>
</ul>
</div>
</div>

<div id="outline-container-org300c8e4" class="outline-3">
<h3 id="org300c8e4">Merged pull requests</h3>
</div>

<div id="outline-container-org447937b" class="outline-3">
<h3 id="org447937b">Example comparisons</h3>
<div class="outline-text-3" id="text-org447937b">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Show commits that haven't made it to master yet.</span>
    <span class="org-variable-name">ahead-of-master</span> = log --oneline origin/master..HEAD
</pre>
</div>
</div>

<div id="outline-container-org00efae2" class="outline-4">
<h4 id="org00efae2">What did I do since I forked from the origin branch?</h4>
<div class="outline-text-4" id="text-org00efae2">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">log-local</span> = log --oneline origin..HEAD
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">show-branch-history</span> = <span class="org-string">"!f() { git log HEAD --not master; }; f"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">XXX We should get the name of the branch merge base</span>
</pre>
</div>

<p>
Assuming that your branch was created off of master, then while in the branch
(that is, you have the branch checked out):
</p>

<pre class="example">
git cherry -v master
</pre>


<p>
or
</p>

<pre class="example">
git log master..
</pre>


<p>
If you are not in the branch, then you can add the branch name to the &ldquo;git log&rdquo;
command, like this:
</p>

<pre class="example">
git log master..branchname
</pre>
</div>
</div>

<div id="outline-container-org9752115" class="outline-4">
<h4 id="org9752115"><span class="todo TODO">TODO</span> Diff all changes since branching from master</h4>
<div class="outline-text-4" id="text-org9752115">
<p>
Show all commits in a git branch since original branching point from <code>master</code>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">log since master.</span>
    <span class="org-variable-name">missing-master</span> = log master...

    <span class="org-comment-delimiter"># </span><span class="org-comment">diff since master.</span>
    <span class="org-variable-name">missing-master-diff</span> = diff master...
</pre>
</div>
</div>
</div>

<div id="outline-container-org944da33" class="outline-4">
<h4 id="org944da33">What did the origin do since I forked from them?</h4>
<div class="outline-text-4" id="text-org944da33">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">log-fetched</span> = log --oneline HEAD..origin
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e2a01a" class="outline-4">
<h4 id="org1e2a01a">History of your branch: List all commits on only one side of the branches</h4>
<div class="outline-text-4" id="text-org1e2a01a">
<p>
= UNION of log-local AND log-fetched?  (with prefix &lt; or &gt; for branch A or B)
</p>

<div class="org-src-container">
<pre class="src src-conf">    git log --graph --left-right --cherry-pick --oneline master...&lt;branch&gt;
</pre>
</div>

<p>
It is really a list of commits reachable from &rsquo;branch&rsquo; that are not reachable
from master. This gives you the information you want, but if and only if you
have never merged &rsquo;branch&rsquo; back to master, and have never merged master into
&rsquo;branch&rsquo; since you created it. If you have merged, then this history of
differences will collapse.
</p>
</div>
</div>

<div id="outline-container-org267c532" class="outline-4">
<h4 id="org267c532"><span class="todo TODO">TODO</span> Show the history difference between a local branch and its remote</h4>
<div class="outline-text-4" id="text-org267c532">
<p>
= git out?  (if I&rsquo;m the only one pushing?)
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">divergence</span> = !git log --left-right --graph --cherry-pick --oneline $1...origin/$1
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org54936e2" class="outline-2">
<h2 id="org54936e2">?Releases</h2>
<div class="outline-text-2" id="text-org54936e2">
<p>
You can create a release to package software, along with release notes and links
to binary files, for other people to use.
</p>

<p>
Releases are based on <b>Git tags</b>: tags are used to mark <b>release</b> versions, with the
<b>version number</b> as the <b>tag name</b>.
</p>

<p>
We recommend naming tags that fit within <a href="https://semver.org/">semantic versioning</a>, i.e. having the
form <code>v&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code>:
</p>
<ul class="org-ul">
<li><b>Major</b> release (from <code>v0.8.1</code> to <code>v1.0.0</code>) for bug fixes and new features that
break backwards compatibility,</li>
<li><b>Minor</b> release (from <code>v0.8.1</code> to <code>v0.9.0</code>) for bug fixes and new features that
maintain backwards compatibility, and</li>
<li><b>Patch</b> release (from <code>v0.8.1</code> to <code>v0.8.2</code>) only for bug fixes.</li>
</ul>

<div class="note">
<p>
It&rsquo;s common practice to prefix your version names with the letter <code>v</code>.
</p>

</div>

<p>
Tag and push changes to the repository:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">release</span> = <span class="org-string">"!f() { git tag -a v$1 -m \"Release version $1\" \</span>
<span class="org-string">                          &amp;&amp; git push origin --tags \</span>
<span class="org-string">                          &amp;&amp; git push origin; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org68afd49" class="outline-2">
<h2 id="org68afd49">?Contributors</h2>
<div class="outline-text-2" id="text-org68afd49">
<p>
Show authors of commits in the repository, <i>excluding merge commits</i>.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">contributors-name</span>  = shortlog -n -s --no-merges --
    <span class="org-variable-name">contributors-email</span> = shortlog -n -s -e --no-merges --
</pre>
</div>

<div class="note">
<p>
The <code>--</code> signals the <i>end of options</i>, that the rest of the parameters are limiters.
</p>

</div>
</div>
</div>

<div id="outline-container-org2a0ff90" class="outline-2">
<h2 id="org2a0ff90">?Graph</h2>
<div class="outline-text-2" id="text-org2a0ff90">
<p>
See example at <a href="https://gitlab.com/procps-ng/procps/-/network/master">https://gitlab.com/procps-ng/procps/-/network/master</a>
</p>

<p>
To see real <b>timeline</b> of who is working on what and when:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">graph</span> = log --graph -25 --branches --remotes --tags --format=format:<span class="org-string">'%C(yellow)%h %C(reset) %&lt;(75,trunc)%s &lt;%cn&gt; (%cr) %C(red)%d'</span> --date-order

    <span class="org-comment-delimiter"># </span><span class="org-comment">Show log as a graph</span>
    <span class="org-variable-name">log-graph</span> = log --graph --all --oneline --decorate
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">hist</span> = log --date=short --graph
</pre>
</div>

<p>
Directed Acyclic Graph:
</p>

<p>
See <a href="https://tortoisegit.org/docs/tortoisegit/tgit-dug-revgraph.html">https://tortoisegit.org/docs/tortoisegit/tgit-dug-revgraph.html</a>
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">graphviz</span> = <span class="org-string">"!f() { echo 'digraph git {' ; \</span>
<span class="org-string">                           git log -25 --pretty='format:  %h -&gt; { %p }' \"$@\" \</span>
<span class="org-string">                               | sed 's/[0-9a-f][0-9a-f]*/\"&amp;\"/g' ; \</span>
<span class="org-string">                       echo '}'; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1e82d4" class="outline-2">
<h2 id="orgf1e82d4">Pull requests</h2>
<div class="outline-text-2" id="text-orgf1e82d4">
<p>
XXX See <a href="https://github.com/github/hub/">https://github.com/github/hub/</a>
</p>
</div>

<div id="outline-container-orgfee218a" class="outline-3">
<h3 id="orgfee218a">Create a pull request</h3>
<div class="outline-text-3" id="text-orgfee218a">
<p>
Create a pull request against the default branch:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">pull-request-bb</span> = <span class="org-string">"!f() { repo_owner=$1; repo_slug=$2; \</span>
<span class="org-string">        curl --user $username \</span>
<span class="org-string">            https://bitbucket.org/$(git repo-owner)/$(git repo-slug)/pull-requests/new?source=$(git current-branch)&amp;t=1; }; f"</span>
</pre>
</div>

<p>
Add a comment in GitHub pull request:
</p>

<pre class="example">
curl -s -H \"Authorization: token ${GITHUB_TOKEN}\" -X POST -d '{\"body\": \"${text_pr}\"}' \"https://api.github.com/repos/${repository_name}/issues/${ghprbPullId}/comments\""
</pre>
</div>
</div>

<div id="outline-container-org28b90db" class="outline-3">
<h3 id="org28b90db">List pull requests</h3>
<div class="outline-text-3" id="text-org28b90db">
<p>
List pull requests in the current repository.
</p>

<ul class="org-ul">
<li>Pull Requests assigned to me</li>
<li>Pull Requests I&rsquo;ve created</li>

<li>Open</li>
<li>Merged</li>
<li>Closed</li>
<li>All</li>
</ul>

<p>
Git aliases for pull requests and other useful stuff
<a href="https://gist.github.com/metlos/9368527">https://gist.github.com/metlos/9368527</a>
</p>

<p>
For GitHub
</p>
<pre class="example">
git ls-remote origin 'refs/pull/*'
</pre>


<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">pr-list</span> = XXX
</pre>
</div>
</div>
</div>

<div id="outline-container-org94d3fe0" class="outline-3">
<h3 id="org94d3fe0">1. Check out a pull request locally</h3>
<div class="outline-text-3" id="text-org94d3fe0">
<p>
XXX <a href="https://gitlab.com/help/user/project/merge_requests/index.md#checkout-merge-requests-locally">https://gitlab.com/help/user/project/merge_requests/index.md#checkout-merge-requests-locally</a>
</p>

<p>
Sometimes, just reading the code of a pull request might not be enough to verify
if it should be merged.  Maybe you want to add something, or some tests are
failing, and you want to run them locally on your computer.
</p>

<p>
<b>Check out</b> the head of a <b>pull request</b> as a <b>local branch</b>:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">For GitHub.</span>
    <span class="org-variable-name">pr-checkout-gh</span> = <span class="org-string">"!f() { git fetch origin pull/$1/head:pr/$1 \</span>
<span class="org-string">                                 &amp;&amp; git checkout pr/$1; }; f"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/checking-out-pull-requests-locally</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">For GitLab.</span>
    <span class="org-variable-name">pr-checkout-gl</span> = <span class="org-string">"!f() { git fetch origin merge-requests/$1/head:pr/$1 \</span>
<span class="org-string">                                 &amp;&amp; git checkout pr/$1; }; f"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">https://about.gitlab.com/blog/2016/12/08/git-tips-and-tricks/#add-an-alias-to-checkout-merge-requests-locally</span>
</pre>
</div>

<p>
Now you can check out a particular pull request.  For example:
</p>

<pre class="example">
git pr-checkout 5
</pre>


<p>
will fetch the <b>pull request</b> #5 into a <b>local</b> <code>pr/5</code> <b>branch</b> and check it out.
</p>
</div>
</div>

<div id="outline-container-org216cfba" class="outline-3">
<h3 id="org216cfba">2. Review the changes locally</h3>
</div>

<div id="outline-container-org7be58c3" class="outline-3">
<h3 id="org7be58c3">Push changes to a pull request</h3>
<div class="outline-text-3" id="text-org7be58c3">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">bash</span>
<span class="org-variable-name">tmpfile</span>=$(<span class="org-sh-quoted-exec">mktemp</span>)
<span class="org-variable-name">repoSlug</span>=$(<span class="org-sh-quoted-exec">git</span> remote -v | grep <span class="org-string">'^upstream'</span> | head -n1 | perl -lne <span class="org-string">'s/github.com:?\/?(.*)\/([^.]*)([.]git| )// or next; print $1,"/",$2'</span>)
<span class="org-variable-name">prNumber</span>=$(<span class="org-sh-quoted-exec">git</span> rev-parse --abbrev-ref HEAD | cut -d/ -f 2)
curl -s https://api.github.com/repos/${<span class="org-variable-name">repoSlug</span>}/pulls/${<span class="org-variable-name">prNumber</span>} &gt; $<span class="org-variable-name">tmpfile</span>
<span class="org-keyword">trap</span> <span class="org-string">"{ rm -f $tmpfile; }"</span> EXIT
<span class="org-variable-name">headRef</span>=$(<span class="org-sh-quoted-exec">cat</span> $<span class="org-variable-name">tmpfile</span> | jq -r <span class="org-string">'.head.ref'</span>)
<span class="org-variable-name">headSlug</span>=$(<span class="org-sh-quoted-exec">cat</span> $<span class="org-variable-name">tmpfile</span> | jq -r <span class="org-string">'.head.repo.full_name'</span>)
git push -f git@github.com:${<span class="org-variable-name">headSlug</span>} HEAD:${<span class="org-variable-name">headRef</span>}
</pre>
</div>

<p>
For more details on pushing changes to a PR, please see <a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/allowing-changes-to-a-pull-request-branch-created-from-a-fork">the official article</a>.
</p>
</div>
</div>

<div id="outline-container-org120970b" class="outline-3">
<h3 id="org120970b">3. Merge the branch and fix any conflicts that come up</h3>
<div class="outline-text-3" id="text-org120970b">
<p>
git fetch origin
git checkout &ldquo;origin/master&rdquo;
git merge &#x2013;no-ff &ldquo;1-change-encoding-of-read-sql-file&rdquo;
</p>

<p>
XXX See <a href="https://gitlab.com/help/user/project/merge_requests/squash_and_merge">https://gitlab.com/help/user/project/merge_requests/squash_and_merge</a>
</p>
</div>
</div>

<div id="outline-container-org4f78692" class="outline-3">
<h3 id="org4f78692">Merge pull request</h3>
<div class="outline-text-3" id="text-org4f78692">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">For GitHub.</span>
    <span class="org-variable-name">mpr</span> = <span class="org-string">"!f() { \</span>
<span class="org-string">            declare currentBranch=\"$(git current-branch)\"; \</span>
<span class="org-string">            declare branch=\"${2:-$currentBranch}\"; \</span>
<span class="org-string">            if [ $(printf \"%s\" \"$1\" | grep '^[0-9]\\+$' &gt; /dev/null; printf $?) -eq 0 ]; then \</span>
<span class="org-string">                git fetch origin refs/pull/$1/head:pr/$1 &amp;&amp; \</span>
<span class="org-string">                git checkout -B $branch &amp;&amp; \</span>
<span class="org-string">                git rebase $branch pr/$1 &amp;&amp; \</span>
<span class="org-string">                git checkout -B $branch &amp;&amp; \</span>
<span class="org-string">                git merge --ff-only pr/$1 &amp;&amp; \</span>
<span class="org-string">                git delete-local-branch pr/$1; \</span>
<span class="org-string">            fi \</span>
<span class="org-string">        }; f"</span>

    <span class="org-comment-delimiter"># </span><span class="org-comment">merges given pull request into the current branch</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">the commit message will have the same for as if done using the</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">merge button on github.com</span>
    <span class="org-comment-delimiter">#</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">git merge-pr origin 5</span>
    <span class="org-variable-name">merge-pr</span> = <span class="org-string">"!sh -c '\</span>
<span class="org-string">        user_and_repo=`git remote show $1 | grep \"Fetch URL\" | sed -E \"s/.*github.com[:\\/]([a-zA-Z_\\-]+)\\/([a-zA-Z_\\-]+)\\.git$/\\1 \\2/\"`; \</span>
<span class="org-string">        user=`echo $user_and_repo | cut -d\" \" -f1`; \</span>
<span class="org-string">        repo=`echo $user_and_repo | cut -d\" \" -f2`; \</span>
<span class="org-string">        tmpfile=`mktemp`; \</span>
<span class="org-string">        curl -si https://api.github.com/repos/$user/$repo/pulls/$2 &gt; $tmpfile; \</span>
<span class="org-string">        pull_author=`cat $tmpfile | awk \"{if (/ *\\\"head\\\"/) head=\\\\$1; if (/ *\\\"login\\\": \\\"/) value=\\\\$2}{if (head &amp;&amp; value) print value; if (head &amp;&amp; value) exit}\" | sed -E \"s/\\\"([^\\\"]+)\\\".*/\\1/\"`; \</span>
<span class="org-string">        pull_ref=`cat $tmpfile | awk \"{if (/ *\\\"head\\\"/) head=\\\\$1; if (/ *\\\"ref\\\": \\\"/) label=\\\\$2}{if (head &amp;&amp; label) print label; if (head &amp;&amp; label) exit}\" | sed -E \"s/\\\"([^\\\"]+)\\\".*/\\1/\"`; \</span>
<span class="org-string">        pull_title=`cat $tmpfile | grep \"\\\"title\\\": \" | sed \"s/^ *\\\"title\\\": \\\"//\" | sed \"s/\\\",$//\"`; \</span>
<span class="org-string">        rm $tmpfile; \</span>
<span class="org-string">        git fetch $1 pull/$2/head; \</span>
<span class="org-string">        git merge --no-ff -m \"Merged pull request #$2 from $pull_author/$pull_ref\n\n$pull_title\" FETCH_HEAD; \</span>
<span class="org-string">        ' -"</span>
</pre>
</div>

<p>
This is actually quite useful if you are a maintainer of a project on
GitHub.
</p>

<p>
There are two ways you can call it:
</p>

<ul class="org-ul">
<li><p>
<code>git mpr 123</code>
</p>

<p>
This will merge pull request number 123 on top of the current branch.
</p></li>

<li><p>
<code>git mpr 123 master</code>.
</p>

<p>
This will merge pull request number 123 on top of the branch called master.
</p></li>
</ul>

<p>
If you are using GitHub, you can easily merge a pull request using the web
interface, but if you want a bit more control over how you are merging the pull
requests (for example, I&rsquo;m using the <code>git merge --ff-only</code> option, while GitHub
will use <code>git merge --no-ff</code>), or you just want to merge a bunch of pull requests
without leaving your terminal &#x2013; this function will help you.
</p>
</div>
</div>

<div id="outline-container-org208e277" class="outline-3">
<h3 id="org208e277">4. Push the result of the merge to the remote</h3>
<div class="outline-text-3" id="text-org208e277">
<pre class="example">
git push origin "master"
</pre>
</div>
</div>

<div id="outline-container-org08f99cf" class="outline-3">
<h3 id="org08f99cf">Clean up old branch</h3>
<div class="outline-text-3" id="text-org08f99cf">
<p>
Delete source branch:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">pr-clean</span> = <span class="org-string">"!f() { git delete-local-branch pr/$1; }; f"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b55d8e" class="outline-3">
<h3 id="org3b55d8e">Show in a web browser</h3>
<div class="outline-text-3" id="text-org3b55d8e">
<p>
Open a pull request page in a web browser.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">pr-show</span> = XXX &lt;pr-number&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orga7c08ec" class="outline-3">
<h3 id="orga7c08ec">Who?</h3>
<div class="outline-text-3" id="text-orga7c08ec">
<p>
Extra script (called <a href="https://github.com/mislav/dotfiles/blob/master/bin/git-overwritten">git-overwritten</a>) which shows blame information about
original authors of lines changed or removed in a given branch:
</p>

<div class="org-src-container">
<pre class="src src-shell">git overwritten feature origin/master
</pre>
</div>

<p>
This is useful when opening pull requests per GitHub Flow; you&rsquo;ll want your pull
request reviewed by colleagues but you might not be sure who to ping. With
git-overwritten you&rsquo;ll get the names of people who wrote the lines you just
changed, so you&rsquo;ll know who to @-mention when opening a pull request.
</p>

<p>
&gt; So, given a patch (or a branch) together with a &ldquo;base revision&rdquo;, you&rsquo;d get
&gt; a list of code chunks modified by that patch, then run &ldquo;annotate&rdquo; on the
&gt; base revision, and look for those code chunks, collecting the names of
&gt; corresponding authors.
</p>

<p>
Sounds like git-guilt (which I&rsquo;ve just read about today), might be
relevant: <a href="https://bitbucket.org/tpettersen/git-guilt">https://bitbucket.org/tpettersen/git-guilt</a>
</p>
</div>
</div>

<div id="outline-container-org04ff2d4" class="outline-3">
<h3 id="org04ff2d4">Find the pull request that introduced a commit</h3>
<div class="outline-text-3" id="text-org04ff2d4">
<p>
Related pull request:
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">related-pr-of-commit</span> = <span class="org-string">"! sh -c 'git log $1..master --ancestry-path --merges --oneline | tail -n1 ' -"</span>
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">
<pre class="src src-shell">&gt; git related-pr-of-commit 22689a1
1c6b5c4 Merge branch <span class="org-string">'5-resolve-it'</span> into <span class="org-string">'master'</span>
</pre>
</div>

<p>
In this case, the commit comes from pull request 5.
</p>
</div>
</div>

<div id="outline-container-org9c43f19" class="outline-3">
<h3 id="org9c43f19">Saved replies</h3>
<div class="outline-text-3" id="text-org9c43f19">
<p>
GitHub allows to <a href="https://github.blog/2016-03-29-saved-replies/">save replies</a>. You can set them in <a href="https://github.com/settings/replies">your GitHub settings</a>.  Here
are a couple of commonly used replies:
</p>

<p>
Missing changelog
</p>

<div class="org-src-container">
<pre class="src src-text">This still lacks a changelog entry. Please see [the changelog folder](../tree/master/changelog) for instructions.
Hence, I added the "pending changelog" label.
</pre>
</div>

<p>
Missing spec PR
</p>

<div class="org-src-container">
<pre class="src src-text">This still needs a PR to the [specification](https://github.com/dlang/dlang.org/tree/master/spec) at [dlang.org](https://github.com/dlang/dlang.org). Hence, I added the label "missing spec PR".

Please refer to the [dlang.org CONTRIBUTING guide](https://github.com/dlang/dlang.org/blob/master/CONTRIBUTING.md) for instructions to build dlang.org locally. If you use Windows, don't worry, you can do your changes "blindly" and preview them at DAutoTest.
</pre>
</div>

<p>
Phantom Zone
</p>

<div class="org-src-container">
<pre class="src src-text">This PR entered the Phantom Zone
-----------------------------------------------


This PR has entered the [Phantom Zone](http://forum.dlang.org/post/ouuutodvhmnghzbeoqen@forum.dlang.org) as it still needs to have the reviewers' concerns addressed and rebased.

Reason for entering the Phantom Zone
----------------------------------------------------

This PR is nice, and normally I would revive such a PR if the author was no longer active. I would also revive it if it were an important bug fix or something of higher priority.  This PR, however, is just a refactoring, so I'm going to put it in the [Phantom Zone](http://forum.dlang.org/post/ouuutodvhmnghzbeoqen@forum.dlang.org) and close it for now.

How do I get this PR out of the Phantom Zone
-------------------------------------------------------------

Easy: Address the comments -&gt; open a new PR (mention this one + short summary in the description).
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org73f9417" class="outline-2">
<h2 id="org73f9417">Pipelines</h2>
<div class="outline-text-2" id="text-org73f9417">
<div class="org-src-container">
<pre class="src src-conf"><span class="org-variable-name">rsync-deploy</span> =
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb98f0cd" class="outline-2">
<h2 id="orgb98f0cd">Deployments (to different environments)</h2>
<div class="outline-text-2" id="text-orgb98f0cd">
<p>
(see structure of actions in BitBucket)
</p>

<p>
See <a href="https://bitbucket.org/blog/wordpress-continuous-deployment">https://bitbucket.org/blog/wordpress-continuous-deployment</a>
</p>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">Deploy a branch to review server (https://review-feature-1.example.com).</span>
<span class="org-variable-name">deploy-review</span> =

<span class="org-comment-delimiter"># </span><span class="org-comment">Deploy master to staging server (https://staging.example.com).</span>
<span class="org-variable-name">deploy-staging</span> =

<span class="org-comment-delimiter"># </span><span class="org-comment">Deploy master to production server (https://example.com).</span>
<span class="org-variable-name">deploy-prod</span> =

  <span class="org-comment-delimiter"># </span><span class="org-comment"># Deploy</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">staging = !git push heroku-staging $(git current-branch):master -f &amp;&amp; git track 'Deployed to staging ' # push current branch to staging, can add more comments after</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">dev = !git push heroku-dev $(git current-branch):master -f &amp;&amp; git track 'Deployed to dev ' # push current branch to dev</span>
  <span class="org-comment-delimiter"># </span><span class="org-comment">deploy = !git push heroku $(git current-branch):master -f &amp;&amp; git track 'Deployed to production ' # push current branch to production</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">shipit = push heroku master</span>

 <span class="org-comment-delimiter"># </span><span class="org-comment">deploy='git push production master &amp;&amp; terminal-notifier-notify -title "Deploy" -message "Deploy complete"'</span>
 <span class="org-comment-delimiter"># </span><span class="org-comment">stage='git push staging $(git current-branch):master'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c364a7" class="outline-2">
<h2 id="org2c364a7">Issues</h2>
<div class="outline-text-2" id="text-org2c364a7">
</div>
<div id="outline-container-orgb1b6660" class="outline-3">
<h3 id="orgb1b6660">Create Issue</h3>
<div class="outline-text-3" id="text-orgb1b6660">
<p>
Open an issue in the current repository.
</p>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">title</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">description</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">assignee</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">kind</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">priority</span>
    <span class="org-variable-name">create-issue</span> = XXX
</pre>
</div>

<p>
Issue template:
</p>

<div class="org-src-container">
<pre class="src src-text">### Expected behavior
### Actual behavior
### Steps to reproduce the behavior
</pre>
</div>

<p>
See <a href="https://github.com/devspace/awesome-github-templates">https://github.com/devspace/awesome-github-templates</a>
and <a href="https://jwong.co.uk/blog/2018/09/01/useful-github-features/#emoji-organising">https://jwong.co.uk/blog/2018/09/01/useful-github-features/#emoji-organising</a>
</p>
</div>
</div>

<div id="outline-container-orgc203383" class="outline-3">
<h3 id="orgc203383">Create Pull Requests</h3>
<div class="outline-text-3" id="text-orgc203383">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">create-issue-pull-request</span> = XXX
</pre>
</div>

<p>
Title of pull request:
</p>

<pre class="example">
WIP: Resolve "Title of issue"
</pre>


<p>
Once merged:
</p>

<pre class="example">
Resolve "Title of issue"
</pre>
</div>
</div>

<div id="outline-container-org53b080c" class="outline-3">
<h3 id="org53b080c">List All Issues</h3>
<div class="outline-text-3" id="text-org53b080c">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">issues = "!f() { username=$1; \</span>
    <span class="org-comment-delimiter">#     </span><span class="org-comment">curl --user $username \</span>
    <span class="org-comment-delimiter">#         </span><span class="org-comment">https://api.bitbucket.org/2.0/repositories/$username/$(git repo-slug)/issues \</span>
    <span class="org-comment-delimiter">#         </span><span class="org-comment">| jq -C --compact-output '.values | .[] | [.id, .title, .type, .priority, .state, .votes, .assignee.display_name, .created_on, .updated_on]' \</span>
    <span class="org-comment-delimiter">#         </span><span class="org-comment">| sed -r 's/(....)-(..)-(..)T(..):(..):(..).(............)/\\1-\\2-\\3/g' \</span>
    <span class="org-comment-delimiter">#         </span><span class="org-comment">| sed \"s/new/NEW/\" \</span>
    <span class="org-comment-delimiter">#         </span><span class="org-comment">| sed \"s/NEW/$(tput setaf 2) -- NOUVEAU -- $(tput sgr0)/\" \</span>
    <span class="org-comment-delimiter">#         </span><span class="org-comment">| sed \"s/NEW/\$(tput setaf 3) -NOUV- \$(tput sgr0)/\" \</span>
    <span class="org-comment-delimiter">#         </span><span class="org-comment">| sed \"s/open/OPEN/\" \</span>
    <span class="org-comment-delimiter">#         </span><span class="org-comment">| sed \"s/closed/CLOSED/\"; }; f"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">--data-urlencode 'priority &gt;= \"major\"'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">issues</span> = <span class="org-string">"!f() { username=$1; \</span>
<span class="org-string">        curl --user $username \</span>
<span class="org-string">            'https://api.bitbucket.org/2.0/repositories/$username/$(git repo-slug)/issues?pagelen=100' \</span>
<span class="org-string">            | jq --compact-output '.values | .[] | [.id, .title, .type, .priority, .state, .votes, .assignee.display_name, .created_on, .updated_on]' \</span>
<span class="org-string">            | sed \"s#\"open\"#$(tput setaf 2)&amp;$(tput sgr0)#\" \</span>
<span class="org-string">            | sed \"s#\"closed\"#$(tput setaf 1)&amp;$(tput sgr0)#\"; }; f"</span>
</pre>
</div>

<p>
Set color to red or green, depending on issue state.
</p>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-comment-delimiter"># </span><span class="org-comment">Works!  Need to put quotes around the URL!</span>
curl -u $username -X GET <span class="org-string">'https://api.bitbucket.org/2.0/repositories/$username/$(git repo-slug)/issues?pagelen=100'</span> \
    | jq --compact-output <span class="org-string">'.values | .[] | [.id, .title, .type, .priority, .state, .votes, .assignee.display_name, .created_on, .updated_on]'</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">curl -s -S</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org436e7e8" class="outline-3">
<h3 id="org436e7e8">List Open Issues</h3>
<div class="outline-text-3" id="text-org436e7e8">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">issues-open</span> = !git issues | grep <span class="org-string">"open"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org219444a" class="outline-3">
<h3 id="org219444a">List My Issues (assigned to me)</h3>
<div class="outline-text-3" id="text-org219444a">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">issues-assigned-to-me</span> = !git issues | grep <span class="org-string">"$(git config user.name)"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ee4863" class="outline-3">
<h3 id="org8ee4863">List Issues I&rsquo;ve created</h3>
<div class="outline-text-3" id="text-org8ee4863">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">issues-created-by-me</span> = XXX
</pre>
</div>
</div>
</div>

<div id="outline-container-org4893890" class="outline-3">
<h3 id="org4893890">Show Issue</h3>
<div class="outline-text-3" id="text-org4893890">
<p>
Show an existing issue specified by NUMBER.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">show-issue</span> = XXX
</pre>
</div>
</div>
</div>

<div id="outline-container-org0182897" class="outline-3">
<h3 id="org0182897">Open Issues in a web browser</h3>
<div class="outline-text-3" id="text-org0182897">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">browse-issues</span> = <span class="org-string">"!f() { URL=$(git config --get remote.origin.url); open ${URL/.git}/issues/$1; }; f"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga944575" class="outline-2">
<h2 id="orga944575">Downloads</h2>
<div class="outline-text-2" id="text-orga944575">
<p>
Download repository, tag or branch.
</p>

<div class="org-src-container">
<pre class="src src-conf">    <span class="org-comment-delimiter"># </span><span class="org-comment">Put everything in the current repo in a Zip archive.</span>
    <span class="org-variable-name">download-repository</span> = <span class="org-string">"!f() { git archive ${1:-HEAD} --format=zip \</span>
<span class="org-string">                                      -o $(basename $(git root))-commit-$(git rev-parse ${1:-HEAD}).zip; }; f"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">XXX Test it with tag or branch.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org81b75a9" class="outline-2">
<h2 id="org81b75a9">Settings</h2>
<div class="outline-text-2" id="text-org81b75a9">
</div>
<div id="outline-container-orgfff7530" class="outline-3">
<h3 id="orgfff7530">SSH keys</h3>
<div class="outline-text-3" id="text-orgfff7530">
<p>
List the user&rsquo;s public SSH keys:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">For GitHub.</span>
curl -O https://github.com/fniessen.keys

<span class="org-comment-delimiter"># </span><span class="org-comment">For BitBucket.</span>
curl https://api.bitbucket.org/2.0/users/fniessen/ssh-keys | jq <span class="org-string">'.values'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org180b268" class="outline-2">
<h2 id="org180b268">------------------------------------------------------------------------------</h2>
</div>

<div id="outline-container-orgf080591" class="outline-2">
<h2 id="orgf080591">Download repository</h2>
<div class="outline-text-2" id="text-orgf080591">
</div>
<div id="outline-container-orgf511d7f" class="outline-3">
<h3 id="orgf511d7f">Easily launch a temporary one-off Git server from any local repository, to enable a peer-to-peer Git workflow</h3>
<div class="outline-text-3" id="text-orgf511d7f">
<div class="org-src-container">
<pre class="src src-conf">    <span class="org-variable-name">serve</span> = <span class="org-string">"daemon --verbose --export-all --base-path=.git --reuseaddr --strict-paths .git/"</span>
    <span class="org-variable-name">serve</span> = <span class="org-string">"-c daemon.receivepack=true daemon --base-path=. --export-all --reuseaddr --verbose"</span>
</pre>
</div>

<ol class="org-ol">
<li>Run git serve. &ldquo;Ready to rumble,&rdquo; it will report. Git is bad-ass.</li>
<li>Find out your IP address. Say it&rsquo;s 192.168.1.123.</li>
<li>Say &ldquo;hey Jane, I&rsquo;m not ready/able to push these commits up to origin, but you
can fetch my commits into your clone by running git fetch
git://192.168.1.123/&rdquo;</li>
<li>Press ctrl+c when you don&rsquo;t want to serve that repo any longer.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-orga1f400b" class="outline-2">
<h2 id="orga1f400b">What if</h2>
<div class="outline-text-2" id="text-orga1f400b">
<p>
&#x2026; I&rsquo;m working on <code>master</code> adding a simple feature. After a few minutes I realize
it was not so simple and it should have been better to work into a new branch.
</p>

<p>
<a href="http://stackoverflow.com/questions/2569459/git-create-a-branch-from-unstaged-uncommited-changes-on-master">http://stackoverflow.com/questions/2569459/git-create-a-branch-from-unstaged-uncommited-changes-on-master</a>
</p>
</div>
</div>

<div id="outline-container-org7f7256c" class="outline-2">
<h2 id="org7f7256c">If you made a mistake</h2>
<div class="outline-text-2" id="text-org7f7256c">
<p>
Absolutely read <a href="https://github.com/blog/2019-how-to-undo-almost-anything-with-git">https://github.com/blog/2019-how-to-undo-almost-anything-with-git</a>!
</p>
</div>
</div>

<div id="outline-container-org9a0f80a" class="outline-2">
<h2 id="org9a0f80a">If you get errors&#x2026;</h2>
<div class="outline-text-2" id="text-org9a0f80a">
<p>
Many situations may cause &ldquo;errors&rdquo;:
</p>

<ul class="org-ul">
<li>merge conflicts (two people editing the same part of the same file)</li>

<li>unmerged changes (another person committed a change before you did, so you
need to merge their changes first)</li>

<li>attempting to recover from a situation such as an accidental merge, and making
the situation worse.</li>
</ul>

<p>
<a href="https://explainxkcd.com/wiki/index.php/1597:_Git">https://explainxkcd.com/wiki/index.php/1597:_Git</a>
</p>
</div>

<div id="outline-container-orgb14d9ac" class="outline-3">
<h3 id="orgb14d9ac">Method 1</h3>
<div class="outline-text-3" id="text-orgb14d9ac">
<p>
It is POSSIBLE that a safe way to recover from your problems is as follows:
</p>

<div class="org-src-container">
<pre class="src src-shell">git stash
git reset --hard HEAD
git pull --ff-only
git stash apply
</pre>
</div>

<p>
Of course, if any of the commands but the last fails, stop and ask for advice
again. If the last one reports merge conflicts, fix them by hand and run <code>git add</code>
on each file after you fixed it. DO NOT use C-x v v after fixing a merge
conflict, since that runs both git add and git commit, and you are not ready for
the latter until all merge conflicts are dealt with.
</p>

<p>
In any case, do run git status before finally doing git commit. If all succeeds,
you can clean up with:
</p>

<div class="org-src-container">
<pre class="src src-shell">git stash drop
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf286572" class="outline-3">
<h3 id="orgf286572">Alternative</h3>
<div class="outline-text-3" id="text-orgf286572">
<p>
If your <code>master</code> branch is busted, rename it to something else so that it&rsquo;s out of
the way:
</p>

<div class="org-src-container">
<pre class="src src-shell">git rename-local-branch master master-busted
</pre>
</div>

<p>
Create a new branch <code>master</code> that tracks the origin:
</p>

<div class="org-src-container">
<pre class="src src-shell">git branch --track master origin/master
</pre>
</div>

<p>
Check it out (be careful, this will discard all your local changes):
</p>

<div class="org-src-container">
<pre class="src src-shell">git checkout -f master
</pre>
</div>

<p>
Make sure the <code>master</code> is up-to-date:
</p>

<div class="org-src-container">
<pre class="src src-shell">git pull
</pre>
</div>
</div>
</div>

<div id="outline-container-org5fd5e94" class="outline-3">
<h3 id="org5fd5e94">A GitHub test repository to experiment with conflicts</h3>
<div class="outline-text-3" id="text-org5fd5e94">
<p>
You can experiment with resolving a Git conflict with this repository:
<a href="https://github.com/brianleetest/testGit/blob/master/README.md">https://github.com/brianleetest/testGit/blob/master/README.md</a>
</p>
</div>
</div>
</div>

<div id="outline-container-orgdeac000" class="outline-2">
<h2 id="orgdeac000">GitHub tasks</h2>
<div class="outline-text-2" id="text-orgdeac000">
</div>

<div id="outline-container-org7c3d81d" class="outline-3">
<h3 id="org7c3d81d">Force push</h3>
<div class="outline-text-3" id="text-org7c3d81d">
<div class="org-src-container">
<pre class="src src-shell">git push --force origin master
</pre>
</div>
</div>

<div id="outline-container-org6f1a447" class="outline-4">
<h4 id="org6f1a447">Doc about push failure</h4>
<div class="outline-text-4" id="text-org6f1a447">
<p>
If a push fails, that does not necessarily indicate a &ldquo;bad state&rdquo; &#x2013; it simply
represents that your history is different than what the remote server has, and
that the tip of the branch you are pushing to cannot simply be &ldquo;fast-forwarded&rdquo;
to your commit.
</p>

<p>
After a failed push, you are in no different state than you were before the push
(aside from a possibly puzzled mental state).
</p>

<p>
In your case, since you just want to commit and push in one operation, you
likely want to run <code>git pull --rebase</code>, which would get those changes and then
automatically re-commit your work on top of them, as if you had those changes
all along.  You could then push.  So, something like:
</p>

<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">Commit all changes and attempt to push, pulling in changes if necessary and</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">re-pushing; on failure, restore to previous state with changes uncomitted.</span>
git commit -am Foo <span class="org-sh-escaped-newline">\</span>
  &amp;&amp; {
    git push <span class="org-sh-escaped-newline">\</span>
      |   | { |
        { git pull --rebase || handle-pull-conflicts; } <span class="org-sh-escaped-newline">\</span>
          &amp;&amp; git push;
      }
  } <span class="org-sh-escaped-newline">\</span>
  |   | { |
    git reset --soft HEAD~
    <span class="org-builtin">echo</span> <span class="org-string">'Commit failed.'</span>
  }
</pre>
</div>

<p>
But what if rebasing fails?  Then you are left resolving a conflict before you
can attempt the push operation again.  I do not know how you would want to
handle this.  <code>handle-pull-conflicts</code> might simply perform a <code>git rebase --abort</code>
and exit with a non-zero status, or it may open a UI/shell to help resolve
changes.  If you are pushing after every change, this amounts to correcting
a single commit, so it might be worth having VC maintain the state here, allow
you to correct your commit, and then the vc-next-action would be to run <code>git
rebase --continue</code> after adding the files that conflicted.
</p>

<p>
This will be how the majority of Git users will resolve rejected pushes.
</p>

<p>
Does that make sense?
</p>

<p>
[Aside: <code>git pull</code> without <code>--rebase</code> performs a <code>git fetch &amp;&amp; git merge
  whatever-branch-you-are-tracking</code>, which has the unfortunate side-effect of
creating a merge commit if histories are different; this muddies up history.
<code>git pull --rebase</code> performs <code>git fetch &amp;&amp; git rebase
  whatever-branch-you-are-tracking</code>.  The difference in the two styles of
conflicts here is that, with rebasing, since you are re-committing each and
every changeset, you may get multiple conflicts on any number of commits,
whereas a merge will give you a single conflict that must be resolved at once.
The benefit of rebasing is that it gives you a clean history and does not
produce an unnecessary merge conflict which you would then push to origin,
akin to leaving a bag of poop on origin&rsquo;s doorstep.]
</p>

<p>
For other users, it may represent a wholly different problem.  For example, if
I were to push to GNU ease.js&rsquo; repo and get that message, that would be
a problem, since that means that someone has committed to my repository without
my permission.  An automatic pull and re-push would be bad in this case, since
that makes it look like I&rsquo;m okay with that.
</p>

<p>
A failed push could also mean that you are tracking the wrong branch, or pushing
to the wrong repository.  Git allows you to set a &ldquo;tracking branch&rdquo;, which can
be anything&#x2014;a local branch, a remote branch, or a branch in an entirely
different repository, local or remote.  Further, you can override the tracking
branch by specifying which remote to push to as part of the <code>push</code> command.
</p>

<p>
In your case, you&rsquo;d always want to respect the tracking branch and assume that
there are no problems pushing, since you use only one remote, and the tracking
branch is always a branch of the same name on origin.
</p>

<p>
A failed push could also mean that someone rudely rewrote history on the remote
branch (using <code>git push --force</code>) and someone needs a talkin&rsquo; to.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org4357ae3" class="outline-2">
<h2 id="org4357ae3">References</h2>
<div class="outline-text-2" id="text-org4357ae3">
<ul class="org-ul">
<li><a href="https://github.com/tj/git-extras">https://github.com/tj/git-extras</a></li>
<li><a href="https://hub.github.com/hub.1.html">https://hub.github.com/hub.1.html</a></li>
<li><a href="http://stackoverflow.com/questions/2423777/is-it-possible-to-create-a-remote-repo-on-github-from-the-cli-without-ssh">http://stackoverflow.com/questions/2423777/is-it-possible-to-create-a-remote-repo-on-github-from-the-cli-without-ssh</a></li>

<li><a href="https://git.wiki.kernel.org/index.php/Aliases">Git SCM Wiki - Aliases</a></li>
<li><a href="https://ochronus.com/git-tips-from-the-trenches/">Git tips from the trenches</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgdee647d" class="outline-2">
<h2 id="orgdee647d">Free private repositories</h2>
<div class="outline-text-2" id="text-orgdee647d">
<p>
I use the <b>free private repos</b> from <a href="https://bitbucket.org/">https://bitbucket.org/</a>.
</p>
</div>
</div>

<div id="outline-container-org95fe48b" class="outline-2">
<h2 id="org95fe48b">Use Git and SVN together</h2>
<div class="outline-text-2" id="text-org95fe48b">
<p>
You can combine both Git and SVN on the same project codebase, <b>in the same
working directory</b>:
</p>

<ul class="org-ul">
<li><a href="http://www.netinstructions.com/git-and-svn-together/">http://www.netinstructions.com/git-and-svn-together/</a></li>
<li><a href="https://www.belatrixsf.com/blog/a-happy-way-to-combine-svn-and-git">https://www.belatrixsf.com/blog/a-happy-way-to-combine-svn-and-git</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
